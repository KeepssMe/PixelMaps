// ==UserScript==
// @name Pixel Minimap (Test)
// @description OMG. I made a minimap. (At least I hope)
// @version 0.3.1.4
// @author KeepssMe | Thank you Sallbet for testing and listening to my whining
// @exclude *git.pixelplanet.fun/*
// @match *.pixelplanet.fun/*
// @match *pixelplanet.fun/*
// @match *fuckyouarkeros.fun/*
// @match *pixelzone.io/*
// @match *pixelcanvas.io/*
// @connect raw.githubusercontent.com
// @downloadURL https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/minimap.user.js
// @grant GM_getResourceText
// @grant GM_addStyle
// @grant GM_addElement
// @grant GM_listValues
// @grant GM_setValue
// @grant GM_getValue
// @grant GM_deleteValue
// @grant GM_xmlhttpRequest
// @iconURL https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/icons/icon-min.png
// @namespace https://github.com/KeepssMe/PixelMinimap
// @resource PPF_CHUNKCHECKER https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/ppf.chunkchecker.js
// @resource TRANSLATIONS https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/translations.json
// @resource STYLES https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/styles.css
// @resource VIEWS https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/views.html
// @run-at document-start
// @sandbox raw
// @updateURL https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/minimap.user.js
// ==/UserScript==

(()=>{const t=unsafeWindow,i=window;class s{static info=i.GM.info;static t=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-18-s)})).join("")}(33,148,129,122)+21269..toString(36).toLowerCase()+34..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+690366..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-8-s)})).join("")}(14,122,136)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(19,204,184,166)+29..toString(36).toLowerCase()];static i=t=>JSON.parse(s.t(t));static#t=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-1-s)})).join("")}(31,136,132,129,110,103)+13..toString(36).toLowerCase()+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+998726..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(53,192)+29..toString(36).toLowerCase()];static addElement(t,i={},s=null){return s?this.#t(s,t,i):this.#t(t,i)}static h=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(42,190,186,183,164,157)+13..toString(36).toLowerCase()+35..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+1078..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-20-s)})).join("")}(45,173)+14..toString(36).toLowerCase()]}class r{static o=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(19,128,130,116,97,90)+1037..toString(36).toLowerCase()+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+381..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(6,156,171)+28..toString(36).toLowerCase()];static u=i[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(3,166,150,151,142)+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+13746..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-41-s)})).join("")}(37,179)];static l=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(6,138,151,130,111,104)+29..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(61,181,171,159,147)+14..toString(36).toLowerCase()];static S=i[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-2-s)})).join("")}(59,172,164,162,156)+19202..toString(36).toLowerCase()+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-34-s)})).join("")}(22,153)+28310..toString(36).toLowerCase()];static p=()=>r.o().forEach((t=>r.S(t)));static getEntries=()=>r.o().reduce(((t,i)=>({...t,[i]:r.u(i)})),{})}class e{static#i=window[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+43581..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(32,166,146,175,178,177,164)+34790..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(56,211)+29..toString(36).toLowerCase()];static#s=(()=>{const t=11..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(59,198,194)+11..toString(36).toLowerCase(),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(15,116)+999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-2-s)})).join("")}(17,141,116)+11..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-6-s)})).join("")}(1,111,111,110,124)+27..toString(36).toLowerCase(),s=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-46-s)})).join("")}(8,160)+1032..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-60-s)})).join("")}(33,203),r=28..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-41-s)})).join("")}(9,165,166)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-19-s)})).join("")}(46,162)+22..toString(36).toLowerCase(),e=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-23-s)})).join("")}(3,146,127,138,126)+29039..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(35,209),n=29..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-15-s)})).join("")}(42,158)+1217..toString(36).toLowerCase(),h=30..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(18,160)+21..toString(36).toLowerCase(),a=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(19,171)+690396..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(45,161,155)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(24,181,143)+914..toString(36).toLowerCase(),o=27..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(60,173,175,163,183,165)+620546..toString(36).toLowerCase(),u=852..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(25,132,133)+12..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(7,157,159),c=24..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(26,165)+27..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(60,195,200,178,174,177)+2296106198159..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(63,170)+14..toString(36).toLowerCase(),l=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-7-s)})).join("")}(49,167,167)+13380..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(25,171,168),f=887..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(34,175)+999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-32-s)})).join("")}(63,206)+27..toString(36).toLowerCase(),d=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-20-s)})).join("")}(10,140,141,141)+874..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-26-s)})).join("")}(9,135),g=35506..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(45,157,194,172)+37973..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(28,187),S=531..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(30,186,188)+27..toString(36).toLowerCase(),E=986..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(30,181,181,181,183)+28..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-8-s)})).join("")}(24,133),p=1037..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-37-s)})).join("")}(31,185,165)+1108..toString(36).toLowerCase();return{m:()=>t,A:()=>i,_:()=>s,T:()=>r,C:()=>e,R:()=>n,N:()=>h,k:()=>a,M:()=>o,O:()=>u,P:()=>c,L:()=>l,$:()=>f,D:()=>d,I:()=>g,V:()=>S,H:()=>E,U:()=>p}})();static F=0;static G=1;static X=2;static Y=3;static B=4;static W=5;static j=6;static q=0;static K=1;static Z=2;static J=3;static tt=4;static it=5;static#r(t){switch(t){case this.G:return this.#s.m();case this.X:return this.#s.A();case this.Y:return this.#s._();case this.B:return this.#s.T();case this.W:return this.#s.C();case this.j:return this.#s.R();default:return null}}st;et=e.F;nt=!0;ht=!0;#e=e.q;#n;#h;get ot(){return this.#e}async ut(t=!1){switch(this.#e){case e.q:return await this.#a();case e.tt:case e.it:return t?await this.#a():this.#h;default:return await this.#n}}async#a(){let t;return this.#h=void 0,this.#e=e.q,this.#n=new Promise((i=>{try{t=e.#i({[e.#s.N()]:"function"==typeof this.st?this.st(this):this.st,[e.#s.k()]:e.#r(this.et),[e.#s.O()]:!this.nt,[e.#s.M()]:this.ht,[e.#s.P()]:t=>{this.#e=t[e.#s.I()]},[e.#s.L()]:t=>{this.#e=e.it;const s=new n;s.ct=!0,i(s)},[e.#s.$()]:t=>{const s=new n;s.errorText=t[e.#s.V()],i(s)},[e.#s.D()]:t=>{const s=new n;s.ft=t[e.#s.H()],s.dt=t[e.#s.U()],i(s)}})}catch(t){const s=new n;s.gt=t,i(s)}})),this.#n.abort=t.abort,this.#h=await this.#n,this.#h}St(){this.#n?.abort()}Et(){const t=new e;return t.st=this.st,t.et=this.et,t.nt=this.nt,t.ht=this.ht,t}}class n{dt=0;ft=null;ct=!1;errorText=null;gt=null;vt(){return this.errorText||this.gt}}function h(t){return null==t}const a=/Mobile|Android|webOS|iPhone|iPod|iPad|BlackBerry|Windows Phone|Windows Mobile|Opera Mini|WPDesktop|IEMobile|Fennec|Nokia/i;const o=new Error("Incorrect value type");function u(t){switch(typeof t){case"number":case"boolean":case"string":case"bigint":case"undefined":return t;case"object":if(null===t)return null;let i=Array.isArray(t)?[]:{};for(let s in t)t.hasOwnProperty(s)&&(i[s]=u(t[s]));return i;default:throw o}}function c(t,i){if(t===i)return!0;const s=typeof t;if(s!==typeof i)return!1;switch(s){case"number":case"boolean":case"string":case"bigint":case"undefined":return!1;case"object":if(null===t)return!1;let s=Array.isArray(t);if(s!==Array.isArray(i))return!1;if(s){if(t.length!==i.length)return!1}else if(Object.keys(t).length!==Object.keys(i).length)return!1;for(let s in t)if(t.hasOwnProperty(s)&&(!i.hasOwnProperty(s)||!c(t[s],i[s])))return!1;return!0;default:throw o}}function l(t,i,s){return Math.max(t,Math.min(i,s))}function f(t){return Math.abs(t-Math.floor(t))}function d(t){return t-Math.floor(t)}class g{#o={};#u;constructor(t){this.#u=t+"_",r.o().filter((i=>i.startsWith(t))).forEach((t=>this.#o[t.slice(this.#u.length)]=r.u(t,void 0)))}#c(t){return this.#u+t}yt(t){return this.#o.hasOwnProperty(t)}u(t){return u(this.#o[t])}l(t,i){c(this.#o[t],i)||(r.l(this.#c(t),i),this.#o[t]=u(i))}S(t){delete this.#o[t],r.S(this.#c(t))}p(){for(let t of Object.keys(this.#o))delete this.#o[t],r.S(this.#c(t))}}class S{At=new Set;_t=new Set}class E{#l=new Map;wt(t,...i){const s=this.#l.get(t);if(!s)return;const{At:r,_t:e}=s;r.forEach((t=>{try{t(...i)}catch(t){console.error(t)}})),e.forEach((t=>r.delete(t))),0===r.size?this.#l.delete(t):e.clear()}Tt(t){return 0!==this.#l.get(t)?.At.size??!1}Ct(t){return this.#l.get(t)?.At.size??0}bt(t,i){return this.#f(t,i,!1)}Rt(t,i){return this.#f(t,i,!0)}#f(t,i,s=!1){let r=this.#l.get(t);r||(r=new S,this.#l.set(t,r));const{At:e,_t:n}=r;return e.has(i)||(e.add(i),s&&n.add(i)),this.Nt.bind(this,t,i)}Nt(t,i){const s=this.#l.get(t);if(!s)return;const{At:r,_t:e}=s;r.delete(i),e.delete(i),0===r.length&&this.#l.delete(t)}xt(t){const i=this.#l.get(t);i&&(i.At.clear(),i._t.clear(),this.#l.delete(t))}}class p{kt;Mt;translations}class v{static#d=1;static#g=new Map;static#S;static{const i=()=>10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(39,161)+17..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-52-s)})).join("")}(27,147,157,163,157)+10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-62-s)})).join("")}(28,163)+1146..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(5,123),r=s.i(i()),e=new Map;for(let t of r){if(this.#g[t.name])continue;const i=new p;i.kt=t.name,i.Mt=t.langs,i.translations=t.translations,this.#g[i.kt]=i,i.Mt.filter((t=>!e.has(t))).forEach((t=>e.set(t,i)))}this.#S=Object.values(this.#g)[0];for(let i of t.navigator.languages)if(e.has(i)){this.#S=e.get(i);break}}#E=new E;#p;constructor(){this.#p=v.#S}get translations(){return[...Object.values(v.#g)]}get Ot(){return v.#S}get Pt(){return this.#p}set Pt(t){t instanceof p&&(t=t.kt);let i=v.#g[t]??v.#S;this.#p!==i&&(this.#p=i,this.#E.wt(v.#d,i))}Lt(t){return this.#p.translations[t]??t}$t(t){return this.#E.bt(v.#d,t)}}class y{Dt;It;Vt}class m{static#s=(()=>{const t=838..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-22-s)})).join("")}(11,142)+14..toString(36).toLowerCase(),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-46-s)})).join("")}(11,179,173)+25..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(33,161),s=30..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-42-s)})).join("")}(16,172)+21..toString(36).toLowerCase();return{Ht:t=>29945008..toString(36).toLowerCase()+10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+1147..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(51,200,146,215,208,198,212,205,205,192,206,192,205,206,186,204,190,201,189,186,128,200,177,193)+886..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(35,129,95,147,147,159,145,146,145,138,124,86)+24530..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-10-s)})).join("")}(36,95,162,154)+22..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(43,131,193,187,178)+t+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(47,155,159,151)+12..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(23,199,199,192,202)+28..toString(36).toLowerCase()+30..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(51,176,166)+24..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-24-s)})).join("")}(56,190),Ut:()=>t,zt:()=>i,Ft:()=>s}})();static Gt=1;static Xt=2;static#v(t,i){return t&&i&&t.Dt()===i.Dt()&&t.It()===i.It()&&t.Vt()===i.Vt()}#E=new E;#y=new e;#m;#A=()=>null;#_=[];#w=null;#T=null;constructor(t){this.#y.nt=!1,this.#y.ht=!0,this.#y.et=e.Y,this.#y.st=m.#s.Ht.bind(m,t),this.Yt()}get Bt(){return[...this.#_]}get Wt(){return this.#w}get jt(){return this.#T}set jt(t){t instanceof y&&(t=t.Dt()),t=this.#A(t)??this.#w,m.#v(this.#T,t)||(this.#T=t,this.#E.wt(m.Gt,t))}async Yt(t=!1){t&&0!==this.#_.length||(this.#m??=this.#C(),await this.#m)}async#C(){const t=await this.#y.ut(!0);if(!t.ft)return void(this.#m=void 0);const i={};for(let s of t.ft){if(i[s[m.#s.Ut()]])continue;const t=new y;t.Dt=()=>s[m.#s.Ut()],t.It=()=>s[m.#s.zt()],t.Vt=()=>s[m.#s.Ft()],i[t.Dt()]=t}this.#A=t=>i[t],this.#_=Object.values(i),this.#w=this.#_[0];const s=this.#T;this.#T=i[s?.Dt()]??this.#w,this.#E.wt(m.Xt,this.Bt),s&&!m.#v(s,this.#T)&&this.#E.wt(m.Gt,this.#T),this.#m=void 0}qt(t){return this.#E.bt(m.Gt,t)}Kt(t){return this.#E.bt(m.Xt,t)}}const A=(new DOMParser).parseFromString(s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-1-s)})).join("")}(26,113)+25..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-11-s)})).join("")}(35,115)+13..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+35..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")),"text/html").body.children;function _(t){if(t>A.length)throw new Error(`View with index ${t} not found`);return A.item(t).cloneNode(!0)}function w(t,i,s=0){return function(t,i){return[...t.querySelectorAll(i)]}(t,i)[s]}function T(t,i={},r=null,e=!1){if(e)return s.addElement(t,i,r);const n=document.createElement(t);if(i)for(let t of Object.keys(i))n.setAttribute(t,i[t]);return r&&r.insertAdjacentElement("beforeend",n),n}function C(t){const i=w(A.item(0),`svg[key="${t}"]`).cloneNode(!0);return i.removeAttribute("key"),i}class b{Qt;Zt;Jt;ti;ii}class R{si;ri;ei;ni;hi}class N{static#b=1;static#R=2;static#N=3;static#x=4;static#k=5;static#M=6;static#O=7;static#P=8;static#L=9;static#$=10;static ai=["dark","darkmini"];static oi=200;static ui=300;static ci=30;#E=new E;li=_(1);fi=new b;di=new R;gi=w(this.li,".movewin_main");Si=w(this.li,".movewin_footer");#D=[!1,!0];#I=[0,0];#V=[N.ui,N.ui];#H=!1;#U=!1;#z=!0;constructor(){this.fi.Qt=w(this.li,".movewin_resizers"),this.fi.Zt=w(this.li,".movewin_resizer-lt"),this.fi.Jt=w(this.li,".movewin_resizer-rt"),this.fi.ti=w(this.li,".movewin_resizer-lb"),this.fi.ii=w(this.li,".movewin_resizer-rb"),this.di.si=w(this.li,".movewin_header"),this.di.ri=w(this.li,".movewin_header-info"),this.di.ei=w(this.li,".movewin_header-status"),this.di.ni=w(this.li,".movewin_header-mover"),this.di.hi=w(this.li,".movewin_header-button_minimize")}get Ei(){return this.li.getAttribute("theme")}set Ei(t){N.ai.includes(t)||(t=N.ai[0]),this.li.setAttribute("theme",t),this.#E.wt(N.#b,t)}get status(){return this.di.ei.textContent}set status(t){this.di.ei.textContent!==t&&(this.di.ei.textContent=t,this.#E.wt(N.#R,t))}get pi(){return[...this.#D]}set pi([t,i]){if(!this.li.parentElement)return void(this.#D=[t,i]);if(this.#D[0]===t&&this.#D[1]===i)return;const s=this.li.getBoundingClientRect(),r=this.li.parentElement.getBoundingClientRect();let e=t?{v:"left",r:"right",vi:s.left-r.left}:{v:"right",r:"left",vi:r.right-s.right},n=i?{v:"top",r:"bottom",vi:s.top-r.top}:{v:"bottom",r:"top",vi:r.bottom-s.bottom};this.#D=[t,i],this.#I=[e.vi,n.vi],this.li.style[e.v]=this.#I[0]+"px",this.li.style[e.r]=null,this.li.style[n.v]=this.#I[1]+"px",this.li.style[n.r]=null,this.#E.wt(N.#N,...this.#D),this.#E.wt(N.#x,...this.#I)}get yi(){return[...this.#I]}get mi(){const t=this.li.getBoundingClientRect(),i=this.li.parentElement.getBoundingClientRect();return[this.#D[0]?t.left-i.left:i.right-t.right,this.#D[1]?t.top-i.top:i.bottom-t.bottom]}set yi([t,i]){if(!this.li.parentElement)return void(this.#I=[t,i]);if(this.#I[0]===t&&this.#I[1]===i)return;const s=this.li.getBoundingClientRect(),r=this.li.parentElement.getBoundingClientRect();this.#I[0]=l(0,t,r.width-s.width),this.#I[1]=l(0,i,r.height-s.height),this.li.style[this.#D[0]?"left":"right"]=this.#I[0]+"px",this.li.style[this.#D[1]?"top":"bottom"]=this.#I[1]+"px",this.#E.wt(N.#x,t,i)}get size(){return[...this.#V]}get Ai(){const t=this.li.getBoundingClientRect();return[t.width,t.height]}set size([t,i]){if(!this.li.parentElement)return void(this.#V=[t,i]);if(this.#V[0]===t&&this.#V[0]===i)return;const s=this.li.getBoundingClientRect(),r=this.li.parentElement.getBoundingClientRect();let e=this.#D[0]?r.right-s.left-(N.ci-Math.min(N.ci,s.left-r.left)):s.right-r.left-(N.ci-Math.min(N.ci,r.right-s.right)),n=this.#D[1]?r.bottom-s.top-(N.ci-Math.min(N.ci,s.top-r.top)):s.bottom-r.top-(N.ci-Math.min(N.ci,r.bottom-s.bottom));this.#V[0]=l(N.oi,t,e),this.#V[1]=l(N.oi,i,n),this.li.style.width=this.#V[0]+"px",this.li.style.height=this.#V[1]+"px",this.#E.wt(N.#M,...this.#V)}get _i(){return this.#H}get wi(){return this.di.ni.hidden}set _i(t){t!==this.#H&&(this.di.ni.hidden=t,this.#H=t,this.#E.wt(N.#P,t))}get Ti(){return this.#U}get Ci(){return this.fi.Qt.hidden}set Ti(t){t!==this.#U&&(this.fi.Qt.hidden=t,this.#U=t,this.#E.wt(N.#L,t))}get bi(){return this.#z}get Ri(){return"none"===this.Si.style.display}set bi(t){t!==this.#z&&(this.Si.style.display=t?"none":null,this.#z=t,this.#E.wt(N.#$,t))}Ni(i){const s=(()=>{let t=this.li.getBoundingClientRect(),s=this.li.parentElement.getBoundingClientRect(),r=s.width-t.width,e=s.height-t.height,n=this.#D[0]?{v:"left",f:t=>t-a}:{v:"right",f:t=>a-t},h=this.#D[1]?{v:"top",f:t=>t-o}:{v:"bottom",f:t=>o-t},a=i.clientX+s[n.v]-t[n.v],o=i.clientY+s[h.v]-t[h.v];return(t,i)=>{let s=l(0,n.f(t),r),a=l(0,h.f(i),e);this.li.style[n.v]=s+"px",this.li.style[h.v]=a+"px",this.#E.wt(N.#k,s,a)}})(),r=t=>s(t.pageX,t.pageY),e=()=>{let i=this.li.getBoundingClientRect(),s=this.li.parentElement.getBoundingClientRect();this.#D[0]?(this.#I[0]=i.left-s.left,this.li.style.left=this.#I[0]+"px"):(this.#I[0]=s.right-i.right,this.li.style.right=this.#I[0]+"px"),this.#D[1]?(this.#I[1]=i.top-s.top,this.li.style.top=this.#I[1]+"px"):(this.#I[1]=s.bottom-i.bottom,this.li.style.bottom=this.#I[1]+"px"),this.#E.wt(N.#x,...this.#I),t.document.removeEventListener("mousemove",r),t.document.removeEventListener("mouseup",e),t.document.removeEventListener("touchmove",n),t.document.removeEventListener("touchstart",h),t.document.removeEventListener("touchend",h),t.document.removeEventListener("touchcancel",h)},n=t=>r(t.touches[0]),h=t=>{1!==t.touches.length&&e()};t.document.addEventListener("mousemove",r),t.document.addEventListener("mouseup",e),t.document.addEventListener("touchmove",n),t.document.addEventListener("touchstart",h),t.document.addEventListener("touchend",h),t.document.addEventListener("touchcancel",h)}xi(i,s,r){const e=(()=>{let t=this.li.getBoundingClientRect(),e=this.li.parentElement.getBoundingClientRect();const n=(s,r,n,h,a)=>{if(s!==r){let i=r?t.left-e.left:e.right-t.right;return()=>i}let o=n,u=N.ci,c=0,f=t=>t;s?(o=n,u-=Math.min(N.ci,e[h]-t[h]),c=t[h]-e[n]-N.oi,f=t=>t-d):(o=h,u-=Math.min(N.ci,t[n]-e[n]),c=e[h]-t[n]-N.oi,f=t=>d-t);let d=i[a]+e[o]-t[o];return t=>{const i=l(u,f(t),c);return this.li.style[o]=i+"px",i}},h=(s,r,n,h,a)=>{let o=t[h],u=t=>t,c=0;return s?(o+=i[a],u=t=>o-t,c=t[n]-e[r]-(N.ci-Math.min(N.ci,e[n]-t[n]))):(o-=i[a],u=t=>o+t,c=e[n]-t[r]-(N.ci-Math.min(N.ci,t[r]-e[r]))),t=>{const i=l(N.oi,u(t),c);return this.li.style[h]=i+"px",i}};let a=n(s,this.#D[0],"left","right","clientX"),o=n(r,this.#D[1],"top","bottom","clientY"),u=h(s,"left","right","width","clientX"),c=h(r,"top","bottom","height","clientY");return(t,i)=>{this.#E.wt(N.#k,a(t),o(i)),this.#E.wt(N.#O,u(t),c(i))}})(),n=t=>e(t.pageX,t.pageY),h=()=>{let i=this.li.getBoundingClientRect(),s=this.li.parentElement.getBoundingClientRect();this.#D[0]?(this.#I[0]=i.left-s.left,this.li.style.left=this.#I[0]+"px"):(this.#I[0]=s.right-i.right,this.li.style.right=this.#I[0]+"px"),this.#D[1]?(this.#I[1]=i.top-s.top,this.li.style.top=this.#I[1]+"px"):(this.#I[1]=s.bottom-i.bottom,this.li.style.bottom=this.#I[1]+"px"),this.#V=[i.width,i.height],this.li.style.width=this.#V[0]+"px",this.li.style.height=this.#V[1]+"px",this.#E.wt(N.#x,...this.#I),this.#E.wt(N.#M,...this.#V),t.document.removeEventListener("mousemove",n),t.document.removeEventListener("mouseup",h),t.document.removeEventListener("touchmove",a),t.document.removeEventListener("touchstart",o),t.document.removeEventListener("touchend",o),t.document.removeEventListener("touchcancel",o)},a=t=>n(t.touches[0]),o=t=>{1!==t.touches.length&&h()};t.document.addEventListener("mousemove",n),t.document.addEventListener("mouseup",h),t.document.addEventListener("touchmove",a),t.document.addEventListener("touchstart",o),t.document.addEventListener("touchend",o),t.document.addEventListener("touchcancel",o)}#F(){const t=this.li.parentElement.getBoundingClientRect(),i=(i,s,r,e,n,h)=>{const a=Math.max(N.oi,t[h]-N.ci),o=a>r?r:a,u=l(0,a-o,s);return this.li.style[h]=o+"px",this.li.style[i?e:n]=u+"px",[u,o]},[s,r]=i(this.#D[0],this.#I[0],this.#V[0],"left","right","width"),[e,n]=i(this.#D[1],this.#I[1],this.#V[1],"top","bottom","height");this.#E.wt(N.#k,s,e),this.#E.wt(N.#O,r,n)}ki(t){return this.#E.bt(N.#b,t)}Mi(t){return this.#E.bt(N.#R,t)}Oi(t){return this.#E.bt(N.#N,t)}Pi(t){return this.#E.bt(N.#x,t)}Li(t){return this.#E.bt(N.#k,t)}$i(t){return this.#E.bt(N.#M,t)}Di(t){return this.#E.bt(N.#O,t)}Ii(t){return this.#E.bt(N.#P,t)}Vi(t){return this.#E.bt(N.#L,t)}Hi(t){return this.#E.bt(N.#$,t)}Ui(i,s){i.insertAdjacentElement("afterbegin",this.li),this.li.style.zIndex=s,this.Ei??=N.ai[0],this.li.style[this.#D[0]?"left":"right"]=this.#I[0]+"px",this.li.style[this.#D[1]?"top":"bottom"]=this.#I[1]+"px",this.li.style.width=this.#V[0]+"px",this.li.style.height=this.#V[1]+"px",this.di.ni.hidden=this.#H,this.fi.Qt.hidden=this.#U,this.Si.style.display=this.#z?"none":null,this.#F(),this.di.ni.addEventListener("mousedown",(t=>{t.preventDefault(),this.Ni(t)})),this.di.ni.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Ni(t.touches[0]))})),this.fi.Zt.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!0,!0)})),this.fi.Zt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!0,!0))})),this.fi.Jt.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!1,!0)})),this.fi.Jt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!1,!0))})),this.fi.ti.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!0,!1)})),this.fi.ti.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!0,!1))})),this.fi.ii.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!1,!1)})),this.fi.ii.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!1,!1))})),t.addEventListener("resize",this.#F.bind(this))}}const x="setting_";class k{zi;Fi;Gi;Xi;constructor(t){this.zi=t,this.Fi=_(7),this.Gi=w(this.Fi,".minimap-tab_settings_setting-name"),this.Xi=w(this.Fi,".minimap-tab_settings_setting-value")}Yi(t){this.Gi.textContent=t.Lt(`${x}${this.zi}`)}}class M extends k{Bi;Wi=new Map;ji;constructor(t,i,s){super(t),this.Bi=_(8),this.Xi.insertAdjacentElement("beforeend",this.Bi),this.ji=i;for(let[t,i]of Object.entries(s)){const s=document.createElement("option");s.value=t,s.textContent=t,this.Bi.insertAdjacentElement("beforeend",s),this.Wi.set(t,{qi:s,action:i})}this.Bi.value=Object.keys(s)[0],this.Bi.addEventListener("change",(()=>this.Ki(this.Bi.value,!0)))}Ki(t,i){let s=this.Wi.get(t);h(s)||(this.Bi.value=s.qi.value,i&&s.action())}Yi(t){if(super.Yi(t),this.ji)for(let{qi:i}of this.Wi.values())i.textContent=t.Lt(`${x}${this.zi}_${i.value}`)}}class O extends k{Qi;$input;Zi;#G;#X;constructor(t,i,s){super(t),this.Qi=_(9),this.Xi.insertAdjacentElement("beforeend",this.Qi),this.$input=w(this.Qi,"input"),this.Zi=w(this.Qi,"span"),this.#G=i,this.#X=s,this.$input.addEventListener("change",(()=>this.Ki(this.$input.checked,!0)))}Ki(t,i){this.$input.checked=t,i&&(t?this.#G():this.#X())}}class P{Ji;ts;ss;constructor(t){this.Ji=t,this.ts=_(6),this.ss=w(this.ts,"summary",0)}Yi(t){this.ss.textContent=t.Lt(`settingGroup_${this.Ji}`)}}class L{#Y;#B=new Map;#W=new Map;#j;constructor(t,i){this.#Y=t,this.#j=i,this.#Y.$t(this.#q.bind(this))}rs(t,i,s){if(this.#W.has(t))return null;const r=new M(t,i,s);return this.#W.set(t,r),r}es(t){const i=this.#W.get(t);return i instanceof M?i:null}ns(t,i,s){if(this.#W.has(t))return null;const r=new O(t,i,s);return this.#W.set(t,r),r}hs(t){const i=this.#W.get(t);return i instanceof O?i:null}os(t){this.#j.textContent="";for(let[i,s]of Object.entries(t)){const t=new P(i);this.#B.set(i,t),this.#j.insertAdjacentElement("beforeend",t.ts);for(let i of s){const s=this.#W.get(i);s&&t.ts.insertAdjacentElement("beforeend",s.Fi)}}this.#q()}#q(){for(let t of this.#B.values())t.Yi(this.#Y);for(let t of this.#W.values())t.Yi(this.#Y)}}class ${us;cs;ls;constructor(t,i,s){this.us=t,h(i)||(this.cs=_(i)),this.ls=_(4),this.ls.textContent=s}}class D extends ${fs;Qt;Zt;Jt;ti;ii;constructor(){super("main",2,"Minimap"),this.fs=w(this.cs,".minimap-tab_main_canvas"),this.Qt=w(this.cs,".minimap_inner_resizers"),this.Zt=w(this.Qt,".minimap_inner_resizer_lt"),this.Jt=w(this.Qt,".minimap_inner_resizer_rt"),this.ti=w(this.Qt,".minimap_inner_resizer_lb"),this.ii=w(this.Qt,".minimap_inner_resizer_rb")}}class I extends ${ds;constructor(){super("menu",3,"Menu"),this.cs.style.display="none",this.ds=w(this.cs,".minimap-tab_menu_buttons")}}class V extends ${ts;constructor(){super("settings",5,"Settings"),this.cs.style.display="none",this.ts=w(this.cs,".minimap-tab_settings_detail")}}class H extends ${ts;constructor(){super("artlist",11,"Art list"),this.cs.style.display="none",this.ts=w(this.cs,".minimap-tab_artlist_detail")}}class U extends ${constructor(){super("info",12,"Info"),this.cs.style.display="none"}}class z extends N{static#K=1;static#Q=5e3;#E=new E;#g;gs=new D;Ss=new I;Es=new V;ps=new H;vs=new U;ys=T("button");As=T("button");#Z=new Map;#J=this.gs;#tt=this.gs;#it;_s;constructor(t){super(),this.#g=t,this._s=new L(t,this.Es.ts),this.bi=!1,this.status=this.#g.Lt(`tab_${this.#tt.us}`),this.ys.insertAdjacentElement("afterbegin",C("menu")),this.di.ri.insertAdjacentElement("beforebegin",this.ys),this.As.style.display="none",this.As.insertAdjacentElement("afterbegin",C("close")),this.di.ri.insertAdjacentElement("afterend",this.As),this.#g.$t(this.#st.bind(this));let i=[this.gs,this.Es,this.ps,this.vs];this.gi.insertAdjacentElement("beforeend",this.Ss.cs),this.#Z.set(this.Ss.us,this.Ss);for(let t of i)this.gi.insertAdjacentElement("beforeend",t.cs),this.#Z.set(t.us,t),this.Ss.ds.insertAdjacentElement("beforeend",t.ls),t.ls.textContent=this.#g.Lt(`tab_${t.us}`),t.ls.addEventListener("click",(()=>this.ws(t,!1)));this.ys.addEventListener("click",(()=>{this.#tt===this.Ss?this.ws(this.#J,!1):this.ws(this.Ss,!1)})),this.As.addEventListener("click",(()=>this.ws(this.gs,!1))),this.li.addEventListener("mouseenter",(()=>clearTimeout(this.#it))),this.li.addEventListener("mouseleave",(()=>{this.#tt!==this.gs&&(clearTimeout(this.#it),this.#it=setTimeout((()=>this.ws(this.gs,!1)),z.#Q))})),this.Vi((t=>this.gs.Qt.hidden=t))}ws(t,i=!1){t instanceof $&&(t=t.us);let s=this.#Z.get(t)??this.gs;this.As.style.display=s===this.gs?"none":null,s.cs.style.display=null,this.#tt.cs.style.display="none",this.#J=this.#tt,this.#tt=s,this.status=this.#g.Lt(`tab_${s.us}`),this.#E.wt(z.#K,s),i&&this.#tt!==this.gs&&(clearTimeout(this.#it),this.#it=setTimeout((()=>this.ws(this.gs,!1)),z.#Q))}#st(){this.status=this.#g.Lt(`tab_${this.#tt.us}`);for(let t of this.#Z.values())t.ls.textContent=this.#g.Lt(`tab_${t.us}`)}get Ts(){return this.#tt}Cs(t){return this.#E.bt(z.#K,t)}Ui(t,i){super.Ui(t,i),this.gs.Zt.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!0,!0)})),this.gs.Zt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!0,!0))})),this.gs.Zt.addEventListener("dblclick",(t=>{t.preventDefault(),this.pi=[!0,!0],this.yi=[0,0]})),this.fi.Zt.addEventListener("dblclick",(t=>{t.preventDefault(),this.pi=[!0,!0],this.yi=[0,0]})),this.gs.Jt.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!1,!0)})),this.gs.Jt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!1,!0))})),this.gs.Jt.addEventListener("dblclick",(t=>{t.preventDefault(),this.pi=[!1,!0],this.yi=[0,0]})),this.fi.Jt.addEventListener("dblclick",(t=>{t.preventDefault(),this.pi=[!1,!0],this.yi=[0,0]})),this.gs.ti.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!0,!1)})),this.gs.ti.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!0,!1))})),this.gs.ti.addEventListener("dblclick",(t=>{t.preventDefault(),this.pi=[!0,!1],this.yi=[0,0]})),this.fi.ti.addEventListener("dblclick",(t=>{t.preventDefault(),this.pi=[!0,!1],this.yi=[0,0]})),this.gs.ii.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!1,!1)})),this.gs.ii.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!1,!1))})),this.gs.ii.addEventListener("dblclick",(t=>{t.preventDefault(),this.pi=[!1,!1],this.yi=[0,0]})),this.fi.ii.addEventListener("dblclick",(t=>{t.preventDefault(),this.pi=[!1,!1],this.yi=[0,0]}))}}class F{fs;constructor(){this.fs=_(13)}Ui(t,i=null){t.insertAdjacentElement("afterbegin",this.fs),this.fs.style.zIndex=i??"auto"}}class G{bs;Rs;Ns;xs;ks;Ms;translations;Bt;Os;Ps;constructor(t,i,r){this.bs=t,this.Rs=s.info.script.version,this.ks=new X,this.Ms=new g(i),this.Ns=!this.Ms.yt("version"),this.xs=this.Ns||!c(this.Ms.u("version"),this.bs),this.xs&&(this.Ms.p(),this.Ms.l("version",this.bs)),this.translations=new v,this.Bt=new m(r),this.Os=new z(this.translations),this.Ps=new F}bind(){this.translations.Pt=this.Ms.u("lang"),this.Ms.l("lang",this.translations.Pt.kt),this.translations.$t((t=>this.Ms.l("lang",t.kt)));const t=()=>19812..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-45-s)})).join("")}(50,208,201,211)+23..toString(36).toLowerCase();this.Bt.jt=this.Ms.u(t()),this.Ms.l(t(),this.Bt.jt.Dt()),this.Bt.qt((i=>this.Ms.l(t(),i.Dt()))),this.Os.Ei=this.Ms.u("theme")??N.ai[0],this.Os.pi=this.Ms.u("pos")??[!1,!0],this.Os.yi=this.Ms.u("xy")??[0,0],this.Os.size=this.Ms.u("size")??[N.ui,N.ui],this.Os._i=this.Ms.u("isHideMover")??!1,this.Os.Ti=this.Ms.u("isHideResizers")??!1}Ls(){s.h(s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(54,164)+375..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-5-s)})).join("")}(24,114,99,105))),this.Ns&&this.Os.ws(this.Os.vs,!1)}$s(){this.Os.ki((t=>this.Ms.l("theme",t))),this.Ms.l("theme",this.Os.Ei),this.Os.Oi(((t,i)=>this.Ms.l("pos",[t,i]))),this.Ms.l("pos",this.Os.pi),this.Os.Pi(((t,i)=>this.Ms.l("xy",[t,i]))),this.Ms.l("xy",this.Os.yi),this.Os.$i(((t,i)=>this.Ms.l("size",[t,i]))),this.Ms.l("size",this.Os.size),this.Os.Ii((t=>this.Ms.l("isHideMover",t))),this.Ms.l("isHideMover",this.Os._i),this.Os.Vi((t=>this.Ms.l("isHideResizers",t))),this.Ms.l("isHideResizers",this.Os.Ti)}Ds(){const t=this.Os._s.rs("lang",!0,this.translations.translations.reduce(((t,i)=>({...t,[i.kt]:()=>this.translations.Pt=i})),{}));t.Ki(this.translations.Pt.kt,!1),this.translations.$t((i=>t.Ki(i.kt,!1)));const i=this.Os._s.rs(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-37-s)})).join("")}(22,160,157,161)+38256..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(16,189),!1,this.Bt.Bt.reduce(((t,i)=>({...t,[i.Dt()]:()=>this.Bt.jt=i})),{}));i.Ki(this.Bt.jt.Dt(),!1),this.Bt.qt((t=>i.Ki(t.Dt(),!1)));const s=this.Os._s.rs("theme",!1,z.ai.reduce(((t,i)=>({...t,[i]:()=>this.Os.Ei=i})),{}));s.Ki(this.Os.Ei,!1),this.Os.ki((t=>s.Ki(t,!1)));const r=this.Os._s.rs("fixAngle",!0,{lt:()=>{this.Os.pi=[!0,!0],this.Os.yi=[0,0]},rt:()=>{this.Os.pi=[!1,!0],this.Os.yi=[0,0]},lb:()=>{this.Os.pi=[!0,!1],this.Os.yi=[0,0]},rb:()=>{this.Os.pi=[!1,!1],this.Os.yi=[0,0]}});r.Ki(`${this.Os.pi[0]?"l":"r"}${this.Os.pi[1]?"t":"b"}`,!1),this.Os.Oi(((t,i)=>r.Ki(`${t?"l":"r"}${i?"t":"b"}`,!1)));const e=this.Os._s.ns("lockMove",(()=>this.Os._i=!0),(()=>this.Os._i=!1));e.Ki(this.Os._i,!1),this.Os.Ii((t=>e.Ki(t,!1)));const n=this.Os._s.ns("lockSize",(()=>this.Os.Ti=!0),(()=>this.Os.Ti=!1));n.Ki(this.Os.Ti,!1),this.Os.Vi((t=>n.Ki(t,!1)))}}class X{Is;Vs;constructor(){this.Is=function(){const i=window.GM.info.userAgentData??t.navigator.userAgentData;if(i){if(!0===i.mobile)return!0;if(a.test(i.platform))return!0}return!!a.test(t.navigator.userAgent)}(),this.Vs=!1,t.document.addEventListener("touchstart",(()=>this.Vs=!0),{once:!0})}}const Y=256,B=768,W=([t,i])=>i<<8|t,j=([t,i],s)=>{const r=s>>1;return[t+r,i+r]},q=([t,i],s=256)=>i*s+t,K=([t,i])=>({Hs:Math.floor(t/Y),Us:Math.floor(i/Y),zs:t%Y,Fs:i%Y});class Q{static#rt=1;static#et=2;static#nt=3;static#E=new E;static#ht;static#at;static#ot(){this.#ht||(this.#ht=t.Function.prototype.apply,t.Function.prototype.apply=new Proxy(t.Function.prototype.apply,{apply(t,i,s){Q.#E.wt(Q.#rt,t,i,s);const r=Reflect.apply(t,i,s);return Q.#E.wt(Q.#et,t,i,s,r),r}}))}static#ut(){this.#at||(this.#at=t.WebSocket,t.WebSocket=new Proxy(t.WebSocket,{construct(t,i){const s=new t(...i);return Q.#E.wt(Q.#nt,s),s}}))}static Gs(t){return this.#ot(),this.#E.bt(this.#rt,t)}static Xs(t){return this.#ot(),this.#E.bt(this.#et,t)}static Ys(t){return this.#ut(),this.#E.bt(this.#nt,t)}}class Z{Bs;Ws;js;qs;Ks;Qs;Zs;get Js(){return this.js>>1}}class J{coords;tr;ir=!1;sr=!1}class tt{static#ct=1;static#lt=2;static#ft=3;static#nt=4;static#dt=5;static#gt=6;static#St=7;static#Et=8;static#pt=9;static#vt=160;static#yt=161;static#mt=162;static#At=163;static#_t=164;static#wt=193;static#Tt=!1;static#E;static#Ct;static#bt;static#Rt;static#Nt;static#xt;static#kt;static#Mt;static#Ot;static init(i){if(this.#Tt)return;this.#Tt=!0,this.#E=new E,this.#kt=new Map,this.#Ot=new Map,this.#Pt(),this.#Lt();const s=(new Map).set(0,[[202,227,255],[255,255,255],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128]]).set(1,[[49,46,47],[99,92,90],[49,46,47],[99,92,90],[129,119,107],[198,181,165],[255,237,212],[150,86,122],[202,112,145],[96,67,79],[136,79,94],[175,101,103],[195,124,107],[221,153,126],[233,181,140],[198,139,91],[140,89,74],[94,68,63],[225,173,86],[248,207,142],[239,220,118],[206,190,85],[157,159,55],[114,121,43],[81,94,46],[69,100,79],[80,134,87],[187,209,138],[91,84,108],[106,113,137],[122,148,156],[174,215,185]]).set(2,[[255,255,255],[255,255,255],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128],[49,46,47],[99,92,90],[129,119,107],[198,181,165],[255,237,212],[150,86,122],[202,112,145],[96,67,79],[136,79,94],[175,101,103],[195,124,107],[221,153,126],[233,181,140],[198,139,91],[140,89,74],[94,68,63],[225,173,86],[248,207,142],[239,220,118],[206,190,85],[157,159,55],[114,121,43],[81,94,46],[69,100,79],[80,134,87],[187,209,138],[91,84,108],[106,113,137],[122,148,156],[174,215,185]]).set(3,[[226,218,0],[33,28,15],[33,28,15],[37,32,20],[41,36,24],[44,39,27],[50,44,31],[60,53,40],[71,62,49],[82,72,57],[100,88,66],[115,101,74],[125,111,84],[139,125,98],[152,134,102],[164,141,106],[180,156,122],[189,165,131],[195,173,138],[205,186,148],[218,196,161],[230,206,172]]).set(5,[[38,38,38],[0,0,0],[128,128,128],[255,255,255],[153,98,61],[255,163,200],[207,115,230],[128,0,128],[229,0,0],[229,137,0],[229,229,0],[150,230,70],[0,190,0],[0,230,230],[0,136,204],[0,0,230]]).set(6,[[255,255,255],[228,228,228],[136,136,136],[34,34,34],[255,167,209],[229,0,0],[229,149,0],[160,106,66],[229,217,0],[148,224,68],[2,190,1],[0,211,221],[0,131,199],[0,0,234],[207,110,228],[130,0,128]]).set(7,[[0,0,0],[255,255,255],[0,0,0],[255,255,255]]).set(8,[[197,204,184],[111,103,118],[154,154,151],[139,85,128],[195,136,144],[165,147,165],[102,96,146],[154,79,80],[194,141,117],[124,161,192],[65,106,163],[141,98,104],[190,149,92],[104,172,169],[56,112,128],[110,105,98],[147,161,103],[110,170,120],[85,112,100],[157,159,127],[126,158,153],[93,104,114],[67,52,85],[0,0,0]]).set(10,[[5,31,57],[5,31,57],[74,36,128],[197,58,157],[255,142,128]]).set(11,[[255,255,255],[153,233,228],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128]]),r=this.rr("s/REC_ME",(t=>{r(),Object.entries(t.canvases).forEach((([t,r])=>{const e=new Z;e.Bs=parseInt(t),e.Ws=r.ident,e.js=r.size,e.qs=r.cli??0,e.Ks=r.v??!1,e.Qs=i&&s.has(e.Bs)?s.get(e.Bs):r.colors,e.Zs=r.colors.map((([t,i,s],r)=>{if(r<e.qs){let r=e.Qs.slice(e.qs).map(((t,i)=>[t,i])).filter((([[r,e,n]])=>t===r&&i===e&&s===n))[0];if(r)return r[1]+e.qs}return r})),this.#kt.set(e.Bs,e)}))})),e=this.er("s/REC_ME",(()=>{e();const t=this.nr.canvas.view;this.#xt=[t[0],t[1]],this.#Nt=t[2]})),n=/pixelplanet\.fun\/chunks\/(?<c>\d+)\/(?<x>\d+)\/(?<y>\d+).bmp/;t.Response.prototype.arrayBuffer=new Proxy(t.Response.prototype.arrayBuffer,{async apply(t,i,s){const r=await t.apply(i,s);if(n.test(i.url)){const t=i.url.match(n).groups;if(tt.#Mt&&(tt.#Mt.Ks||tt.#Mt.Bs!==parseInt(t.c)))return r;const s=parseInt(t.x),e=parseInt(t.y);let h=tt.hr([s,e]);h||(h=new J,h.coords=[s,e],tt.#Ot.set(W(h.coords),h)),h.sr=!0,h.tr=new Uint8ClampedArray(65536),h.tr.set(new Uint8ClampedArray(r)),tt.#E.wt(tt.#dt,h)}return r}}),t.addEventListener("DOMContentLoaded",(()=>{t.pixelPlanetEvents.addListener("setscale",(t=>this.#Nt=t)),t.pixelPlanetEvents.addListener("setviewcoordinates",(t=>this.#xt=t))}))}static#Pt(){this.#bt=!0;let t=Q.Xs(((i,s,r,e)=>{"object"==typeof e&&e.dispatch&&e.getState&&(this.#Ct=e,this.#E.wt(this.#ct,this.#Ct),t(),t=Q.Gs(((i,s,r)=>{r[1].splice(2,0,(t=>i=>{if(this.#bt){let s=i.type;return this.#E.wt(`${this.#lt}_${s}`,i),t(i),void this.#E.wt(`${this.#ft}_${s}`,i)}t(i)})),t()})))}))}static#Lt(){Q.Ys((t=>{if(t.url.includes("pixelplanet")){this.#Rt=t;const i=t.send,s=this.#$t.bind(this),r=s=>{i.call(t,s),this.#Dt(s)},e=()=>{t.removeEventListener("message",s),t.send=i,t.removeEventListener("close",e),this.#Rt===t&&this.#Rt};t.send=r,t.addEventListener("message",s),t.addEventListener("close",e),this.#E.wt(this.#nt,t)}}))}static#$t(t){t.data instanceof ArrayBuffer&&this.#It(new Uint8ClampedArray(t.data))}static#It(t){switch(t[0]){case this.#wt:{const[i,s,r]=this.#Vt(t);let e=this.hr([i,s])?.tr;e&&(r.forEach((([t,i,s])=>e[q([t,i])]=s)),this.#E.wt(this.#pt,i,s,r));break}}}static#Vt(t){const i=t[1],s=t[2],r=[];let e=3;for(;++e<t.byteLength;){const i=t[e++],s=t[e++],n=t[e++];r.push([s,i,n])}return[i,s,r]}static#Dt(t){t instanceof ArrayBuffer&&this.#Ht(new Uint8Array(t))}static#Ht(t){switch(t[0]){case this.#vt:{const i=this.#Ut(t);if(this.#Mt&&this.#Ot.clear(),(this.#Mt?.Bs??-1)==i)return;this.#Mt=this.#kt.get(i),this.#E.wt(this.#Et,this.#Mt);break}case this.#yt:{if(this.#Mt.Ks)return;const i=this.#zt(t),s=this.#Ft(i);this.#E.wt(this.#gt,[s]);break}case this.#At:{if(this.#Mt.Ks)return;const i=this.#Gt(t),s=[];for(let t of i)s.push(this.#Ft(t));this.#E.wt(this.#gt,s);break}case this.#_t:{if(this.#Mt.Ks)return;const i=this.#Xt(t);for(let t of i)this.#Yt(t);this.#E.wt(this.#St,i);break}}}static#Ut(t){return t[1]}static#zt(t){return[t[1],t[2]]}static#Gt(t){let i=2,s=[];for(;i<t.length;){let r=t[i++];s.push([t[i++],r])}return s}static#Xt(t){let i=2,s=[];for(;i<t.length;){let r=t[i++];s.push([t[i++],r])}return s}static#Ft([t,i]){let s=this.hr([t,i]);return s||(s=new J,s.coords=[t,i],this.#Ot.set(W(s.coords),s)),s.ir=!0,s}static#Yt(t){this.#Ot.delete(W(t))}static get nr(){return this.#Ct.getState()}static ar(t,i=!1){this.#bt=i,this.#Ct.dispatch(t),this.#bt=!0}static get currentView(){return u(this.#xt)}static get currentScale(){return this.#Nt}static get ur(){return u(this.nr.canvas.hover)}static hr(t){return this.#Ot.get(W(t))}static cr(){return[...this.#Ot.values()]}static get lr(){return this.#Mt}static get dr(){return this.#Rt}static get lr(){return this.#Mt}static gr(t){return this.#E.Rt(this.#ct,t)}static rr(t,i){return this.#E.bt(`${this.#lt}_${t}`,i)}static er(t,i){return this.#E.bt(`${this.#ft}_${t}`,i)}static Ys(t){return this.#E.bt(this.#nt,t)}static Sr(t){return this.#E.bt(this.#pt,t)}static Er(t){return this.#E.bt(this.#Et,t)}static pr(t){return this.#E.bt(this.#dt,t)}static vr(t){return this.#E.bt(this.#gt,t)}static yr(t){return this.#E.bt(this.#St,t)}}class it{jt;lr;mr=new Map;Ar=new Map}class st{_r;wr;Tr;Cr;br;Rr;mr=[];Nr=!1;kr=!1;Mr=!1;Or=!1;Pr=!1}class rt{yi;_r;Lr;$r;Dr;Ir;Nr=!1;Vr=!1;Hr}class et{static#Bt=1;static#Wt=2;static#jt=(()=>{const t=838..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-24-s)})).join("")}(53,179,186),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(31,167),s=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-14-s)})).join("")}(4,139),r=32..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(54,184,188)+1061..toString(36).toLowerCase(),e=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-6-s)})).join("")}(50,158,160)+23921..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(20,184),n=36804..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-33-s)})).join("")}(28,177)+32104..toString(36).toLowerCase();return{Ur:t=>(t=>t.jt.Vt()+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-11-s)})).join("")}(0,126,122,113,127)+766..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-47-s)})).join("")}(24,188,173,187)+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+t.lr.Ws+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(33,184,123)+1032..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-14-s)})).join("")}(57,181))(t),Ut:()=>t,zr:()=>i,Fr:()=>s,Gr:()=>r,Xr:()=>e,Yr:()=>n,Br:(t,i)=>((t,i)=>t.jt.Vt()+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+t.lr.Ws+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(3,90)+i.Dr)(t,i)}})();static#qt=URL.createObjectURL(new Blob([s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(3,110,119,118)+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+708..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+11..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+39871..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(43,171,173)+922246..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join(""))],{type:"application/javascript"}));#E=new E;#_;#Kt;#Qt=!1;#Zt=!1;#Jt=4;#ti=new Map;#ii=[];#si=1;constructor(t){this.#_=t}Wr(){if(this.#_.jt&&tt.lr&&(!this.#Kt||!this.#Qt||this.#Kt.lr!==tt.lr||this.#Kt.jt!==this.#_.jt)){for(let[t]of this.#ti.values())t.terminate();this.#ti.clear(),this.#ii=[],this.#Kt=new it,this.#Kt.lr=tt.lr,this.#Kt.jt=this.#_.jt,tt.lr.Ks||this.#ri(this.#Kt)}}async#ri(t){const i=new e;i.st=et.#jt.Ur.bind(et,t),i.et=e.Y,i.nt=this.#Qt,i.ht=this.#Qt;const s=await i.ut();if(!s.vt()&&404!==s.dt&&s.ft){for(let[i,r]of Object.entries(s.ft)){const s=new rt;t.mr.set(i,s),s.$r=i,s.Dr=r[et.#jt.Ut()],s.yi=[r[et.#jt.zr()],r[et.#jt.Fr()]],s._r=j(s.yi,t.lr.js),s.Lr=[r[et.#jt.Gr()],r[et.#jt.Xr()]],s.Ir=r[et.#jt.Yr()],s.Nr=!1,s.Vr=!1;let e=s._r[0]>>8,n=s._r[1]>>8,h=s._r[0]+s.Lr[0]-1>>8,a=s._r[1]+s.Lr[1]-1>>8;for(let i=e;i<=h;++i)for(let r=n;r<=a;++r){const e=W([i,r]);let n=t.Ar.get(e);n||(n=new st,n._r=[i,r],t.Ar.set(e,n)),n.mr.push(s)}}if(t===this.#Kt)if(this.#Zt)this.#ei(t);else for(let i of tt.cr())this.#ni(t,W(i.coords))}}#ei(t){if(t&&0!==t.mr.size){for(let i of t.mr.values())i.Nr||this.#hi(t,i);for(let i of t.Ar.values())i.Nr=!0}}#ni(t,i){const s=t?.Ar.get(i);if(s&&!s.Nr){s.Nr=!0;for(let i of s.mr)i.Nr||this.#hi(t,i)}}async#hi(t,i){if(!t)return;i.Nr=!0;const s=new e;s.st=et.#jt.Br.bind(et,t,i),s.et=e.G,s.nt=this.#Qt,s.ht=this.#Qt;const r=await s.ut();!r.vt()&&404!==r.dt&&r.ft&&(i.Hr=await createImageBitmap(r.ft),i.Vr=!0)}get nt(){return this.#Qt}set nt(t){this.#Qt!==t&&(this.#Qt=t,this.#E.wt(et.#Bt,this.#Qt))}get jr(){return this.#Zt}set jr(t){this.#Zt!==t&&(this.#Zt=t,this.#E.wt(et.#Wt,this.#Zt),this.#Zt&&this.#ei(this.#Kt))}get qr(){return this.#Kt}Kr(t,i){const s=this.#ai(W(t),i);switch(i){case 1:return s?.wr;case 2:return s?.Tr;case 4:return s?.Cr;default:return null}}Qr(t){const{Hs:i,Us:s,zs:r,Fs:e}=K(t),n=this.#ai(W([i,s]),1);if(!n||!n.kr)return;const h=q([r,e]);return n.br[h]?n.Rr[h]:null}set Zr(t){this.#si=t}#ai(t,i){const s=this.#Kt.Ar.get(t);if(!s||s.Pr)return s;switch(i){case 1:if(s.kr||!s.mr.every((t=>t.Vr)))return s;break;case 2:if(s.Or)return s;break;case 4:if(s.Mr)return s;break;default:return null}return s.Pr=!0,this.#ii.push(s),s}Jr(){if(this.#Kt&&0!==this.#ii.length&&!(this.#ti.size>=this.#Jt))for(;0!==this.#ii.length&&this.#ti.size<this.#Jt;)this.#oi()}#oi(){this.#ui(this.#Kt,this.#ii.pop())}#ui(t,i){if(!i)return;let s=0;if(1&this.#si&&!i.kr&&(s|=1),2&this.#si&&!i.Or&&(s|=2),4&this.#si&&!i.Mr&&(s|=4),0===s)return void(i.Pr=!1);const r=tt.hr(i._r);if(!(i.Or||r&&r.sr))return void(i.Pr=!1);if(!i.kr){if(!i.mr.every((t=>t.Vr)))return void(i.Pr=!1);i.wr=T("canvas",{width:Y,height:Y});const t=i.wr.getContext("2d");for(let s of i.mr)t.drawImage(s.Hr,s._r[0]-(i._r[0]<<8),s._r[1]-(i._r[1]<<8))}const e=new Array(7);i.kr?(e[0]=2,e[2]=i.br,e[3]=i.Rr):(e[0]=1,e[2]=i.wr.getContext("2d").getImageData(0,0,Y,Y).data,e[3]=null,i.wr=null),e[1]=s,e[4]=2&s?r.tr:null,e[5]=t.lr.Qs,e[6]=t.lr.qs;const n=W(i._r),h=new Worker(et.#qt),a=new Map;h.addEventListener("error",(t=>{console.log("Error",n,[this.#si,s],t)})),h.addEventListener("messageerror",(t=>{console.log("Error message",n,[this.#si,s],t)})),h.addEventListener("message",(s=>{const[r,e,o,u,c,l]=s.data;if(h.terminate(),this.#ti.delete(n),i.Pr=!1,r){if(e&&(i.br=e,i.Rr=o,i.wr=T("canvas",{width:Y,height:Y}),i.wr.getContext("2d").putImageData(new ImageData(u,Y,Y),0,0),i.kr=!0),c){for(let[s,r]of a.entries()){let e=s<<2;const[n,h,a,o]=this.#ci(i,s,t.lr.Zs[127&r]);c[e++]=n,c[e++]=h,c[e++]=a,c[e]=o}i.Tr=T("canvas",{width:Y,height:Y}),i.Tr.getContext("2d").putImageData(new ImageData(c,Y,Y),0,0),i.Or=!0}l&&(i.Cr=T("canvas",{width:B,height:B}),i.Cr.getContext("2d").putImageData(new ImageData(l,B,B),0,0),i.Mr=!0)}else t.Ar.delete(n)})),this.#ti.set(n,[h,i.Or?null:a]),h.postMessage(e)}#ci(t,i,s){if(t.br[i]){const r=t.Rr[i];return[...r===this.#Kt.lr.Zs[127&s]?function([t,i,s]){return[.2*t,.2*i,.2*s]}(this.#Kt.lr.Qs[r]):(this.#Kt.lr.Qs[r],[255,0,0]),255]}return[0,0,0,0]}te(t){return this.#E.bt(et.#Bt,t)}ie(t){return this.#E.bt(et.#Wt,t)}$s(){this.#_.qt(this.Wr.bind(this)),tt.Er(this.Wr.bind(this)),this.Wr(),tt.pr((t=>this.#ni(this.#Kt,W(t.coords)))),tt.yr((t=>t.forEach((t=>{const i=W(t),s=this.#Kt?.Ar.get(i);if(s){const t=this.#ti?.get(i);t&&(t[0].terminate(),this.#ti.delete(i)),s.Tr=null,s.Or=!1}})))),tt.Sr(((t,i,s)=>{const r=W([t,i]),e=this.#Kt?.Ar.get(r);if(!e)return;const n=this.#ti.get(r);if(e.Or||n&&null===n[1]){const t=e.Tr.getContext("2d");for(let[i,r,n]of s){n=this.#Kt.lr.Zs[127&n];const s=q([i,r]),h=new Uint8ClampedArray(this.#ci(e,s,n));t.putImageData(new ImageData(h,1,1),i,r)}}else if(n)for(let[t,i,r]of s){r=this.#Kt.lr.Zs[127&r];const s=q([t,i]);n[1].set(s,r)}}))}}class nt{static#li=1;static#fi=2;static#di=new KeyboardEvent("keydown",{key:"Shift",location:KeyboardEvent.DOM_KEY_LOCATION_LEFT});static#gi=new KeyboardEvent("keyup",{key:"Shift",location:KeyboardEvent.DOM_KEY_LOCATION_LEFT});#E=new E;#Si;#Ei=!0;#pi=!0;#vi=!1;constructor(i){this.#Si=i,t.document.addEventListener("keydown",(t=>{this.#Ei&&"INPUT"!==t.target.nodeName&&"TEXTAREA"!==t.target.nodeName&&("KeyZ"!==t.code||t.repeat||(this.#vi=!0,this.#yi(j(tt.ur,tt.lr.js))))})),document.addEventListener("keyup",(t=>{"KeyZ"===t.code&&(this.#vi=!1)}))}#yi([i,s]){const r=tt.nr,e=r.canvas.pencilMode;if(!this.#Ei||tt.lr.Ks||tt.currentScale<3||0!==e&&1!==e)return;const n=this.#Si.Qr([i,s]);if(Number.isInteger(n)){if(r.canvas.selectedColor!==n){const t=r.gui.mute;t||tt.ar({type:"s/TGL_MUTE"},!1),tt.ar({type:"SELECT_COLOR",color:n},!1),t||tt.ar({type:"s/TGL_MUTE"},!1)}this.#vi&&(t.document.dispatchEvent(nt.#di),t.document.dispatchEvent(nt.#gi))}}get se(){return this.#Ei}set se(t){this.#Ei!==t&&(this.#Ei=t,this.#E.wt(nt.#li,t))}get re(){return this.#pi}set re(t){this.#pi!==t&&(this.#pi=t,this.#E.wt(nt.#fi,t))}ee(t){return this.#E.bt(nt.#li,t)}ne(t){return this.#E.bt(nt.#fi,t)}$s(){let t;tt.er("SET_HOVER",(({hover:t})=>{this.#yi(j(t,tt.lr.js))})),tt.rr("REC_SET_PXLS",(()=>{this.#pi&&(t=tt.nr.gui.mute,t||tt.ar({type:"s/TGL_MUTE"},!0))})),tt.er("REC_SET_PXLS",(()=>{this.#pi&&(t||tt.ar({type:"s/TGL_MUTE"},!0))}))}}class ht{static#mi=1;static#Ai=2;static#_i=3;static#wi=4;#E=new E;#Ti=T("canvas");#Si;#Ci;#bi;#Ri=!1;#Ni=!1;#xi=!1;#ki=!0;#Mi=8;constructor(t,i,s){this.#Si=t,this.#Ci=i,this.#bi=s}#Oi(){const t=this.#Ci.gs.fs;let i=this.#Ci.gi.getBoundingClientRect();t.width=i.width,t.height=i.height;const s=this.#bi.fs;i=s.parentElement.getBoundingClientRect(),s.width=i.width,s.height=i.height;const r=this.#Si.qr;if(r?.lr.Ks??1)return;const e=tt.currentScale,n=t.getContext("2d"),h=s.getContext("2d");n.reset(),h.reset();const a=e<1;n.imageSmoothingEnabled=a,n.msImageSmoothingEnabled=a,n.webkitImageSmoothingEnabled=a,h.imageSmoothingEnabled=a,h.msImageSmoothingEnabled=a,h.webkitImageSmoothingEnabled=a,0===r.Ar.size||tt.nr.canvas.isHistoricalView||(this.#Ri?this.#Pi(h):this.#Ci.Ts===this.#Ci.gs&&(this.#Li(n),e>=3&&this.#$i(n,!1))),this.#Ni&&this.#$i(h,!0)}#Li(t){if(tt.currentScale<.5)return;const i=this.#xi?2:1;this.#Di(t,(t=>this.#Si.Kr(t,i)),tt.ur??tt.currentView,!1,Y)}#Pi(t){if(tt.currentScale<.5)return;const i=this.#ki&&tt.currentScale>=this.#Mi?4:this.#xi?2:1;this.#Di(t,(t=>this.#Si.Kr(t,i)),tt.currentView,!0,4===i?B:Y)}#Di(t,i,s,r,e){const n=this.#Si.qr.lr.js,h=tt.currentScale,{he:a,ae:o}=((t,i)=>{const[s,r]=j(t,i);return{Hs:Math.floor(s/Y),Us:Math.floor(r/Y),zs:s%Y,Fs:r%Y,he:s,ae:r}})([Math.floor(s[0]),Math.floor(s[1])],n),u=(t.canvas.width>>1)/h,c=(t.canvas.height>>1)/h,l=Math.max(Math.ceil(a-u-.5),0),d=Math.max(Math.ceil(o-c-.5),0),g=Math.min(Math.ceil(a+u+.5),n),S=Math.min(Math.ceil(o+c+.5),n),{Hs:E,Us:p}=K([l,d]),{Hs:v,Us:y}=K([g,S]),m=v-E+1,A=y-p+1,_=this.#Ti.getContext("2d");this.#Ti.width=m*e,this.#Ti.height=A*e,_.reset();for(let t=0;t<m;++t)for(let s=0;s<A;++s){const r=i([E+t,p+s]);r&&_.drawImage(r,t*e,s*e)}const w=e/Y,T=h/w;let C=u-.5-a+E*Y,b=c-.5-o+p*Y;r&&(C+=.5-f(s[0]),b+=.5-f(s[1])),t.scale(T,T),t.drawImage(this.#Ti,C*w,b*w)}#$i(t,i=!1){const s=tt.currentScale,r=tt.currentView,e=.3*s,n=.65-.5,[h,a]=i?[d(r[0]),d(r[1])]:[.5,.5],o=t.canvas.width>>1,u=t.canvas.height>>1;t.resetTransform(),t.lineWidth=e,t.strokeStyle="darkblue",t.strokeRect(o-s*(n+h),u-s*(n+a),s+e,s+e)}get oe(){return this.#Ri}set oe(t){this.#Ri!==t&&(this.#Ri=t,this.#E.wt(ht.#mi,this.#Ri))}get ue(){return this.#Ni}set ue(t){this.#Ni!==t&&(this.#Ni=t,this.#E.wt(ht.#Ai,this.#Ni))}get ce(){return this.#xi}set ce(t){this.#xi!==t&&(this.#xi=t,this.#Ii(),this.#E.wt(ht.#_i,this.#xi))}get le(){return this.#ki}set le(t){this.#ki!==t&&(this.#ki=t,this.#Ii(),this.#E.wt(ht.#wi,this.#ki))}fe(t){return this.#E.bt(ht.#mi,t)}de(t){return this.#E.bt(ht.#Ai,t)}ge(t){return this.#E.bt(ht.#_i,t)}Se(t){return this.#E.bt(ht.#wi,t)}#Ii(){let t=1;this.#Ri&&this.#ki&&tt.currentScale>=this.#Mi?t|=4:this.#xi&&(t|=2),this.#Si.Zr=t}$s(){const t=()=>{this.#Ii(),this.#Oi(),this.#Si.Jr(),window.requestAnimationFrame(t)};window.requestAnimationFrame(t)}}class at extends G{static#Vi=1;static#Hi=()=>function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-56-s)})).join("")}(17,185)+25..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(52,170);static#Ui=()=>1190930..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-52-s)})).join("")}(7,167)+1193999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-17-s)})).join("")}(30,164,148);Ee;pe;se;constructor(){super(at.#Vi,at.#Hi(),at.#Ui()),this.Ms.yt("hardcodeColors")||this.Ms.l("hardcodeColors",!1),tt.init(this.Ms.u("hardcodeColors")),this.Ee=new et(this.Bt),this.pe=new ht(this.Ee,this.Os,this.Ps),this.se=new nt(this.Ee),t.addEventListener("load",(async()=>{await this.Bt.Yt(!0),this.Bt.Bt[0]?.Dt()===function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-59-s)})).join("")}(20,156)+28..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-13-s)})).join("")}(56,149)+32..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")&&(this.bind(),this.Ls(),this.$s(),this.Ds())}),{once:!0})}bind(){super.bind(),this.Ee.nt=!!this.Ms.yt("useCache")&&this.Ms.u("useCache"),this.Ms.l("useCache",this.Ee.nt),this.Ee.te((t=>this.Ms.l("useCache",t))),this.Ee.jr=!!this.Ms.yt("loadAllTemplates")&&this.Ms.u("loadAllTemplates"),this.Ms.l("loadAllTemplates",this.Ee.jr),this.Ee.ie((t=>this.Ms.l("loadAllTemplates",t))),this.pe.oe=!!this.Ms.yt("overlay")&&this.Ms.u("overlay"),this.Ms.l("overlay",this.pe.oe),this.pe.fe((t=>this.Ms.l("overlay",t))),this.pe.ue=!!this.Ms.yt("overlayCenter")&&this.Ms.u("overlayCenter"),this.Ms.l("overlayCenter",this.pe.ue),this.pe.de((t=>this.Ms.l("overlayCenter",t))),this.pe.ce=!!this.Ms.yt("errorDetector")&&this.Ms.u("errorDetector"),this.Ms.l("errorDetector",this.pe.ce),this.pe.ge((t=>this.Ms.l("errorDetector",t))),this.pe.le=!!this.Ms.yt("minipixel")&&this.Ms.u("minipixel"),this.Ms.l("minipixel",this.pe.le),this.pe.Se((t=>this.Ms.l("minipixel",t))),this.se.se=!!this.Ms.yt("autoColorSelect")&&this.Ms.u("autoColorSelect"),this.Ms.l("autoColorSelect",this.se.se),this.se.ee((t=>this.Ms.l("autoColorSelect",t))),this.se.re=!this.Ms.yt("disablePlacedPixelSound")||this.Ms.u("disablePlacedPixelSound"),this.Ms.l("disablePlacedPixelSound",this.se.re),this.se.ne((t=>this.Ms.l("disablePlacedPixelSound",t)))}Ls(){super.Ls(),this.Os.Ui(t.document.body,2),this.Ps.Ui(t.document.body)}$s(){super.$s(),this.Ee.$s(),this.pe.$s(),this.se.$s()}Ds(){super.Ds();this.Os._s.ns("hardcodeColors",(()=>{this.Ms.l("hardcodeColors",!0),t.location.reload()}),(()=>{this.Ms.l("hardcodeColors",!1),t.location.reload()})).Ki(this.Ms.u("hardcodeColors"),!1);const i=this.Os._s.ns("useCache",(()=>this.Ee.nt=!0),(()=>this.Ee.nt=!1));i.Ki(this.Ms.u("useCache"),!1),this.Ee.te((t=>i.Ki(t,!1)));const s=this.Os._s.ns("loadAllTemplates",(()=>this.Ee.jr=!0),(()=>this.Ee.jr=!1));s.Ki(this.Ms.u("loadAllTemplates"),!1),this.Ee.ie((t=>s.Ki(t,!1)));const r=this.Os._s.ns("overlay",(()=>this.pe.oe=!0),(()=>this.pe.oe=!1));r.Ki(this.Ms.u("overlay"),!1),this.pe.fe((t=>r.Ki(t,!1)));const e=this.Os._s.ns("overlayCenter",(()=>this.pe.ue=!0),(()=>this.pe.ue=!1));e.Ki(this.Ms.u("overlayCenter"),!1),this.pe.de((t=>e.Ki(t,!1)));const n=this.Os._s.ns("errorDetector",(()=>this.pe.ce=!0),(()=>this.pe.ce=!1));n.Ki(this.Ms.u("errorDetector"),!1),this.pe.ge((t=>n.Ki(t,!1)));const h=this.Os._s.ns("minipixel",(()=>this.pe.le=!0),(()=>this.pe.le=!1));h.Ki(this.Ms.u("minipixel"),!1),this.pe.Se((t=>h.Ki(t,!1)));const a=this.Os._s.ns("autoColorSelect",(()=>this.se.se=!0),(()=>this.se.se=!1));a.Ki(this.Ms.u("autoColorSelect"),!1),this.se.ee((t=>a.Ki(t,!1)));const o=this.Os._s.ns("disablePlacedPixelSound",(()=>this.se.re=!0),(()=>this.se.re=!1));o.Ki(this.Ms.u("disablePlacedPixelSound"),!1),this.se.ne((t=>o.Ki(t,!1))),this.Os._s.os({minimap:["overlay","errorDetector","autoColorSelect","minipixel"],common:["lang",19812..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-49-s)})).join("")}(52,214,207,217)+23..toString(36).toLowerCase()],window:["theme","fixAngle","lockMove","lockSize"],extended:["useCache","loadAllTemplates","disablePlacedPixelSound","overlayCenter","hardcodeColors"]})}}(()=>{const i=[{ve:/(?<!git\.)(pixelplanet|fuckyouarkeros)\.fun((\/(#|$))|$)/,ye:at}];for(let{ve:s,ye:r}of i)if(s.test(t.location.href)){new r;break}})()})();