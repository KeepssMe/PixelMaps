// ==UserScript==
// @name Pixel Minimap (Test)
// @description OMG. I made a minimap. (At least I hope)
// @version 0.3.1.4
// @author KeepssMe | Thank you Sallbet for testing and listening to my whining
// @exclude *git.pixelplanet.fun/*
// @match *.pixelplanet.fun/*
// @match *pixelplanet.fun/*
// @match *fuckyouarkeros.fun/*
// @match *pixelzone.io/*
// @match *pixelcanvas.io/*
// @connect raw.githubusercontent.com
// @downloadURL https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/minimap.user.js
// @grant GM_getResourceText
// @grant GM_addStyle
// @grant GM_addElement
// @grant GM_listValues
// @grant GM_setValue
// @grant GM_getValue
// @grant GM_deleteValue
// @grant GM_xmlhttpRequest
// @iconURL https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/icons/icon-min.png
// @namespace https://github.com/KeepssMe/PixelMinimap
// @resource PPF_CHUNKCHECKER https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/ppf.chunkchecker.js
// @resource TRANSLATIONS https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/translations.json
// @resource STYLES https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/styles.css
// @resource VIEWS https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/views.html
// @run-at document-start
// @sandbox raw
// @updateURL https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/minimap.user.js
// ==/UserScript==

(()=>{const t=unsafeWindow,i=window;class s{static info=i.GM.info;static t=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-18-s)})).join("")}(33,148,129,122)+21269..toString(36).toLowerCase()+34..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+690366..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-8-s)})).join("")}(14,122,136)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(19,204,184,166)+29..toString(36).toLowerCase()];static i=t=>JSON.parse(s.t(t));static#t=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-1-s)})).join("")}(31,136,132,129,110,103)+13..toString(36).toLowerCase()+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+998726..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(53,192)+29..toString(36).toLowerCase()];static addElement(t,i={},s=null){return s?this.#t(s,t,i):this.#t(t,i)}static h=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(42,190,186,183,164,157)+13..toString(36).toLowerCase()+35..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+1078..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-20-s)})).join("")}(45,173)+14..toString(36).toLowerCase()]}class r{static o=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(19,128,130,116,97,90)+1037..toString(36).toLowerCase()+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+381..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(6,156,171)+28..toString(36).toLowerCase()];static u=i[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(3,166,150,151,142)+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+13746..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-41-s)})).join("")}(37,179)];static l=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(6,138,151,130,111,104)+29..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(61,181,171,159,147)+14..toString(36).toLowerCase()];static S=i[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-2-s)})).join("")}(59,172,164,162,156)+19202..toString(36).toLowerCase()+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-34-s)})).join("")}(22,153)+28310..toString(36).toLowerCase()];static p=()=>r.o().forEach((t=>r.S(t)));static getEntries=()=>r.o().reduce(((t,i)=>({...t,[i]:r.u(i)})),{})}class e{static#i=window[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+43581..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(32,166,146,175,178,177,164)+34790..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(56,211)+29..toString(36).toLowerCase()];static#s=(()=>{const t=11..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(59,198,194)+11..toString(36).toLowerCase(),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(15,116)+999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-2-s)})).join("")}(17,141,116)+11..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-6-s)})).join("")}(1,111,111,110,124)+27..toString(36).toLowerCase(),s=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-46-s)})).join("")}(8,160)+1032..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-60-s)})).join("")}(33,203),r=28..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-41-s)})).join("")}(9,165,166)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-19-s)})).join("")}(46,162)+22..toString(36).toLowerCase(),e=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-23-s)})).join("")}(3,146,127,138,126)+29039..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(35,209),n=29..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-15-s)})).join("")}(42,158)+1217..toString(36).toLowerCase(),h=30..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(18,160)+21..toString(36).toLowerCase(),a=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(19,171)+690396..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(45,161,155)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(24,181,143)+914..toString(36).toLowerCase(),o=27..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(60,173,175,163,183,165)+620546..toString(36).toLowerCase(),u=852..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(25,132,133)+12..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(7,157,159),c=24..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(26,165)+27..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(60,195,200,178,174,177)+2296106198159..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(63,170)+14..toString(36).toLowerCase(),l=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-7-s)})).join("")}(49,167,167)+13380..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(25,171,168),f=887..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(34,175)+999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-32-s)})).join("")}(63,206)+27..toString(36).toLowerCase(),d=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-20-s)})).join("")}(10,140,141,141)+874..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-26-s)})).join("")}(9,135),g=35506..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(45,157,194,172)+37973..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(28,187),S=531..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(30,186,188)+27..toString(36).toLowerCase(),E=986..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(30,181,181,181,183)+28..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-8-s)})).join("")}(24,133),p=1037..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-37-s)})).join("")}(31,185,165)+1108..toString(36).toLowerCase();return{A:()=>t,m:()=>i,_:()=>s,T:()=>r,C:()=>e,R:()=>n,N:()=>h,M:()=>a,k:()=>o,P:()=>u,O:()=>c,L:()=>l,D:()=>f,I:()=>d,$:()=>g,V:()=>S,H:()=>E,U:()=>p}})();static F=0;static G=1;static X=2;static Y=3;static B=4;static W=5;static j=6;static q=0;static K=1;static Z=2;static J=3;static tt=4;static it=5;static#r(t){switch(t){case this.G:return this.#s.A();case this.X:return this.#s.m();case this.Y:return this.#s._();case this.B:return this.#s.T();case this.W:return this.#s.C();case this.j:return this.#s.R();default:return null}}st;et=e.F;nt=!0;ht=!0;#e=e.q;#n;#h;get ot(){return this.#e}async ut(t=!1){switch(this.#e){case e.q:return await this.#a();case e.tt:case e.it:return t?await this.#a():this.#h;default:return await this.#n}}async#a(){let t;return this.#h=void 0,this.#e=e.q,this.#n=new Promise((i=>{try{t=e.#i({[e.#s.N()]:"function"==typeof this.st?this.st(this):this.st,[e.#s.M()]:e.#r(this.et),[e.#s.P()]:!this.nt,[e.#s.k()]:this.ht,[e.#s.O()]:t=>{this.#e=t[e.#s.$()]},[e.#s.L()]:t=>{this.#e=e.it;const s=new n;s.ct=!0,i(s)},[e.#s.D()]:t=>{const s=new n;s.errorText=t[e.#s.V()],i(s)},[e.#s.I()]:t=>{const s=new n;s.ft=t[e.#s.H()],s.dt=t[e.#s.U()],i(s)}})}catch(t){const s=new n;s.gt=t,i(s)}})),this.#n.abort=t.abort,this.#h=await this.#n,this.#h}St(){this.#n?.abort()}Et(){const t=new e;return t.st=this.st,t.et=this.et,t.nt=this.nt,t.ht=this.ht,t}}class n{dt=0;ft=null;ct=!1;errorText=null;gt=null;vt(){return this.errorText||this.gt}}function h(t){return null==t}const a=/Mobile|Android|webOS|iPhone|iPod|iPad|BlackBerry|Windows Phone|Windows Mobile|Opera Mini|WPDesktop|IEMobile|Fennec|Nokia/i;const o=new Error("Incorrect value type");function u(t){switch(typeof t){case"number":case"boolean":case"string":case"bigint":case"undefined":return t;case"object":if(null===t)return null;let i=Array.isArray(t)?[]:{};for(let s in t)t.hasOwnProperty(s)&&(i[s]=u(t[s]));return i;default:throw o}}function c(t,i){if(t===i)return!0;const s=typeof t;if(s!==typeof i)return!1;switch(s){case"number":case"boolean":case"string":case"bigint":case"undefined":return!1;case"object":if(null===t)return!1;let s=Array.isArray(t);if(s!==Array.isArray(i))return!1;if(s){if(t.length!==i.length)return!1}else if(Object.keys(t).length!==Object.keys(i).length)return!1;for(let s in t)if(t.hasOwnProperty(s)&&(!i.hasOwnProperty(s)||!c(t[s],i[s])))return!1;return!0;default:throw o}}function l(t,i,s){return Math.max(t,Math.min(i,s))}function f(t){return Math.abs(t-Math.floor(t))}function d(t){return t-Math.floor(t)}class g{#o={};#u;constructor(t){this.#u=t+"_",r.o().filter((i=>i.startsWith(t))).forEach((t=>this.#o[t.slice(this.#u.length)]=r.u(t,void 0)))}#c(t){return this.#u+t}yt(t){return this.#o.hasOwnProperty(t)}u(t){return u(this.#o[t])}l(t,i){c(this.#o[t],i)||(r.l(this.#c(t),i),this.#o[t]=u(i))}S(t){delete this.#o[t],r.S(this.#c(t))}p(){for(let t of Object.keys(this.#o))delete this.#o[t],r.S(this.#c(t))}}class S{At=new Set;_t=new Set}class E{#l=new Map;wt(t,...i){const s=this.#l.get(t);if(!s)return;const{At:r,_t:e}=s;r.forEach((t=>{try{t(...i)}catch(t){console.error(t)}})),e.forEach((t=>r.delete(t))),0===r.size?this.#l.delete(t):e.clear()}Tt(t){return 0!==this.#l.get(t)?.At.size??!1}Ct(t){return this.#l.get(t)?.At.size??0}bt(t,i){return this.#f(t,i,!1)}Rt(t,i){return this.#f(t,i,!0)}#f(t,i,s=!1){let r=this.#l.get(t);r||(r=new S,this.#l.set(t,r));const{At:e,_t:n}=r;return e.has(i)||(e.add(i),s&&n.add(i)),this.Nt.bind(this,t,i)}Nt(t,i){const s=this.#l.get(t);if(!s)return;const{At:r,_t:e}=s;r.delete(i),e.delete(i),0===r.length&&this.#l.delete(t)}xt(t){const i=this.#l.get(t);i&&(i.At.clear(),i._t.clear(),this.#l.delete(t))}}class p{Mt;kt;translations}class v{static#d=1;static#g=new Map;static#S;static{const i=()=>10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(39,161)+17..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-52-s)})).join("")}(27,147,157,163,157)+10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-62-s)})).join("")}(28,163)+1146..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(5,123),r=s.i(i()),e=new Map;for(let t of r){if(this.#g[t.name])continue;const i=new p;i.Mt=t.name,i.kt=t.langs,i.translations=t.translations,this.#g[i.Mt]=i,i.kt.filter((t=>!e.has(t))).forEach((t=>e.set(t,i)))}this.#S=Object.values(this.#g)[0];for(let i of t.navigator.languages)if(e.has(i)){this.#S=e.get(i);break}}#E=new E;#p;constructor(){this.#p=v.#S}get translations(){return[...Object.values(v.#g)]}get Pt(){return v.#S}get Ot(){return this.#p}set Ot(t){t instanceof p&&(t=t.Mt);let i=v.#g[t]??v.#S;this.#p!==i&&(this.#p=i,this.#E.wt(v.#d,i))}Lt(t){return this.#p.translations[t]??t}Dt(t){return this.#E.bt(v.#d,t)}}class y{It;$t;Vt}class A{static#s=(()=>{const t=838..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-22-s)})).join("")}(11,142)+14..toString(36).toLowerCase(),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-46-s)})).join("")}(11,179,173)+25..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(33,161),s=30..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-42-s)})).join("")}(16,172)+21..toString(36).toLowerCase();return{Ht:t=>29945008..toString(36).toLowerCase()+10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+1147..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(51,200,146,215,208,198,212,205,205,192,206,192,205,206,186,204,190,201,189,186,128,200,177,193)+886..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(35,129,95,147,147,159,145,146,145,138,124,86)+24530..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-10-s)})).join("")}(36,95,162,154)+22..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(43,131,193,187,178)+t+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(47,155,159,151)+12..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(23,199,199,192,202)+28..toString(36).toLowerCase()+30..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(51,176,166)+24..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-24-s)})).join("")}(56,190),Ut:()=>t,zt:()=>i,Ft:()=>s}})();static Gt=1;static Xt=2;static#v(t,i){return t&&i&&t.It()===i.It()&&t.$t()===i.$t()&&t.Vt()===i.Vt()}#E=new E;#y=new e;#A;#m=()=>null;#_=[];#w=null;#T=null;constructor(t){this.#y.nt=!1,this.#y.ht=!0,this.#y.et=e.Y,this.#y.st=A.#s.Ht.bind(A,t),this.Yt()}get Bt(){return[...this.#_]}get Wt(){return this.#w}get jt(){return this.#T}set jt(t){t instanceof y&&(t=t.It()),t=this.#m(t)??this.#w,A.#v(this.#T,t)||(this.#T=t,this.#E.wt(A.Gt,t))}async Yt(t=!1){t&&0!==this.#_.length||(this.#A??=this.#C(),await this.#A)}async#C(){const t=await this.#y.ut(!0);if(!t.ft)return void(this.#A=void 0);const i={};for(let s of t.ft){if(i[s[A.#s.Ut()]])continue;const t=new y;t.It=()=>s[A.#s.Ut()],t.$t=()=>s[A.#s.zt()],t.Vt=()=>s[A.#s.Ft()],i[t.It()]=t}this.#m=t=>i[t],this.#_=Object.values(i),this.#w=this.#_[0];const s=this.#T;this.#T=i[s?.It()]??this.#w,this.#E.wt(A.Xt,this.Bt),s&&!A.#v(s,this.#T)&&this.#E.wt(A.Gt,this.#T),this.#A=void 0}qt(t){return this.#E.bt(A.Gt,t)}Kt(t){return this.#E.bt(A.Xt,t)}}const m=(new DOMParser).parseFromString(s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-1-s)})).join("")}(26,113)+25..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-11-s)})).join("")}(35,115)+13..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+35..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")),"text/html").body.children;function _(t){if(t>m.length)throw new Error(`View with index ${t} not found`);return m.item(t).cloneNode(!0)}function w(t,i,s=0){return function(t,i){return[...t.querySelectorAll(i)]}(t,i)[s]}function T(t,i={},r=null,e=!1){if(e)return s.addElement(t,i,r);const n=document.createElement(t);if(i)for(let t of Object.keys(i))n.setAttribute(t,i[t]);return r&&r.insertAdjacentElement("beforeend",n),n}function C(t){const i=w(m.item(0),`svg[key="${t}"]`).cloneNode(!0);return i.removeAttribute("key"),i}class b{Qt;Zt;Jt;ti;ii}class R{si;ri;ei;ni;hi}class N{static#b=1;static#R=2;static#N=3;static#x=4;static#M=5;static#k=6;static#P=7;static#O=8;static#L=9;static#D=10;static ai=["dark","darkmini"];static oi=200;static ui=300;static ci=30;#E=new E;li=_(1);fi=new b;di=new R;gi=w(this.li,".movewin_main");Si=w(this.li,".movewin_footer");#I=[!1,!0];#$=[0,0];#V=[N.ui,N.ui];#H=!1;#U=!1;#z=!0;constructor(){this.fi.Qt=w(this.li,".movewin_resizers"),this.fi.Zt=w(this.li,".movewin_resizer-lt"),this.fi.Jt=w(this.li,".movewin_resizer-rt"),this.fi.ti=w(this.li,".movewin_resizer-lb"),this.fi.ii=w(this.li,".movewin_resizer-rb"),this.di.si=w(this.li,".movewin_header"),this.di.ri=w(this.li,".movewin_header-info"),this.di.ei=w(this.li,".movewin_header-status"),this.di.ni=w(this.li,".movewin_header-mover"),this.di.hi=w(this.li,".movewin_header-button_minimize")}get Ei(){return this.li.getAttribute("theme")}set Ei(t){N.ai.includes(t)||(t=N.ai[0]),this.li.setAttribute("theme",t),this.#E.wt(N.#b,t)}get status(){return this.di.ei.textContent}set status(t){this.di.ei.textContent!==t&&(this.di.ei.textContent=t,this.#E.wt(N.#R,t))}get pi(){return[...this.#I]}set pi([t,i]){if(!this.li.parentElement)return void(this.#I=[t,i]);if(this.#I[0]===t&&this.#I[1]===i)return;const s=this.li.getBoundingClientRect(),r=this.li.parentElement.getBoundingClientRect();let e=t?{v:"left",r:"right",vi:s.left-r.left}:{v:"right",r:"left",vi:r.right-s.right},n=i?{v:"top",r:"bottom",vi:s.top-r.top}:{v:"bottom",r:"top",vi:r.bottom-s.bottom};this.#I=[t,i],this.#$=[e.vi,n.vi],this.li.style[e.v]=this.#$[0]+"px",this.li.style[e.r]=null,this.li.style[n.v]=this.#$[1]+"px",this.li.style[n.r]=null,this.#E.wt(N.#N,...this.#I),this.#E.wt(N.#x,...this.#$)}get yi(){return[...this.#$]}get Ai(){const t=this.li.getBoundingClientRect(),i=this.li.parentElement.getBoundingClientRect();return[this.#I[0]?t.left-i.left:i.right-t.right,this.#I[1]?t.top-i.top:i.bottom-t.bottom]}set yi([t,i]){if(!this.li.parentElement)return void(this.#$=[t,i]);if(this.#$[0]===t&&this.#$[1]===i)return;const s=this.li.getBoundingClientRect(),r=this.li.parentElement.getBoundingClientRect();this.#$[0]=l(0,t,r.width-s.width),this.#$[1]=l(0,i,r.height-s.height),this.li.style[this.#I[0]?"left":"right"]=this.#$[0]+"px",this.li.style[this.#I[1]?"top":"bottom"]=this.#$[1]+"px",this.#E.wt(N.#x,t,i)}get size(){return[...this.#V]}get mi(){const t=this.li.getBoundingClientRect();return[t.width,t.height]}set size([t,i]){if(!this.li.parentElement)return void(this.#V=[t,i]);if(this.#V[0]===t&&this.#V[0]===i)return;const s=this.li.getBoundingClientRect(),r=this.li.parentElement.getBoundingClientRect();let e=this.#I[0]?r.right-s.left-(N.ci-Math.min(N.ci,s.left-r.left)):s.right-r.left-(N.ci-Math.min(N.ci,r.right-s.right)),n=this.#I[1]?r.bottom-s.top-(N.ci-Math.min(N.ci,s.top-r.top)):s.bottom-r.top-(N.ci-Math.min(N.ci,r.bottom-s.bottom));this.#V[0]=l(N.oi,t,e),this.#V[1]=l(N.oi,i,n),this.li.style.width=this.#V[0]+"px",this.li.style.height=this.#V[1]+"px",this.#E.wt(N.#k,...this.#V)}get _i(){return this.#H}get wi(){return this.di.ni.hidden}set _i(t){t!==this.#H&&(this.di.ni.hidden=t,this.#H=t,this.#E.wt(N.#O,t))}get Ti(){return this.#U}get Ci(){return this.fi.Qt.hidden}set Ti(t){t!==this.#U&&(this.fi.Qt.hidden=t,this.#U=t,this.#E.wt(N.#L,t))}get bi(){return this.#z}get Ri(){return"none"===this.Si.style.display}set bi(t){t!==this.#z&&(this.Si.style.display=t?"none":null,this.#z=t,this.#E.wt(N.#D,t))}Ni(i){const s=(()=>{let t=this.li.getBoundingClientRect(),s=this.li.parentElement.getBoundingClientRect(),r=s.width-t.width,e=s.height-t.height,n=this.#I[0]?{v:"left",f:t=>t-a}:{v:"right",f:t=>a-t},h=this.#I[1]?{v:"top",f:t=>t-o}:{v:"bottom",f:t=>o-t},a=i.clientX+s[n.v]-t[n.v],o=i.clientY+s[h.v]-t[h.v];return(t,i)=>{let s=l(0,n.f(t),r),a=l(0,h.f(i),e);this.li.style[n.v]=s+"px",this.li.style[h.v]=a+"px",this.#E.wt(N.#M,s,a)}})(),r=t=>s(t.pageX,t.pageY),e=()=>{let i=this.li.getBoundingClientRect(),s=this.li.parentElement.getBoundingClientRect();this.#I[0]?(this.#$[0]=i.left-s.left,this.li.style.left=this.#$[0]+"px"):(this.#$[0]=s.right-i.right,this.li.style.right=this.#$[0]+"px"),this.#I[1]?(this.#$[1]=i.top-s.top,this.li.style.top=this.#$[1]+"px"):(this.#$[1]=s.bottom-i.bottom,this.li.style.bottom=this.#$[1]+"px"),this.#E.wt(N.#x,...this.#$),t.document.removeEventListener("mousemove",r),t.document.removeEventListener("mouseup",e),t.document.removeEventListener("touchmove",n),t.document.removeEventListener("touchstart",h),t.document.removeEventListener("touchend",h),t.document.removeEventListener("touchcancel",h)},n=t=>r(t.touches[0]),h=t=>{1!==t.touches.length&&e()};t.document.addEventListener("mousemove",r),t.document.addEventListener("mouseup",e),t.document.addEventListener("touchmove",n),t.document.addEventListener("touchstart",h),t.document.addEventListener("touchend",h),t.document.addEventListener("touchcancel",h)}xi(i,s,r){const e=(()=>{let t=this.li.getBoundingClientRect(),e=this.li.parentElement.getBoundingClientRect();const n=(s,r,n,h,a)=>{if(s!==r){let i=r?t.left-e.left:e.right-t.right;return()=>i}let o=n,u=N.ci,c=0,f=t=>t;s?(o=n,u-=Math.min(N.ci,e[h]-t[h]),c=t[h]-e[n]-N.oi,f=t=>t-d):(o=h,u-=Math.min(N.ci,t[n]-e[n]),c=e[h]-t[n]-N.oi,f=t=>d-t);let d=i[a]+e[o]-t[o];return t=>{const i=l(u,f(t),c);return this.li.style[o]=i+"px",i}},h=(s,r,n,h,a)=>{let o=t[h],u=t=>t,c=0;return s?(o+=i[a],u=t=>o-t,c=t[n]-e[r]-(N.ci-Math.min(N.ci,e[n]-t[n]))):(o-=i[a],u=t=>o+t,c=e[n]-t[r]-(N.ci-Math.min(N.ci,t[r]-e[r]))),t=>{const i=l(N.oi,u(t),c);return this.li.style[h]=i+"px",i}};let a=n(s,this.#I[0],"left","right","clientX"),o=n(r,this.#I[1],"top","bottom","clientY"),u=h(s,"left","right","width","clientX"),c=h(r,"top","bottom","height","clientY");return(t,i)=>{this.#E.wt(N.#M,a(t),o(i)),this.#E.wt(N.#P,u(t),c(i))}})(),n=t=>e(t.pageX,t.pageY),h=()=>{let i=this.li.getBoundingClientRect(),s=this.li.parentElement.getBoundingClientRect();this.#I[0]?(this.#$[0]=i.left-s.left,this.li.style.left=this.#$[0]+"px"):(this.#$[0]=s.right-i.right,this.li.style.right=this.#$[0]+"px"),this.#I[1]?(this.#$[1]=i.top-s.top,this.li.style.top=this.#$[1]+"px"):(this.#$[1]=s.bottom-i.bottom,this.li.style.bottom=this.#$[1]+"px"),this.#V=[i.width,i.height],this.li.style.width=this.#V[0]+"px",this.li.style.height=this.#V[1]+"px",this.#E.wt(N.#x,...this.#$),this.#E.wt(N.#k,...this.#V),t.document.removeEventListener("mousemove",n),t.document.removeEventListener("mouseup",h),t.document.removeEventListener("touchmove",a),t.document.removeEventListener("touchstart",o),t.document.removeEventListener("touchend",o),t.document.removeEventListener("touchcancel",o)},a=t=>n(t.touches[0]),o=t=>{1!==t.touches.length&&h()};t.document.addEventListener("mousemove",n),t.document.addEventListener("mouseup",h),t.document.addEventListener("touchmove",a),t.document.addEventListener("touchstart",o),t.document.addEventListener("touchend",o),t.document.addEventListener("touchcancel",o)}#F(){const t=this.li.parentElement.getBoundingClientRect(),i=(i,s,r,e,n,h)=>{const a=Math.max(N.oi,t[h]-N.ci),o=a>r?r:a,u=l(0,a-o,s);return this.li.style[h]=o+"px",this.li.style[i?e:n]=u+"px",[u,o]},[s,r]=i(this.#I[0],this.#$[0],this.#V[0],"left","right","width"),[e,n]=i(this.#I[1],this.#$[1],this.#V[1],"top","bottom","height");this.#E.wt(N.#M,s,e),this.#E.wt(N.#P,r,n)}Mi(t){return this.#E.bt(N.#b,t)}ki(t){return this.#E.bt(N.#R,t)}Pi(t){return this.#E.bt(N.#N,t)}Oi(t){return this.#E.bt(N.#x,t)}Li(t){return this.#E.bt(N.#M,t)}Di(t){return this.#E.bt(N.#k,t)}Ii(t){return this.#E.bt(N.#P,t)}$i(t){return this.#E.bt(N.#O,t)}Vi(t){return this.#E.bt(N.#L,t)}Hi(t){return this.#E.bt(N.#D,t)}Ui(i,s){i.insertAdjacentElement("afterbegin",this.li),this.li.style.zIndex=s,this.Ei??=N.ai[0],this.li.style[this.#I[0]?"left":"right"]=this.#$[0]+"px",this.li.style[this.#I[1]?"top":"bottom"]=this.#$[1]+"px",this.li.style.width=this.#V[0]+"px",this.li.style.height=this.#V[1]+"px",this.di.ni.hidden=this.#H,this.fi.Qt.hidden=this.#U,this.Si.style.display=this.#z?"none":null,this.#F(),this.di.ni.addEventListener("mousedown",(t=>{t.preventDefault(),this.Ni(t)})),this.di.ni.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Ni(t.touches[0]))})),this.fi.Zt.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!0,!0)})),this.fi.Zt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!0,!0))})),this.fi.Jt.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!1,!0)})),this.fi.Jt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!1,!0))})),this.fi.ti.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!0,!1)})),this.fi.ti.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!0,!1))})),this.fi.ii.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!1,!1)})),this.fi.ii.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!1,!1))})),t.addEventListener("resize",this.#F.bind(this))}}const x="setting_";class M{zi;Fi;Gi;Xi;constructor(t){this.zi=t,this.Fi=_(7),this.Gi=w(this.Fi,".minimap-tab_settings_setting-name"),this.Xi=w(this.Fi,".minimap-tab_settings_setting-value")}Yi(t){this.Gi.textContent=t.Lt(`${x}${this.zi}`)}}class k extends M{Bi;Wi=new Map;ji;constructor(t,i,s){super(t),this.Bi=_(8),this.Xi.insertAdjacentElement("beforeend",this.Bi),this.ji=i;for(let[t,i]of Object.entries(s)){const s=document.createElement("option");s.value=t,s.textContent=t,this.Bi.insertAdjacentElement("beforeend",s),this.Wi.set(t,{qi:s,action:i})}this.Bi.value=Object.keys(s)[0],this.Bi.addEventListener("change",(()=>this.Ki(this.Bi.value,!0)))}Ki(t,i){let s=this.Wi.get(t);h(s)||(this.Bi.value=s.qi.value,i&&s.action())}Yi(t){if(super.Yi(t),this.ji)for(let{qi:i}of this.Wi.values())i.textContent=t.Lt(`${x}${this.zi}_${i.value}`)}}class P extends M{Qi;$input;Zi;#G;#X;constructor(t,i,s){super(t),this.Qi=_(9),this.Xi.insertAdjacentElement("beforeend",this.Qi),this.$input=w(this.Qi,"input"),this.Zi=w(this.Qi,"span"),this.#G=i,this.#X=s,this.$input.addEventListener("change",(()=>this.Ki(this.$input.checked,!0)))}Ki(t,i){this.$input.checked=t,i&&(t?this.#G():this.#X())}}class O{Ji;ts;ss;constructor(t){this.Ji=t,this.ts=_(6),this.ss=w(this.ts,"summary",0)}Yi(t){this.ss.textContent=t.Lt(`settingGroup_${this.Ji}`)}}class L{#Y;#B=new Map;#W=new Map;#j;constructor(t,i){this.#Y=t,this.#j=i,this.#Y.Dt(this.#q.bind(this))}rs(t,i,s){if(this.#W.has(t))return null;const r=new k(t,i,s);return this.#W.set(t,r),r}es(t){const i=this.#W.get(t);return i instanceof k?i:null}ns(t,i,s){if(this.#W.has(t))return null;const r=new P(t,i,s);return this.#W.set(t,r),r}hs(t){const i=this.#W.get(t);return i instanceof P?i:null}os(t){this.#j.textContent="";for(let[i,s]of Object.entries(t)){const t=new O(i);this.#B.set(i,t),this.#j.insertAdjacentElement("beforeend",t.ts);for(let i of s){const s=this.#W.get(i);s&&t.ts.insertAdjacentElement("beforeend",s.Fi)}}this.#q()}#q(){for(let t of this.#B.values())t.Yi(this.#Y);for(let t of this.#W.values())t.Yi(this.#Y)}}class D{us;cs;ls;constructor(t,i,s){this.us=t,h(i)||(this.cs=_(i)),this.ls=_(4),this.ls.textContent=s}}class I extends D{fs;Qt;Zt;Jt;ti;ii;constructor(){super("main",2,"Minimap"),this.fs=w(this.cs,".minimap-tab_main_canvas"),this.Qt=w(this.cs,".minimap_inner_resizers"),this.Zt=w(this.Qt,".minimap_inner_resizer_lt"),this.Jt=w(this.Qt,".minimap_inner_resizer_rt"),this.ti=w(this.Qt,".minimap_inner_resizer_lb"),this.ii=w(this.Qt,".minimap_inner_resizer_rb")}}class $ extends D{ds;constructor(){super("menu",3,"Menu"),this.cs.style.display="none",this.ds=w(this.cs,".minimap-tab_menu_buttons")}}class V extends D{ts;constructor(){super("settings",5,"Settings"),this.cs.style.display="none",this.ts=w(this.cs,".minimap-tab_settings_detail")}}class H extends D{ts;constructor(){super("artlist",11,"Art list"),this.cs.style.display="none",this.ts=w(this.cs,".minimap-tab_artlist_detail")}}class U extends D{constructor(){super("info",12,"Info"),this.cs.style.display="none"}}class z extends N{static#K=1;static#Q=5e3;#E=new E;#g;gs=new I;Ss=new $;Es=new V;ps=new H;vs=new U;ys=T("button");As=T("button");#Z=new Map;#J=this.gs;#tt=this.gs;#it;_s;constructor(t){super(),this.#g=t,this._s=new L(t,this.Es.ts),this.bi=!1,this.status=this.#g.Lt(`tab_${this.#tt.us}`),this.ys.insertAdjacentElement("afterbegin",C("menu")),this.di.ri.insertAdjacentElement("beforebegin",this.ys),this.As.style.display="none",this.As.insertAdjacentElement("afterbegin",C("close")),this.di.ri.insertAdjacentElement("afterend",this.As),this.#g.Dt(this.#st.bind(this));let i=[this.gs,this.Es,this.ps,this.vs];this.gi.insertAdjacentElement("beforeend",this.Ss.cs),this.#Z.set(this.Ss.us,this.Ss);for(let t of i)this.gi.insertAdjacentElement("beforeend",t.cs),this.#Z.set(t.us,t),this.Ss.ds.insertAdjacentElement("beforeend",t.ls),t.ls.textContent=this.#g.Lt(`tab_${t.us}`),t.ls.addEventListener("click",(()=>this.ws(t,!1)));this.ys.addEventListener("click",(()=>{this.#tt===this.Ss?this.ws(this.#J,!1):this.ws(this.Ss,!1)})),this.As.addEventListener("click",(()=>this.ws(this.gs,!1))),this.li.addEventListener("mouseenter",(()=>clearTimeout(this.#it))),this.li.addEventListener("mouseleave",(()=>{this.#tt!==this.gs&&(clearTimeout(this.#it),this.#it=setTimeout((()=>this.ws(this.gs,!1)),z.#Q))})),this.Vi((t=>this.gs.Qt.hidden=t))}ws(t,i=!1){t instanceof D&&(t=t.us);let s=this.#Z.get(t)??this.gs;this.As.style.display=s===this.gs?"none":null,s.cs.style.display=null,this.#tt.cs.style.display="none",this.#J=this.#tt,this.#tt=s,this.status=this.#g.Lt(`tab_${s.us}`),this.#E.wt(z.#K,s),i&&this.#tt!==this.gs&&(clearTimeout(this.#it),this.#it=setTimeout((()=>this.ws(this.gs,!1)),z.#Q))}#st(){this.status=this.#g.Lt(`tab_${this.#tt.us}`);for(let t of this.#Z.values())t.ls.textContent=this.#g.Lt(`tab_${t.us}`)}get Ts(){return this.#tt}Cs(t){return this.#E.bt(z.#K,t)}Ui(t,i){super.Ui(t,i),this.gs.Zt.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!0,!0)})),this.gs.Zt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!0,!0))})),this.gs.Zt.addEventListener("dblclick",(t=>{t.preventDefault(),this.pi=[!0,!0],this.yi=[0,0]})),this.fi.Zt.addEventListener("dblclick",(t=>{t.preventDefault(),this.pi=[!0,!0],this.yi=[0,0]})),this.gs.Jt.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!1,!0)})),this.gs.Jt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!1,!0))})),this.gs.Jt.addEventListener("dblclick",(t=>{t.preventDefault(),this.pi=[!1,!0],this.yi=[0,0]})),this.fi.Jt.addEventListener("dblclick",(t=>{t.preventDefault(),this.pi=[!1,!0],this.yi=[0,0]})),this.gs.ti.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!0,!1)})),this.gs.ti.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!0,!1))})),this.gs.ti.addEventListener("dblclick",(t=>{t.preventDefault(),this.pi=[!0,!1],this.yi=[0,0]})),this.fi.ti.addEventListener("dblclick",(t=>{t.preventDefault(),this.pi=[!0,!1],this.yi=[0,0]})),this.gs.ii.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!1,!1)})),this.gs.ii.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!1,!1))})),this.gs.ii.addEventListener("dblclick",(t=>{t.preventDefault(),this.pi=[!1,!1],this.yi=[0,0]})),this.fi.ii.addEventListener("dblclick",(t=>{t.preventDefault(),this.pi=[!1,!1],this.yi=[0,0]}))}}class F{fs;constructor(){this.fs=_(13)}Ui(t,i=null){t.insertAdjacentElement("afterbegin",this.fs),this.fs.style.zIndex=i??"auto"}}class G{bs;Rs;Ns;xs;Ms;ks;translations;Bt;Ps;Os;constructor(t,i,r){this.bs=t,this.Rs=s.info.script.version,this.Ms=new X,this.ks=new g(i),this.Ns=!this.ks.yt("version"),this.xs=this.Ns||!c(this.ks.u("version"),this.bs),this.xs&&(this.ks.p(),this.ks.l("version",this.bs)),this.translations=new v,this.Bt=new A(r),this.Ps=new z(this.translations),this.Os=new F}bind(){this.translations.Ot=this.ks.u("lang"),this.ks.l("lang",this.translations.Ot.Mt),this.translations.Dt((t=>this.ks.l("lang",t.Mt)));const t=()=>19812..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-45-s)})).join("")}(50,208,201,211)+23..toString(36).toLowerCase();this.Bt.jt=this.ks.u(t()),this.ks.l(t(),this.Bt.jt.It()),this.Bt.qt((i=>this.ks.l(t(),i.It()))),this.Ps.Ei=this.ks.u("theme")??N.ai[0],this.Ps.pi=this.ks.u("pos")??[!1,!0],this.Ps.yi=this.ks.u("xy")??[0,0],this.Ps.size=this.ks.u("size")??[N.ui,N.ui],this.Ps._i=this.ks.u("isHideMover")??!1,this.Ps.Ti=this.ks.u("isHideResizers")??!1}Ls(){s.h(s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(54,164)+375..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-5-s)})).join("")}(24,114,99,105))),this.Ns&&this.Ps.ws(this.Ps.vs,!1)}Ds(){this.Ps.Mi((t=>this.ks.l("theme",t))),this.ks.l("theme",this.Ps.Ei),this.Ps.Pi(((t,i)=>this.ks.l("pos",[t,i]))),this.ks.l("pos",this.Ps.pi),this.Ps.Oi(((t,i)=>this.ks.l("xy",[t,i]))),this.ks.l("xy",this.Ps.yi),this.Ps.Di(((t,i)=>this.ks.l("size",[t,i]))),this.ks.l("size",this.Ps.size),this.Ps.$i((t=>this.ks.l("isHideMover",t))),this.ks.l("isHideMover",this.Ps._i),this.Ps.Vi((t=>this.ks.l("isHideResizers",t))),this.ks.l("isHideResizers",this.Ps.Ti)}Is(){const t=this.Ps._s.rs("lang",!0,this.translations.translations.reduce(((t,i)=>({...t,[i.Mt]:()=>this.translations.Ot=i})),{}));t.Ki(this.translations.Ot.Mt,!1),this.translations.Dt((i=>t.Ki(i.Mt,!1)));const i=this.Ps._s.rs(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-37-s)})).join("")}(22,160,157,161)+38256..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(16,189),!1,this.Bt.Bt.reduce(((t,i)=>({...t,[i.It()]:()=>this.Bt.jt=i})),{}));i.Ki(this.Bt.jt.It(),!1),this.Bt.qt((t=>i.Ki(t.It(),!1)));const s=this.Ps._s.rs("theme",!1,z.ai.reduce(((t,i)=>({...t,[i]:()=>this.Ps.Ei=i})),{}));s.Ki(this.Ps.Ei,!1),this.Ps.Mi((t=>s.Ki(t,!1)));const r=this.Ps._s.rs("fixAngle",!0,{lt:()=>{this.Ps.pi=[!0,!0],this.Ps.yi=[0,0]},rt:()=>{this.Ps.pi=[!1,!0],this.Ps.yi=[0,0]},lb:()=>{this.Ps.pi=[!0,!1],this.Ps.yi=[0,0]},rb:()=>{this.Ps.pi=[!1,!1],this.Ps.yi=[0,0]}});r.Ki(`${this.Ps.pi[0]?"l":"r"}${this.Ps.pi[1]?"t":"b"}`,!1),this.Ps.Pi(((t,i)=>r.Ki(`${t?"l":"r"}${i?"t":"b"}`,!1)));const e=this.Ps._s.ns("lockMove",(()=>this.Ps._i=!0),(()=>this.Ps._i=!1));e.Ki(this.Ps._i,!1),this.Ps.$i((t=>e.Ki(t,!1)));const n=this.Ps._s.ns("lockSize",(()=>this.Ps.Ti=!0),(()=>this.Ps.Ti=!1));n.Ki(this.Ps.Ti,!1),this.Ps.Vi((t=>n.Ki(t,!1)))}}class X{$s;Vs;constructor(){this.$s=function(){const i=window.GM.info.userAgentData??t.navigator.userAgentData;if(i){if(!0===i.mobile)return!0;if(a.test(i.platform))return!0}return!!a.test(t.navigator.userAgent)}(),this.Vs=!1,t.document.addEventListener("touchstart",(()=>this.Vs=!0),{once:!0})}}const Y=256,B=768,W=([t,i])=>i<<8|t,j=([t,i],s)=>{const r=s>>1;return[t+r,i+r]},q=([t,i],s=256)=>i*s+t,K=([t,i])=>({Hs:Math.floor(t/Y),Us:Math.floor(i/Y),zs:t%Y,Fs:i%Y});class Q{static#rt=1;static#et=2;static#nt=3;static#ht=4;static#at=5;static#E=new E;static#ot;static#ut;static#ct;static#lt(){this.#ot||(this.#ot=t.Function.prototype.apply,t.Function.prototype.apply=new Proxy(t.Function.prototype.apply,{apply(t,i,s){Q.#E.wt(Q.#rt,t,i,s);const r=Reflect.apply(t,i,s);return Q.#E.wt(Q.#et,t,i,s,r),r}}))}static#ft(){this.#ut||(this.#ut=t.Node.prototype.appendChild,t.Node.prototype.appendChild=new Proxy(t.Node.prototype.appendChild,{apply(t,i,s){Q.#E.wt(Q.#nt,i,s[0]);const r=Reflect.apply(t,i,s);return Q.#E.wt(Q.#ht,i,s[0]),r}}))}static#dt(){this.#ct||(this.#ct=t.WebSocket,t.WebSocket=new Proxy(t.WebSocket,{construct(t,i){const s=new t(...i);return Q.#E.wt(Q.#at,s),s}}))}static Gs(t){return this.#lt(),this.#E.bt(this.#rt,t)}static Xs(t){return this.#lt(),this.#E.bt(this.#et,t)}static Ys(t){return this.#ft(),this.#E.bt(this.#nt,t)}static Bs(t){return this.#ft(),this.#E.bt(this.#ht,t)}static Ws(t){return this.#dt(),this.#E.bt(this.#at,t)}}class Z{js;qs;Ks;Qs;Zs;Js;tr;get ir(){return this.Ks>>1}}class J{coords;sr;rr=!1;er=!1}class tt{static#gt=1;static#St=2;static#Et=3;static#at=4;static#pt=5;static#vt=6;static#yt=7;static#At=8;static#mt=9;static#_t=10;static#wt=160;static#Tt=161;static#Ct=162;static#bt=163;static#Rt=164;static#Nt=193;static#xt=!1;static#E;static#Mt;static#kt;static#Pt;static#Ot;static#Lt;static#Dt;static#It;static#$t;static#Vt;static init(i){if(this.#xt)return;this.#xt=!0,this.#E=new E,this.#Dt=new Map,this.#$t=new Map,this.#Ht(),this.#Ut();const s=(new Map).set(0,[[202,227,255],[255,255,255],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128]]).set(1,[[49,46,47],[99,92,90],[49,46,47],[99,92,90],[129,119,107],[198,181,165],[255,237,212],[150,86,122],[202,112,145],[96,67,79],[136,79,94],[175,101,103],[195,124,107],[221,153,126],[233,181,140],[198,139,91],[140,89,74],[94,68,63],[225,173,86],[248,207,142],[239,220,118],[206,190,85],[157,159,55],[114,121,43],[81,94,46],[69,100,79],[80,134,87],[187,209,138],[91,84,108],[106,113,137],[122,148,156],[174,215,185]]).set(2,[[255,255,255],[255,255,255],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128],[49,46,47],[99,92,90],[129,119,107],[198,181,165],[255,237,212],[150,86,122],[202,112,145],[96,67,79],[136,79,94],[175,101,103],[195,124,107],[221,153,126],[233,181,140],[198,139,91],[140,89,74],[94,68,63],[225,173,86],[248,207,142],[239,220,118],[206,190,85],[157,159,55],[114,121,43],[81,94,46],[69,100,79],[80,134,87],[187,209,138],[91,84,108],[106,113,137],[122,148,156],[174,215,185]]).set(3,[[226,218,0],[33,28,15],[33,28,15],[37,32,20],[41,36,24],[44,39,27],[50,44,31],[60,53,40],[71,62,49],[82,72,57],[100,88,66],[115,101,74],[125,111,84],[139,125,98],[152,134,102],[164,141,106],[180,156,122],[189,165,131],[195,173,138],[205,186,148],[218,196,161],[230,206,172]]).set(5,[[38,38,38],[0,0,0],[128,128,128],[255,255,255],[153,98,61],[255,163,200],[207,115,230],[128,0,128],[229,0,0],[229,137,0],[229,229,0],[150,230,70],[0,190,0],[0,230,230],[0,136,204],[0,0,230]]).set(6,[[255,255,255],[228,228,228],[136,136,136],[34,34,34],[255,167,209],[229,0,0],[229,149,0],[160,106,66],[229,217,0],[148,224,68],[2,190,1],[0,211,221],[0,131,199],[0,0,234],[207,110,228],[130,0,128]]).set(7,[[0,0,0],[255,255,255],[0,0,0],[255,255,255]]).set(8,[[197,204,184],[111,103,118],[154,154,151],[139,85,128],[195,136,144],[165,147,165],[102,96,146],[154,79,80],[194,141,117],[124,161,192],[65,106,163],[141,98,104],[190,149,92],[104,172,169],[56,112,128],[110,105,98],[147,161,103],[110,170,120],[85,112,100],[157,159,127],[126,158,153],[93,104,114],[67,52,85],[0,0,0]]).set(10,[[5,31,57],[5,31,57],[74,36,128],[197,58,157],[255,142,128]]).set(11,[[255,255,255],[153,233,228],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128]]),r=this.nr("s/REC_ME",(t=>{r(),Object.entries(t.canvases).forEach((([t,r])=>{const e=new Z;e.js=parseInt(t),e.qs=r.ident,e.Ks=r.size,e.Qs=r.cli??0,e.Zs=r.v??!1,e.Js=i&&s.has(e.js)?s.get(e.js):r.colors,e.tr=r.colors.map((([t,i,s],r)=>{if(r<e.Qs){let r=e.Js.slice(e.Qs).map(((t,i)=>[t,i])).filter((([[r,e,n]])=>t===r&&i===e&&s===n))[0];if(r)return r[1]+e.Qs}return r})),this.#Dt.set(e.js,e)}))})),e=this.hr("s/REC_ME",(()=>{e();const t=this.ar.canvas.view;this.#Lt=[t[0],t[1]],this.#Ot=t[2]})),n=/pixelplanet\.fun\/chunks\/(?<c>\d+)\/(?<x>\d+)\/(?<y>\d+).bmp/;t.Response.prototype.arrayBuffer=new Proxy(t.Response.prototype.arrayBuffer,{async apply(t,i,s){const r=await t.apply(i,s);if(n.test(i.url)){const t=i.url.match(n).groups;if(tt.#It&&(tt.#It.Zs||tt.#It.js!==parseInt(t.c)))return r;const s=parseInt(t.x),e=parseInt(t.y);let h=tt.ur([s,e]);h||(h=new J,h.coords=[s,e],tt.#$t.set(W(h.coords),h)),h.er=!0,h.sr=new Uint8ClampedArray(65536),h.sr.set(new Uint8ClampedArray(r)),tt.#E.wt(tt.#pt,h)}return r}}),Q.Bs(((i,s)=>{if(i!==t.document.body||!s.classList.contains("viewport"))return;const r=this.#Vt;this.#Vt=s,this.#E.wt(tt.#_t,r,this.#Vt)})),t.addEventListener("DOMContentLoaded",(()=>{t.pixelPlanetEvents.addListener("setscale",(t=>this.#Ot=t)),t.pixelPlanetEvents.addListener("setviewcoordinates",(t=>this.#Lt=t))}))}static#Ht(){this.#kt=!0;let t=Q.Xs(((i,s,r,e)=>{"object"==typeof e&&e.dispatch&&e.getState&&(this.#Mt=e,this.#E.wt(this.#gt,this.#Mt),t(),t=Q.Gs(((i,s,r)=>{r[1].splice(2,0,(t=>i=>{if(this.#kt){let s=i.type;return this.#E.wt(`${this.#St}_${s}`,i),t(i),void this.#E.wt(`${this.#Et}_${s}`,i)}t(i)})),t()})))}))}static#Ut(){Q.Ws((t=>{if(t.url.includes("pixelplanet")){this.#Pt=t;const i=t.send,s=this.#zt.bind(this),r=s=>{i.call(t,s),this.#Ft(s)},e=()=>{t.removeEventListener("message",s),t.send=i,t.removeEventListener("close",e),this.#Pt===t&&this.#Pt};t.send=r,t.addEventListener("message",s),t.addEventListener("close",e),this.#E.wt(this.#at,t)}}))}static#zt(t){t.data instanceof ArrayBuffer&&this.#Gt(new Uint8ClampedArray(t.data))}static#Gt(t){switch(t[0]){case this.#Nt:{const[i,s,r]=this.#Xt(t);let e=this.ur([i,s])?.sr;e&&(r.forEach((([t,i,s])=>e[q([t,i])]=s)),this.#E.wt(this.#mt,i,s,r));break}}}static#Xt(t){const i=t[1],s=t[2],r=[];let e=3;for(;++e<t.byteLength;){const i=t[e++],s=t[e++],n=t[e++];r.push([s,i,n])}return[i,s,r]}static#Ft(t){t instanceof ArrayBuffer&&this.#Yt(new Uint8Array(t))}static#Yt(t){switch(t[0]){case this.#wt:{const i=this.#Bt(t);if((this.#It?.js??-1)==i)return;this.#It&&this.#$t.clear(),this.#It=this.#Dt.get(i),this.#E.wt(this.#At,this.#It);break}case this.#Tt:{if(this.#It.Zs)return;const i=this.#Wt(t),s=this.#jt(i);this.#E.wt(this.#vt,[s]);break}case this.#bt:{if(this.#It.Zs)return;const i=this.#qt(t),s=[];for(let t of i)s.push(this.#jt(t));this.#E.wt(this.#vt,s);break}case this.#Rt:{if(this.#It.Zs)return;const i=this.#Kt(t);for(let t of i)this.#Qt(t);this.#E.wt(this.#yt,i);break}}}static#Bt(t){return t[1]}static#Wt(t){return[t[1],t[2]]}static#qt(t){let i=2,s=[];for(;i<t.length;){let r=t[i++];s.push([t[i++],r])}return s}static#Kt(t){let i=2,s=[];for(;i<t.length;){let r=t[i++];s.push([t[i++],r])}return s}static#jt([t,i]){let s=this.ur([t,i]);return s||(s=new J,s.coords=[t,i],this.#$t.set(W(s.coords),s)),s.rr=!0,s}static#Qt(t){this.#$t.delete(W(t))}static get ar(){return this.#Mt.getState()}static cr(t,i=!1){this.#kt=i,this.#Mt.dispatch(t),this.#kt=!0}static get currentView(){return u(this.#Lt)}static get currentScale(){return this.#Ot}static get lr(){return u(this.ar.canvas.hover)}static ur(t){return this.#$t.get(W(t))}static dr(){return[...this.#$t.values()]}static get gr(){return this.#It}static get Sr(){return this.#Pt}static get gr(){return this.#It}static Er(t){return this.#E.Rt(this.#gt,t)}static nr(t,i){return this.#E.bt(`${this.#St}_${t}`,i)}static hr(t,i){return this.#E.bt(`${this.#Et}_${t}`,i)}static Ws(t){return this.#E.bt(this.#at,t)}static pr(t){return this.#E.bt(this.#mt,t)}static vr(t){return this.#E.bt(this.#At,t)}static yr(t){return this.#E.bt(this.#pt,t)}static Ar(t){return this.#E.bt(this.#vt,t)}static mr(t){return this.#E.bt(this.#yt,t)}static _r(t){return this.#E.bt(this.#_t,t)}}class it{jt;gr;wr=new Map;Tr=new Map}class st{Cr;br;Rr;Nr;Mr;kr;wr=[];Pr=!1;Or=!1;Lr=!1;Dr=!1;Ir=!1}class rt{yi;Cr;$r;Vr;Hr;Ur;Pr=!1;zr=!1;Fr}class et{static#Zt=1;static#Jt=2;static#ti=(()=>{const t=838..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-24-s)})).join("")}(53,179,186),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(31,167),s=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-14-s)})).join("")}(4,139),r=32..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(54,184,188)+1061..toString(36).toLowerCase(),e=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-6-s)})).join("")}(50,158,160)+23921..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(20,184),n=36804..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-33-s)})).join("")}(28,177)+32104..toString(36).toLowerCase();return{Gr:t=>(t=>t.jt.Vt()+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-11-s)})).join("")}(0,126,122,113,127)+766..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-47-s)})).join("")}(24,188,173,187)+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+t.gr.qs+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(33,184,123)+1032..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-14-s)})).join("")}(57,181))(t),Ut:()=>t,Xr:()=>i,Yr:()=>s,Br:()=>r,Wr:()=>e,jr:()=>n,qr:(t,i)=>((t,i)=>t.jt.Vt()+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+t.gr.qs+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(3,90)+i.Hr)(t,i)}})();static#ii=URL.createObjectURL(new Blob([s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(3,110,119,118)+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+708..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+11..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+39871..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(43,171,173)+922246..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join(""))],{type:"application/javascript"}));#E=new E;#_;#si;#ri=!1;#ei=!1;#ni=4;#hi=new Map;#ai=[];#oi=1;constructor(t){this.#_=t}Kr(){if(this.#_.jt&&tt.gr&&(!this.#si||!this.#ri||this.#si.gr!==tt.gr||this.#si.jt!==this.#_.jt)){for(let[t]of this.#hi.values())t.terminate();this.#hi.clear(),this.#ai=[],this.#si=new it,this.#si.gr=tt.gr,this.#si.jt=this.#_.jt,tt.gr.Zs||this.#ui(this.#si)}}async#ui(t){const i=new e;i.st=et.#ti.Gr.bind(et,t),i.et=e.Y,i.nt=this.#ri,i.ht=this.#ri;const s=await i.ut();if(!s.vt()&&404!==s.dt&&s.ft){for(let[i,r]of Object.entries(s.ft)){const s=new rt;t.wr.set(i,s),s.Vr=i,s.Hr=r[et.#ti.Ut()],s.yi=[r[et.#ti.Xr()],r[et.#ti.Yr()]],s.Cr=j(s.yi,t.gr.Ks),s.$r=[r[et.#ti.Br()],r[et.#ti.Wr()]],s.Ur=r[et.#ti.jr()],s.Pr=!1,s.zr=!1;let e=s.Cr[0]>>8,n=s.Cr[1]>>8,h=s.Cr[0]+s.$r[0]-1>>8,a=s.Cr[1]+s.$r[1]-1>>8;for(let i=e;i<=h;++i)for(let r=n;r<=a;++r){const e=W([i,r]);let n=t.Tr.get(e);n||(n=new st,n.Cr=[i,r],t.Tr.set(e,n)),n.wr.push(s)}}if(t===this.#si)if(this.#ei)this.#ci(t);else for(let i of tt.dr())this.#li(t,W(i.coords))}}#ci(t){if(t&&0!==t.wr.size){for(let i of t.wr.values())i.Pr||this.#fi(t,i);for(let i of t.Tr.values())i.Pr=!0}}#li(t,i){const s=t?.Tr.get(i);if(s&&!s.Pr){s.Pr=!0;for(let i of s.wr)i.Pr||this.#fi(t,i)}}async#fi(t,i){if(!t)return;i.Pr=!0;const s=new e;s.st=et.#ti.qr.bind(et,t,i),s.et=e.G,s.nt=this.#ri,s.ht=this.#ri;const r=await s.ut();!r.vt()&&404!==r.dt&&r.ft&&(i.Fr=await createImageBitmap(r.ft),i.zr=!0)}get nt(){return this.#ri}set nt(t){this.#ri!==t&&(this.#ri=t,this.#E.wt(et.#Zt,this.#ri))}get Qr(){return this.#ei}set Qr(t){this.#ei!==t&&(this.#ei=t,this.#E.wt(et.#Jt,this.#ei),this.#ei&&this.#ci(this.#si))}get Zr(){return this.#si}Jr(t,i){const s=this.#di(W(t),i);switch(i){case 1:return s?.br;case 2:return s?.Rr;case 4:return s?.Nr;default:return null}}te(t){const{Hs:i,Us:s,zs:r,Fs:e}=K(t),n=this.#di(W([i,s]),1);if(!n||!n.Or)return;const h=q([r,e]);return n.Mr[h]?n.kr[h]:null}set ie(t){this.#oi=t}#di(t,i){const s=this.#si.Tr.get(t);if(!s||s.Ir)return s;switch(i){case 1:if(s.Or||!s.wr.every((t=>t.zr)))return s;break;case 2:if(s.Dr)return s;break;case 4:if(s.Lr)return s;break;default:return null}return s.Ir=!0,this.#ai.push(s),s}se(){if(this.#si&&0!==this.#ai.length&&!(this.#hi.size>=this.#ni))for(;0!==this.#ai.length&&this.#hi.size<this.#ni;)this.#gi()}#gi(){this.#Si(this.#si,this.#ai.shift())}#Si(t,i){if(!i)return;let s=0;if(1&this.#oi&&!i.Or&&(s|=1),2&this.#oi&&!i.Dr&&(s|=2),4&this.#oi&&!i.Lr&&(s|=4),0===s)return void(i.Ir=!1);const r=tt.ur(i.Cr);if(!(i.Dr||r&&r.er))return void(i.Ir=!1);if(!i.Or){if(!i.wr.every((t=>t.zr)))return void(i.Ir=!1);i.br=T("canvas",{width:Y,height:Y});const t=i.br.getContext("2d");for(let s of i.wr)t.drawImage(s.Fr,s.Cr[0]-(i.Cr[0]<<8),s.Cr[1]-(i.Cr[1]<<8))}const e=new Array(7);i.Or?(e[0]=2,e[2]=i.Mr,e[3]=i.kr):(e[0]=1,e[2]=i.br.getContext("2d").getImageData(0,0,Y,Y).data,e[3]=null,i.br=null),e[1]=s,e[4]=2&s?r.sr:null,e[5]=t.gr.Js,e[6]=t.gr.Qs;const n=W(i.Cr),h=new Worker(et.#ii),a=new Map;h.addEventListener("error",(t=>{console.log("Error",n,[this.#oi,s],t)})),h.addEventListener("messageerror",(t=>{console.log("Error message",n,[this.#oi,s],t)})),h.addEventListener("message",(s=>{const[r,e,o,u,c,l]=s.data;if(h.terminate(),this.#hi.delete(n),i.Ir=!1,r){if(e&&(i.Mr=e,i.kr=o,i.br=T("canvas",{width:Y,height:Y}),i.br.getContext("2d").putImageData(new ImageData(u,Y,Y),0,0),i.Or=!0),c){for(let[s,r]of a.entries()){let e=s<<2;const[n,h,a,o]=this.#Ei(i,s,t.gr.tr[127&r]);c[e++]=n,c[e++]=h,c[e++]=a,c[e]=o}i.Rr=T("canvas",{width:Y,height:Y}),i.Rr.getContext("2d").putImageData(new ImageData(c,Y,Y),0,0),i.Dr=!0}l&&(i.Nr=T("canvas",{width:B,height:B}),i.Nr.getContext("2d").putImageData(new ImageData(l,B,B),0,0),i.Lr=!0)}else t.Tr.delete(n)})),this.#hi.set(n,[h,i.Dr?null:a]),h.postMessage(e)}#Ei(t,i,s){if(t.Mr[i]){const r=t.kr[i];return[...r===this.#si.gr.tr[127&s]?function([t,i,s]){return[.2*t,.2*i,.2*s]}(this.#si.gr.Js[r]):(this.#si.gr.Js[r],[255,0,0]),255]}return[0,0,0,0]}re(t){return this.#E.bt(et.#Zt,t)}ee(t){return this.#E.bt(et.#Jt,t)}Ds(){this.#_.qt(this.Kr.bind(this)),tt.vr(this.Kr.bind(this)),this.Kr(),tt.yr((t=>this.#li(this.#si,W(t.coords)))),tt.mr((t=>t.forEach((t=>{const i=W(t),s=this.#si?.Tr.get(i);if(s){const t=this.#hi?.get(i);t&&(t[0].terminate(),this.#hi.delete(i),s.Ir=!1),s.Rr=null,s.Dr=!1}})))),tt.pr(((t,i,s)=>{const r=W([t,i]),e=this.#si?.Tr.get(r);if(!e)return;const n=this.#hi.get(r);if(e.Dr||n&&null===n[1]){const t=e.Rr.getContext("2d");for(let[i,r,n]of s){n=this.#si.gr.tr[127&n];const s=q([i,r]),h=new Uint8ClampedArray(this.#Ei(e,s,n));t.putImageData(new ImageData(h,1,1),i,r)}}else if(n)for(let[t,i,r]of s){r=this.#si.gr.tr[127&r];const s=q([t,i]);n[1].set(s,r)}}))}}class nt{static#pi=1;static#vi=2;static#yi=new KeyboardEvent("keydown",{key:"Shift",location:KeyboardEvent.DOM_KEY_LOCATION_LEFT});static#Ai=new KeyboardEvent("keyup",{key:"Shift",location:KeyboardEvent.DOM_KEY_LOCATION_LEFT});#E=new E;#mi;#_i=!0;#wi=!0;#Ti=!1;constructor(i){this.#mi=i,t.document.addEventListener("keydown",(t=>{if(this.#_i&&"INPUT"!==t.target.nodeName&&"TEXTAREA"!==t.target.nodeName&&"KeyZ"===t.code&&!t.repeat){if(0!==tt.ar.canvas.pencilMode)return;this.#Ti=!0;const t=tt.lr;if(t)return void this.#Ci(j(t,tt.gr.Ks))}})),t.document.addEventListener("keyup",(t=>{"KeyZ"===t.code&&(this.#Ti=!1)})),tt._r(((t,i)=>{let s;i.addEventListener("touchstart",(t=>{1===t.touches.length&&0===tt.ar.canvas.pencilMode?(s=this.#bi(t.touches[0]),this.#Ci(s)):s=null})),i.addEventListener("touchmove",(t=>{if(!s||1!==t.touches.length||!tt.ar.gui.holdPaint)return;const i=this.#bi(t.touches[0]);s[0]===i[0]&&s[1]===i[1]||(s=i,this.#Ci(s))}))}))}#bi(t){if(!t)return null;const{width:i,height:s}=t.target,{clientX:r,clientY:e}=t,n=tt.currentScale,[h,a]=tt.currentView,o=Math.floor((r-i/2)/n+h),u=Math.floor((e-s/2)/n+a);return j([o,u],tt.gr.Ks)}#Ci([i,s]){const r=tt.ar;if(!this.#_i||tt.gr.Zs||tt.currentScale<3)return;const e=this.#mi.te([i,s]);if(Number.isInteger(e)){if(r.canvas.selectedColor!==e){const t=r.gui.mute;t||tt.cr({type:"s/TGL_MUTE"},!1),tt.cr({type:"SELECT_COLOR",color:e},!1),t||tt.cr({type:"s/TGL_MUTE"},!1)}this.#Ti&&(t.document.dispatchEvent(nt.#yi),t.document.dispatchEvent(nt.#Ai))}}get ne(){return this.#_i}set ne(t){this.#_i!==t&&(this.#_i=t,this.#E.wt(nt.#pi,t))}get he(){return this.#wi}set he(t){this.#wi!==t&&(this.#wi=t,this.#E.wt(nt.#vi,t))}ae(t){return this.#E.bt(nt.#pi,t)}oe(t){return this.#E.bt(nt.#vi,t)}Ds(){let t;tt.hr("SET_HOVER",(({hover:t})=>{0===tt.ar.canvas.pencilMode&&this.#Ci(j(t,tt.gr.Ks))})),tt.nr("REC_SET_PXLS",(()=>{this.#wi&&(t=tt.ar.gui.mute,t||tt.cr({type:"s/TGL_MUTE"},!0))})),tt.hr("REC_SET_PXLS",(()=>{this.#wi&&(t||tt.cr({type:"s/TGL_MUTE"},!0))}))}}class ht{static#Ri=1;static#Ni=2;static#xi=3;static#Mi=4;#E=new E;#ki=T("canvas");#mi;#Pi;#Oi;#Li=!1;#Di=!1;#Ii=!1;#$i=!0;#Vi=8;constructor(t,i,s){this.#mi=t,this.#Pi=i,this.#Oi=s}#Hi(){const t=this.#Pi.gs.fs;let i=this.#Pi.gi.getBoundingClientRect();t.width=i.width,t.height=i.height;const s=this.#Oi.fs;i=s.parentElement.getBoundingClientRect(),s.width=i.width,s.height=i.height;const r=this.#mi.Zr;if(r?.gr.Zs??1)return;const e=tt.currentScale,n=t.getContext("2d"),h=s.getContext("2d");n.reset(),h.reset();const a=e<1;n.imageSmoothingEnabled=a,n.msImageSmoothingEnabled=a,n.webkitImageSmoothingEnabled=a,h.imageSmoothingEnabled=a,h.msImageSmoothingEnabled=a,h.webkitImageSmoothingEnabled=a,0===r.Tr.size||tt.ar.canvas.isHistoricalView||(this.#Li?this.#Ui(h):this.#Pi.Ts===this.#Pi.gs&&(this.#zi(n),e>=3&&this.#Fi(n,!1))),this.#Di&&this.#Fi(h,!0)}#zi(t){if(tt.currentScale<.5)return;const i=this.#Ii?2:1;this.#Gi(t,(t=>this.#mi.Jr(t,i)),tt.lr??tt.currentView,!1,Y)}#Ui(t){if(tt.currentScale<.5)return;const i=this.#$i&&tt.currentScale>=this.#Vi?4:this.#Ii?2:1;this.#Gi(t,(t=>this.#mi.Jr(t,i)),tt.currentView,!0,4===i?B:Y)}#Gi(t,i,s,r,e){const n=this.#mi.Zr.gr.Ks,h=tt.currentScale,{ue:a,ce:o}=((t,i)=>{const[s,r]=j(t,i);return{Hs:Math.floor(s/Y),Us:Math.floor(r/Y),zs:s%Y,Fs:r%Y,ue:s,ce:r}})([Math.floor(s[0]),Math.floor(s[1])],n),u=(t.canvas.width>>1)/h,c=(t.canvas.height>>1)/h,l=Math.max(Math.ceil(a-u-.5),0),d=Math.max(Math.ceil(o-c-.5),0),g=Math.min(Math.ceil(a+u+.5),n),S=Math.min(Math.ceil(o+c+.5),n),{Hs:E,Us:p}=K([l,d]),{Hs:v,Us:y}=K([g,S]),A=v-E+1,m=y-p+1,_=this.#ki.getContext("2d");this.#ki.width=A*e,this.#ki.height=m*e,_.reset();for(let t=0;t<A;++t)for(let s=0;s<m;++s){const r=i([E+t,p+s]);r&&_.drawImage(r,t*e,s*e)}const w=e/Y,T=h/w;let C=u-.5-a+E*Y,b=c-.5-o+p*Y;r&&(C+=.5-f(s[0]),b+=.5-f(s[1])),t.scale(T,T),t.drawImage(this.#ki,C*w,b*w)}#Fi(t,i=!1){const s=tt.currentScale,r=tt.currentView,e=.3*s,n=.65-.5,[h,a]=i?[d(r[0]),d(r[1])]:[.5,.5],o=t.canvas.width>>1,u=t.canvas.height>>1;t.resetTransform(),t.lineWidth=e,t.strokeStyle="darkblue",t.strokeRect(o-s*(n+h),u-s*(n+a),s+e,s+e)}get le(){return this.#Li}set le(t){this.#Li!==t&&(this.#Li=t,this.#E.wt(ht.#Ri,this.#Li))}get fe(){return this.#Di}set fe(t){this.#Di!==t&&(this.#Di=t,this.#E.wt(ht.#Ni,this.#Di))}get de(){return this.#Ii}set de(t){this.#Ii!==t&&(this.#Ii=t,this.#Xi(),this.#E.wt(ht.#xi,this.#Ii))}get ge(){return this.#$i}set ge(t){this.#$i!==t&&(this.#$i=t,this.#Xi(),this.#E.wt(ht.#Mi,this.#$i))}Se(t){return this.#E.bt(ht.#Ri,t)}Ee(t){return this.#E.bt(ht.#Ni,t)}pe(t){return this.#E.bt(ht.#xi,t)}ve(t){return this.#E.bt(ht.#Mi,t)}#Xi(){let t=1;this.#Li&&this.#$i&&tt.currentScale>=this.#Vi?t|=4:this.#Ii&&(t|=2),this.#mi.ie=t}Ds(){const t=()=>{this.#Xi(),this.#Hi(),this.#mi.se(),window.requestAnimationFrame(t)};window.requestAnimationFrame(t)}}class at extends G{static#Yi=1;static#Bi=()=>function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-56-s)})).join("")}(17,185)+25..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(52,170);static#Wi=()=>1190930..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-52-s)})).join("")}(7,167)+1193999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-17-s)})).join("")}(30,164,148);ye;Ae;ne;constructor(){super(at.#Yi,at.#Bi(),at.#Wi()),this.ks.yt("hardcodeColors")||this.ks.l("hardcodeColors",!1),tt.init(this.ks.u("hardcodeColors")),this.ye=new et(this.Bt),this.Ae=new ht(this.ye,this.Ps,this.Os),this.ne=new nt(this.ye),t.addEventListener("load",(async()=>{if(await this.Bt.Yt(!0),this.Bt.Bt[0]?.It()!==function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-59-s)})).join("")}(20,156)+28..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-13-s)})).join("")}(56,149)+32..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join(""))return;const t=()=>{this.bind(),this.Ls(),this.Ds(),this.Is()};if(tt.gr)t();else{const i=tt.vr((()=>{i(),t()}))}}),{once:!0})}bind(){super.bind(),this.ye.nt=!!this.ks.yt("useCache")&&this.ks.u("useCache"),this.ks.l("useCache",this.ye.nt),this.ye.re((t=>this.ks.l("useCache",t))),this.ye.Qr=!!this.ks.yt("loadAllTemplates")&&this.ks.u("loadAllTemplates"),this.ks.l("loadAllTemplates",this.ye.Qr),this.ye.ee((t=>this.ks.l("loadAllTemplates",t))),this.Ae.le=!!this.ks.yt("overlay")&&this.ks.u("overlay"),this.ks.l("overlay",this.Ae.le),this.Ae.Se((t=>this.ks.l("overlay",t))),this.Ae.fe=!!this.ks.yt("overlayCenter")&&this.ks.u("overlayCenter"),this.ks.l("overlayCenter",this.Ae.fe),this.Ae.Ee((t=>this.ks.l("overlayCenter",t))),this.Ae.de=!!this.ks.yt("errorDetector")&&this.ks.u("errorDetector"),this.ks.l("errorDetector",this.Ae.de),this.Ae.pe((t=>this.ks.l("errorDetector",t))),this.Ae.ge=!!this.ks.yt("minipixel")&&this.ks.u("minipixel"),this.ks.l("minipixel",this.Ae.ge),this.Ae.ve((t=>this.ks.l("minipixel",t))),this.ne.ne=!!this.ks.yt("autoColorSelect")&&this.ks.u("autoColorSelect"),this.ks.l("autoColorSelect",this.ne.ne),this.ne.ae((t=>this.ks.l("autoColorSelect",t))),this.ne.he=!this.ks.yt("disablePlacedPixelSound")||this.ks.u("disablePlacedPixelSound"),this.ks.l("disablePlacedPixelSound",this.ne.he),this.ne.oe((t=>this.ks.l("disablePlacedPixelSound",t)))}Ls(){super.Ls(),this.Ps.Ui(t.document.body,2),this.Os.Ui(t.document.body)}Ds(){super.Ds(),this.ye.Ds(),this.Ae.Ds(),this.ne.Ds()}Is(){super.Is();this.Ps._s.ns("hardcodeColors",(()=>{this.ks.l("hardcodeColors",!0),t.location.reload()}),(()=>{this.ks.l("hardcodeColors",!1),t.location.reload()})).Ki(this.ks.u("hardcodeColors"),!1);const i=this.Ps._s.ns("useCache",(()=>this.ye.nt=!0),(()=>this.ye.nt=!1));i.Ki(this.ks.u("useCache"),!1),this.ye.re((t=>i.Ki(t,!1)));const s=this.Ps._s.ns("loadAllTemplates",(()=>this.ye.Qr=!0),(()=>this.ye.Qr=!1));s.Ki(this.ks.u("loadAllTemplates"),!1),this.ye.ee((t=>s.Ki(t,!1)));const r=this.Ps._s.ns("overlay",(()=>this.Ae.le=!0),(()=>this.Ae.le=!1));r.Ki(this.ks.u("overlay"),!1),this.Ae.Se((t=>r.Ki(t,!1)));const e=this.Ps._s.ns("overlayCenter",(()=>this.Ae.fe=!0),(()=>this.Ae.fe=!1));e.Ki(this.ks.u("overlayCenter"),!1),this.Ae.Ee((t=>e.Ki(t,!1)));const n=this.Ps._s.ns("errorDetector",(()=>this.Ae.de=!0),(()=>this.Ae.de=!1));n.Ki(this.ks.u("errorDetector"),!1),this.Ae.pe((t=>n.Ki(t,!1)));const h=this.Ps._s.ns("minipixel",(()=>this.Ae.ge=!0),(()=>this.Ae.ge=!1));h.Ki(this.ks.u("minipixel"),!1),this.Ae.ve((t=>h.Ki(t,!1)));const a=this.Ps._s.ns("autoColorSelect",(()=>this.ne.ne=!0),(()=>this.ne.ne=!1));a.Ki(this.ks.u("autoColorSelect"),!1),this.ne.ae((t=>a.Ki(t,!1)));const o=this.Ps._s.ns("disablePlacedPixelSound",(()=>this.ne.he=!0),(()=>this.ne.he=!1));o.Ki(this.ks.u("disablePlacedPixelSound"),!1),this.ne.oe((t=>o.Ki(t,!1))),this.Ps._s.os({minimap:["overlay","errorDetector","autoColorSelect","minipixel"],common:["lang",19812..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-49-s)})).join("")}(52,214,207,217)+23..toString(36).toLowerCase()],window:["theme","fixAngle","lockMove","lockSize"],extended:["useCache","loadAllTemplates","disablePlacedPixelSound","overlayCenter","hardcodeColors"]})}}(()=>{const i=[{me:/(?<!git\.)(pixelplanet|fuckyouarkeros)\.fun((\/(#|$))|$)/,_e:at}];for(let{me:s,_e:r}of i)if(s.test(t.location.href)){new r;break}})()})();