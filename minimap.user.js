// ==UserScript==
// @name Pixel Minimap (Test)
// @description OMG. I made a minimap. (At least I hope)
// @version 1.0.4
// @author KeepssMe | Thanks: Sallbet, Danvo
// @exclude https://git.pixelplanet.fun/
// @exclude https://*.pixelplanet.fun/globe
// @exclude https://fuckyouarkeros.fun/globe
// @exclude https://*.pixelplanet.fun/userarea
// @exclude https://fuckyouarkeros.fun/userarea
// @exclude https://*.pixelplanet.fun/chat
// @exclude https://fuckyouarkeros.fun/chat
// @exclude https://*.pixelplanet.fun/help
// @exclude https://fuckyouarkeros.fun/help
// @exclude https://*.pixelplanet.fun/settings
// @exclude https://fuckyouarkeros.fun/settings
// @match https://*.pixelplanet.fun/
// @match https://fuckyouarkeros.fun/
// @match https://pixelzone.io/
// @match https://pixelcanvas.io/
// @connect raw.githubusercontent.com
// @downloadURL https://raw.githubusercontent.com/KeepssMe/PixelMinimap/test/minimap.user.js
// @grant GM_getResourceText
// @grant GM_addStyle
// @grant GM_addElement
// @grant GM_listValues
// @grant GM_setValue
// @grant GM_getValue
// @grant GM_deleteValue
// @grant GM_xmlhttpRequest
// @homepageURL https://github.com/KeepssMe/PixelMinimap
// @iconURL https://raw.githubusercontent.com/KeepssMe/PixelMinimap/test/icons/icon-min.png
// @namespace https://github.com/KeepssMe/PixelMinimap
// @resource PPF_CHUNKCHECKER https://raw.githubusercontent.com/KeepssMe/PixelMinimap/test/ppf.chunkchecker.js
// @resource TRANSLATIONS https://raw.githubusercontent.com/KeepssMe/PixelMinimap/test/translations.json
// @resource STYLES https://raw.githubusercontent.com/KeepssMe/PixelMinimap/test/styles.css
// @resource VIEWS https://raw.githubusercontent.com/KeepssMe/PixelMinimap/test/views.html
// @run-at document-start
// @sandbox raw
// @updateURL https://raw.githubusercontent.com/KeepssMe/PixelMinimap/test/minimap.user.js
// ==/UserScript==

(()=>{const t=unsafeWindow,i=window;class s{static info=i.GM.info;static t=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-18-s)})).join("")}(33,148,129,122)+21269..toString(36).toLowerCase()+34..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+690366..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-8-s)})).join("")}(14,122,136)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(19,204,184,166)+29..toString(36).toLowerCase()];static i=t=>JSON.parse(s.t(t));static#t=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-1-s)})).join("")}(31,136,132,129,110,103)+13..toString(36).toLowerCase()+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+998726..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(53,192)+29..toString(36).toLowerCase()];static addElement(t,i={},s=null){return s?this.#t(s,t,i):this.#t(t,i)}static h=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(42,190,186,183,164,157)+13..toString(36).toLowerCase()+35..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+1078..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-20-s)})).join("")}(45,173)+14..toString(36).toLowerCase()]}class e{static o=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(19,128,130,116,97,90)+1037..toString(36).toLowerCase()+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+381..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(6,156,171)+28..toString(36).toLowerCase()];static u=i[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(3,166,150,151,142)+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+13746..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-41-s)})).join("")}(37,179)];static l=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(6,138,151,130,111,104)+29..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(61,181,171,159,147)+14..toString(36).toLowerCase()];static m=i[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-2-s)})).join("")}(59,172,164,162,156)+19202..toString(36).toLowerCase()+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-34-s)})).join("")}(22,153)+28310..toString(36).toLowerCase()];static S=()=>e.o().forEach((t=>e.m(t)));static getEntries=()=>e.o().reduce(((t,i)=>({...t,[i]:e.u(i)})),{})}class n{static#i=window[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+43581..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(32,166,146,175,178,177,164)+34790..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(56,211)+29..toString(36).toLowerCase()];static#s=(()=>{const t=11..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(59,198,194)+11..toString(36).toLowerCase(),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(15,116)+999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-2-s)})).join("")}(17,141,116)+11..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-6-s)})).join("")}(1,111,111,110,124)+27..toString(36).toLowerCase(),s=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-46-s)})).join("")}(8,160)+1032..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-60-s)})).join("")}(33,203),e=28..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-41-s)})).join("")}(9,165,166)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-19-s)})).join("")}(46,162)+22..toString(36).toLowerCase(),n=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-23-s)})).join("")}(3,146,127,138,126)+29039..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(35,209),r=29..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-15-s)})).join("")}(42,158)+1217..toString(36).toLowerCase(),h=30..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(18,160)+21..toString(36).toLowerCase(),a=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(19,171)+690396..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(45,161,155)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(24,181,143)+914..toString(36).toLowerCase(),o=27..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(60,173,175,163,183,165)+620546..toString(36).toLowerCase(),c=852..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(25,132,133)+12..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(7,157,159),u=24..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(26,165)+27..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(60,195,200,178,174,177)+2296106198159..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(63,170)+14..toString(36).toLowerCase(),l=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-7-s)})).join("")}(49,167,167)+13380..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(25,171,168),f=887..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(34,175)+999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-32-s)})).join("")}(63,206)+27..toString(36).toLowerCase(),d=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-20-s)})).join("")}(10,140,141,141)+874..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-26-s)})).join("")}(9,135),m=35506..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(45,157,194,172)+37973..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(28,187),g=531..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(30,186,188)+27..toString(36).toLowerCase(),S=986..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(30,181,181,181,183)+28..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-8-s)})).join("")}(24,133),p=1037..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-37-s)})).join("")}(31,185,165)+1108..toString(36).toLowerCase();return{p:()=>t,_:()=>i,A:()=>s,T:()=>e,C:()=>n,P:()=>r,O:()=>h,M:()=>a,N:()=>o,R:()=>c,D:()=>u,k:()=>l,L:()=>f,$:()=>d,I:()=>m,V:()=>g,H:()=>S,F:()=>p}})();static U=0;static G=1;static W=2;static X=3;static Y=4;static B=5;static j=6;static K=0;static q=1;static Z=2;static J=3;static tt=4;static it=5;static#e(t){switch(t){case this.G:return this.#s.p();case this.W:return this.#s._();case this.X:return this.#s.A();case this.Y:return this.#s.T();case this.B:return this.#s.C();case this.j:return this.#s.P();default:return null}}st;et=n.U;nt=!0;ht=!0;#n=n.K;#r;#h;get ot(){return this.#n}async ct(t=!1){switch(this.#n){case n.K:return await this.#a();case n.tt:case n.it:return t?await this.#a():this.#h;default:return await this.#r}}async#a(){let t;return this.#h=void 0,this.#n=n.K,this.#r=new Promise((i=>{try{t=n.#i({[n.#s.O()]:"function"==typeof this.st?this.st(this):this.st,[n.#s.M()]:n.#e(this.et),[n.#s.R()]:!this.nt,[n.#s.N()]:this.ht,[n.#s.D()]:t=>{this.#n=t[n.#s.I()]},[n.#s.k()]:t=>{this.#n=n.it;const s=new r;s.ut=!0,i(s)},[n.#s.L()]:t=>{const s=new r;s.errorText=t[n.#s.V()],i(s)},[n.#s.$()]:t=>{const s=new r;s.ft=t[n.#s.H()],s.responseStatus=t[n.#s.F()],i(s)}})}catch(t){const s=new r;s.dt=t,i(s)}})),this.#r.abort=t.abort,this.#h=await this.#r,this.#h}gt(){this.#r?.abort()}St(){const t=new n;return t.st=this.st,t.et=this.et,t.nt=this.nt,t.ht=this.ht,t}}class r{responseStatus=0;ft=null;ut=!1;errorText=null;dt=null;Et(){return this.errorText||this.dt}}function h(t){return null==t}const a=/Mobile|Android|webOS|iPhone|iPod|iPad|BlackBerry|Windows Phone|Windows Mobile|Opera Mini|WPDesktop|IEMobile|Fennec|Nokia/i;const o=new Error("Incorrect value type");function c(t){switch(typeof t){case"number":case"boolean":case"string":case"bigint":case"undefined":return t;case"object":if(null===t)return null;let i=Array.isArray(t)?[]:{};for(let s in t)t.hasOwnProperty(s)&&(i[s]=c(t[s]));return i;default:throw o}}function u(t,i){if(t===i)return!0;const s=typeof t;if(s!==typeof i)return!1;switch(s){case"number":case"boolean":case"string":case"bigint":case"undefined":return!1;case"object":if(null===t)return!1;let s=Array.isArray(t);if(s!==Array.isArray(i))return!1;if(s){if(t.length!==i.length)return!1}else if(Object.keys(t).length!==Object.keys(i).length)return!1;for(let s in t)if(t.hasOwnProperty(s)&&(!i.hasOwnProperty(s)||!u(t[s],i[s])))return!1;return!0;default:throw o}}function l(t,i,s){return Math.max(t,Math.min(i,s))}function f(t){return Math.abs(t-Math.floor(t))}class d{#o={};#c;constructor(t){this.#c=t+"_",e.o().filter((i=>i.startsWith(t))).forEach((t=>this.#o[t.slice(this.#c.length)]=e.u(t,void 0)))}#u(t){return this.#c+t}yt(t){return this.#o.hasOwnProperty(t)}u(t,i=null){return this.yt(t)?c(this.#o[t]):i}l(t,i){u(this.#o[t],i)||(e.l(this.#u(t),i),this.#o[t]=c(i))}m(t){delete this.#o[t],e.m(this.#u(t))}S(){for(let t of Object.keys(this.#o))delete this.#o[t],e.m(this.#u(t))}}class m{vt=new Set;_t=new Set}class g{#l=new Map;emit(t,...i){const s=this.#l.get(t);if(!s)return;const{vt:e,_t:n}=s;e.forEach((t=>{try{t(...i)}catch(t){console.error(t)}})),n.forEach((t=>e.delete(t))),0===e.size?this.#l.delete(t):n.clear()}At(t){return 0!==this.#l.get(t)?.vt.size??!1}Tt(t){return this.#l.get(t)?.vt.size??0}wt(t,i){return this.#f(t,i,!1)}Ct(t,i){return this.#f(t,i,!0)}#f(t,i,s=!1){let e=this.#l.get(t);e||(e=new m,this.#l.set(t,e));const{vt:n,_t:r}=e;return n.has(i)||(n.add(i),s&&r.add(i)),this.bt.bind(this,t,i)}bt(t,i){const s=this.#l.get(t);if(!s)return;const{vt:e,_t:n}=s;e.delete(i),n.delete(i),0===e.length&&this.#l.delete(t)}xt(t){const i=this.#l.get(t);i&&(i.vt.clear(),i._t.clear(),this.#l.delete(t))}}class S{Pt;Ot;translations}class p{static#d=1;static#m=new Map;static#g;static{const i=()=>10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(39,161)+17..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-52-s)})).join("")}(27,147,157,163,157)+10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-62-s)})).join("")}(28,163)+1146..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(5,123),e=s.i(i()),n=new Map;for(let t of e){if(this.#m[t.name])continue;const i=new S;i.Pt=t.name,i.Ot=t.langs,i.translations=t.translations,this.#m[i.Pt]=i,i.Ot.filter((t=>!n.has(t))).forEach((t=>n.set(t,i)))}this.#g=Object.values(this.#m)[0];for(let i of t.navigator.languages)if(n.has(i)){this.#g=n.get(i);break}}#S=new g;#p;constructor(){this.#p=p.#g}get translations(){return[...Object.values(p.#m)]}get Mt(){return p.#g}get Nt(){return this.#p}set Nt(t){t instanceof S&&(t=t.Pt);let i=p.#m[t]??p.#g;this.#p!==i&&(this.#p=i,this.#S.emit(p.#d,i))}Rt(t){return this.#p.translations[t]??t}Dt(t){return this.#S.wt(p.#d,t)}}class E{getName;kt;Lt}class y{static#s=(()=>{const t=838..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-22-s)})).join("")}(11,142)+14..toString(36).toLowerCase(),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-46-s)})).join("")}(11,179,173)+25..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(33,161),s=30..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-42-s)})).join("")}(16,172)+21..toString(36).toLowerCase();return{$t:t=>29945008..toString(36).toLowerCase()+10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+1147..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(51,200,146,215,208,198,212,205,205,192,206,192,205,206,186,204,190,201,189,186,128,200,177,193)+886..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(35,129,95,147,147,159,145,146,145,138,124,86)+24530..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-10-s)})).join("")}(36,95,162,154)+22..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(43,131,193,187,178)+t+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(47,155,159,151)+12..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(23,199,199,192,202)+28..toString(36).toLowerCase()+30..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(51,176,166)+24..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-24-s)})).join("")}(56,190),It:()=>t,Vt:()=>i,Ht:()=>s}})();static Ft=1;static Ut=2;static#E(t,i){return t&&i&&t.getName()===i.getName()&&t.kt()===i.kt()&&t.Lt()===i.Lt()}#S=new g;#y=new n;#v;#_=()=>null;#A=[];#T=null;#w=null;constructor(t){this.#y.nt=!1,this.#y.ht=!0,this.#y.et=n.X,this.#y.st=y.#s.$t.bind(y,t),this.zt()}get Gt(){return[...this.#A]}get Wt(){return this.#T}get Xt(){return this.#w}set Xt(t){t instanceof E&&(t=t.getName()),t=this.#_(t)??this.#T,y.#E(this.#w,t)||(this.#w=t,this.#S.emit(y.Ft,t))}async zt(t=!1){t&&0!==this.#A.length||(this.#v??=this.#C(),await this.#v)}async#C(){const t=await this.#y.ct(!0);if(!t.ft)return void(this.#v=void 0);const i={};for(let s of t.ft){if(i[s[y.#s.It()]])continue;const t=new E;t.getName=()=>s[y.#s.It()],t.kt=()=>s[y.#s.Vt()],t.Lt=()=>s[y.#s.Ht()],i[t.getName()]=t}this.#_=t=>i[t],this.#A=Object.values(i),this.#T=this.#A[0];const s=this.#w;this.#w=i[s?.getName()]??this.#T,this.#S.emit(y.Ut,this.Gt),s&&!y.#E(s,this.#w)&&this.#S.emit(y.Ft,this.#w),this.#v=void 0}Yt(t){return this.#S.wt(y.Ft,t)}Bt(t){return this.#S.wt(y.Ut,t)}}const v=new Map,_=(new DOMParser).parseFromString(s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-1-s)})).join("")}(26,113)+25..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-11-s)})).join("")}(35,115)+13..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+35..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")),"text/html").body.children;for(let t of _){const i=t.getAttribute("viewKey"),s=t.cloneNode(!0);s.removeAttribute("viewKey"),v.set(i,s)}function A(t){return v.get(t)?.cloneNode(!0)}function T(t,i,s=0){return function(t,i){return[...t.querySelectorAll(i)]}(t,i)[s]}function w(t,i={},e=null,n=!1){if(n)return s.addElement(t,i,e);const r=document.createElement(t);if(i)for(let t of Object.keys(i))r.setAttribute(t,i[t]);return e&&e.insertAdjacentElement("beforeend",r),r}function C(t){const i=T(v.get("svgs"),`svg[key="${t}"]`).cloneNode(!0);return i.removeAttribute("key"),i}class b{jt;Kt;qt;Zt;Qt}class x{Jt;ti;ii;si;ei}class P{static#b=1;static#x=2;static#P=3;static#O=4;static#M=5;static#N=6;static#R=7;static#D=8;static#k=9;static#L=10;static ni=["dark","darkmini"];static ri=200;static hi=300;static ai=30;#S=new g;oi=A("movewin");ci=new b;ui=new x;li=T(this.oi,".movewin_main");fi=T(this.oi,".movewin_footer");#$=[!1,!0];#I=[0,0];#V=[P.hi,P.hi];#H=!1;#F=!1;#U=!0;constructor(){this.ci.jt=T(this.oi,".movewin_resizers"),this.ci.Kt=T(this.oi,".movewin_resizer-lt"),this.ci.qt=T(this.oi,".movewin_resizer-rt"),this.ci.Zt=T(this.oi,".movewin_resizer-lb"),this.ci.Qt=T(this.oi,".movewin_resizer-rb"),this.ui.Jt=T(this.oi,".movewin_header"),this.ui.ti=T(this.oi,".movewin_header-info"),this.ui.ii=T(this.oi,".movewin_header-status"),this.ui.si=T(this.oi,".movewin_header-mover"),this.ui.ei=T(this.oi,".movewin_header-button_minimize")}get di(){return this.oi.getAttribute("theme")}set di(t){P.ni.includes(t)||(t=P.ni[0]),this.oi.setAttribute("theme",t),this.#S.emit(P.#b,t)}get status(){return this.ui.ii.textContent}set status(t){this.ui.ii.textContent!==t&&(this.ui.ii.textContent=t,this.#S.emit(P.#x,t))}get mi(){return[...this.#$]}set mi([t,i]){if(!this.oi.parentElement)return void(this.#$=[t,i]);if(this.#$[0]===t&&this.#$[1]===i)return;const s=this.oi.getBoundingClientRect(),e=this.oi.parentElement.getBoundingClientRect();let n=t?{v:"left",r:"right",gi:s.left-e.left}:{v:"right",r:"left",gi:e.right-s.right},r=i?{v:"top",r:"bottom",gi:s.top-e.top}:{v:"bottom",r:"top",gi:e.bottom-s.bottom};this.#$=[t,i],this.#I=[n.gi,r.gi],this.oi.style[n.v]=this.#I[0]+"px",this.oi.style[n.r]=null,this.oi.style[r.v]=this.#I[1]+"px",this.oi.style[r.r]=null,this.#S.emit(P.#P,...this.#$),this.#S.emit(P.#O,...this.#I)}get Si(){return[...this.#I]}get pi(){const t=this.oi.getBoundingClientRect(),i=this.oi.parentElement.getBoundingClientRect();return[this.#$[0]?t.left-i.left:i.right-t.right,this.#$[1]?t.top-i.top:i.bottom-t.bottom]}set Si([t,i]){if(!this.oi.parentElement)return void(this.#I=[t,i]);if(this.#I[0]===t&&this.#I[1]===i)return;const s=this.oi.getBoundingClientRect(),e=this.oi.parentElement.getBoundingClientRect();this.#I[0]=l(0,t,e.width-s.width),this.#I[1]=l(0,i,e.height-s.height),this.oi.style[this.#$[0]?"left":"right"]=this.#I[0]+"px",this.oi.style[this.#$[1]?"top":"bottom"]=this.#I[1]+"px",this.#S.emit(P.#O,t,i)}get size(){return[...this.#V]}get Ei(){const t=this.oi.getBoundingClientRect();return[t.width,t.height]}set size([t,i]){if(!this.oi.parentElement)return void(this.#V=[t,i]);if(this.#V[0]===t&&this.#V[0]===i)return;const s=this.oi.getBoundingClientRect(),e=this.oi.parentElement.getBoundingClientRect();let n=this.#$[0]?e.right-s.left-(P.ai-Math.min(P.ai,s.left-e.left)):s.right-e.left-(P.ai-Math.min(P.ai,e.right-s.right)),r=this.#$[1]?e.bottom-s.top-(P.ai-Math.min(P.ai,s.top-e.top)):s.bottom-e.top-(P.ai-Math.min(P.ai,e.bottom-s.bottom));this.#V[0]=l(P.ri,t,n),this.#V[1]=l(P.ri,i,r),this.oi.style.width=this.#V[0]+"px",this.oi.style.height=this.#V[1]+"px",this.#S.emit(P.#N,...this.#V)}get yi(){return this.#H}get _i(){return this.ui.si.hidden}set yi(t){t!==this.#H&&(this.ui.si.hidden=t,this.#H=t,this.#S.emit(P.#D,t))}get Ai(){return this.#F}get Ti(){return this.ci.jt.hidden}set Ai(t){t!==this.#F&&(this.ci.jt.hidden=t,this.#F=t,this.#S.emit(P.#k,t))}get wi(){return this.#U}get Ci(){return"none"===this.fi.style.display}set wi(t){t!==this.#U&&(this.fi.style.display=t?"none":null,this.#U=t,this.#S.emit(P.#L,t))}bi(i){const s=(()=>{let t=this.oi.getBoundingClientRect(),s=this.oi.parentElement.getBoundingClientRect(),e=s.width-t.width,n=s.height-t.height,r=this.#$[0]?{v:"left",f:t=>t-a}:{v:"right",f:t=>a-t},h=this.#$[1]?{v:"top",f:t=>t-o}:{v:"bottom",f:t=>o-t},a=i.clientX+s[r.v]-t[r.v],o=i.clientY+s[h.v]-t[h.v];return(t,i)=>{let s=l(0,r.f(t),e),a=l(0,h.f(i),n);this.oi.style[r.v]=s+"px",this.oi.style[h.v]=a+"px",this.#S.emit(P.#M,s,a)}})(),e=t=>s(t.pageX,t.pageY),n=()=>{let i=this.oi.getBoundingClientRect(),s=this.oi.parentElement.getBoundingClientRect();this.#$[0]?(this.#I[0]=i.left-s.left,this.oi.style.left=this.#I[0]+"px"):(this.#I[0]=s.right-i.right,this.oi.style.right=this.#I[0]+"px"),this.#$[1]?(this.#I[1]=i.top-s.top,this.oi.style.top=this.#I[1]+"px"):(this.#I[1]=s.bottom-i.bottom,this.oi.style.bottom=this.#I[1]+"px"),this.#S.emit(P.#O,...this.#I),t.document.removeEventListener("mousemove",e),t.document.removeEventListener("mouseup",n),t.document.removeEventListener("touchmove",r),t.document.removeEventListener("touchstart",h),t.document.removeEventListener("touchend",h),t.document.removeEventListener("touchcancel",h)},r=t=>e(t.touches[0]),h=t=>{1!==t.touches.length&&n()};t.document.addEventListener("mousemove",e),t.document.addEventListener("mouseup",n),t.document.addEventListener("touchmove",r),t.document.addEventListener("touchstart",h),t.document.addEventListener("touchend",h),t.document.addEventListener("touchcancel",h)}xi(i,s,e){const n=(()=>{let t=this.oi.getBoundingClientRect(),n=this.oi.parentElement.getBoundingClientRect();const r=(s,e,r,h,a)=>{if(s!==e){let i=e?t.left-n.left:n.right-t.right;return()=>i}let o=r,c=P.ai,u=0,f=t=>t;s?(o=r,c-=Math.min(P.ai,n[h]-t[h]),u=t[h]-n[r]-P.ri,f=t=>t-d):(o=h,c-=Math.min(P.ai,t[r]-n[r]),u=n[h]-t[r]-P.ri,f=t=>d-t);let d=i[a]+n[o]-t[o];return t=>{const i=l(c,f(t),u);return this.oi.style[o]=i+"px",i}},h=(s,e,r,h,a)=>{let o=t[h],c=t=>t,u=0;return s?(o+=i[a],c=t=>o-t,u=t[r]-n[e]-(P.ai-Math.min(P.ai,n[r]-t[r]))):(o-=i[a],c=t=>o+t,u=n[r]-t[e]-(P.ai-Math.min(P.ai,t[e]-n[e]))),t=>{const i=l(P.ri,c(t),u);return this.oi.style[h]=i+"px",i}};let a=r(s,this.#$[0],"left","right","clientX"),o=r(e,this.#$[1],"top","bottom","clientY"),c=h(s,"left","right","width","clientX"),u=h(e,"top","bottom","height","clientY");return(t,i)=>{this.#S.emit(P.#M,a(t),o(i)),this.#S.emit(P.#R,c(t),u(i))}})(),r=t=>n(t.pageX,t.pageY),h=()=>{let i=this.oi.getBoundingClientRect(),s=this.oi.parentElement.getBoundingClientRect();this.#$[0]?(this.#I[0]=i.left-s.left,this.oi.style.left=this.#I[0]+"px"):(this.#I[0]=s.right-i.right,this.oi.style.right=this.#I[0]+"px"),this.#$[1]?(this.#I[1]=i.top-s.top,this.oi.style.top=this.#I[1]+"px"):(this.#I[1]=s.bottom-i.bottom,this.oi.style.bottom=this.#I[1]+"px"),this.#V=[i.width,i.height],this.oi.style.width=this.#V[0]+"px",this.oi.style.height=this.#V[1]+"px",this.#S.emit(P.#O,...this.#I),this.#S.emit(P.#N,...this.#V),t.document.removeEventListener("mousemove",r),t.document.removeEventListener("mouseup",h),t.document.removeEventListener("touchmove",a),t.document.removeEventListener("touchstart",o),t.document.removeEventListener("touchend",o),t.document.removeEventListener("touchcancel",o)},a=t=>r(t.touches[0]),o=t=>{1!==t.touches.length&&h()};t.document.addEventListener("mousemove",r),t.document.addEventListener("mouseup",h),t.document.addEventListener("touchmove",a),t.document.addEventListener("touchstart",o),t.document.addEventListener("touchend",o),t.document.addEventListener("touchcancel",o)}#z(){const t=this.oi.parentElement.getBoundingClientRect(),i=(i,s,e,n,r,h)=>{const a=Math.max(P.ri,t[h]-P.ai),o=a>e?e:a,c=l(0,a-o,s);return this.oi.style[h]=o+"px",this.oi.style[i?n:r]=c+"px",[c,o]},[s,e]=i(this.#$[0],this.#I[0],this.#V[0],"left","right","width"),[n,r]=i(this.#$[1],this.#I[1],this.#V[1],"top","bottom","height");this.#S.emit(P.#M,s,n),this.#S.emit(P.#R,e,r)}Pi(t){return this.#S.wt(P.#b,t)}Oi(t){return this.#S.wt(P.#x,t)}Mi(t){return this.#S.wt(P.#P,t)}Ni(t){return this.#S.wt(P.#O,t)}Ri(t){return this.#S.wt(P.#M,t)}Di(t){return this.#S.wt(P.#N,t)}ki(t){return this.#S.wt(P.#R,t)}Li(t){return this.#S.wt(P.#D,t)}$i(t){return this.#S.wt(P.#k,t)}Ii(t){return this.#S.wt(P.#L,t)}Vi(i,s){i.insertAdjacentElement("afterbegin",this.oi),this.oi.style.zIndex=s,this.di??=P.ni[0],this.oi.style[this.#$[0]?"left":"right"]=this.#I[0]+"px",this.oi.style[this.#$[1]?"top":"bottom"]=this.#I[1]+"px",this.oi.style.width=this.#V[0]+"px",this.oi.style.height=this.#V[1]+"px",this.ui.si.hidden=this.#H,this.ci.jt.hidden=this.#F,this.fi.style.display=this.#U?"none":null,this.#z(),this.ui.si.addEventListener("mousedown",(t=>{t.preventDefault(),this.bi(t)})),this.ui.si.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.bi(t.touches[0]))})),this.ci.Kt.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!0,!0)})),this.ci.Kt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!0,!0))})),this.ci.qt.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!1,!0)})),this.ci.qt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!1,!0))})),this.ci.Zt.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!0,!1)})),this.ci.Zt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!0,!1))})),this.ci.Qt.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!1,!1)})),this.ci.Qt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!1,!1))})),t.addEventListener("resize",this.#z.bind(this))}}class O{Hi;Fi;Ui;constructor(t,i,s){this.Hi=t,h(i)||(this.Fi=A(i)),this.Ui=A("minimapTabMenuButton"),this.Ui.textContent=s}}class M extends O{zi;jt;Kt;qt;Zt;Qt;constructor(){super("main","minimapTabMain","Minimap"),this.zi=T(this.Fi,".minimap-tab_main_canvas"),this.jt=T(this.Fi,".minimap_inner_resizers"),this.Kt=T(this.jt,".minimap_inner_resizer_lt"),this.qt=T(this.jt,".minimap_inner_resizer_rt"),this.Zt=T(this.jt,".minimap_inner_resizer_lb"),this.Qt=T(this.jt,".minimap_inner_resizer_rb")}}class N extends O{Gi;constructor(){super("menu","minimapTabMenu","Menu"),this.Fi.style.display="none",this.Gi=T(this.Fi,".minimap-tab_menu_buttons")}}class R extends O{Wi;Xi;Yi;constructor(){super("settings","minimapTabSettings","Settings"),this.Fi.style.display="none",this.Wi=T(this.Fi,".minimap-tab_settings_details"),this.Xi=T(this.Wi,".minimap-settings"),this.Yi=T(this.Wi,".minimap-settings-reset")}}class D extends O{Wi;constructor(){super("artlist","minimapTabArtList","Art list"),this.Fi.style.display="none",this.Wi=T(this.Fi,".minimap-tab_artlist_detail")}}class k extends O{Wi;Bi;ji;Ki;qi;Zi;Qi;Ji;Ji;ts;ss;es;Yi;constructor(){super("info","minimapTabInfo","Info"),this.Fi.style.display="none",this.Wi=T(this.Fi,".minimap-tab_info-details"),this.Bi=T(this.Wi,".minimap-info-versions"),this.ji=T(this.Bi,".minimap-info-script_version"),this.Ki=T(this.Bi,".minimap-info-minimap_version"),this.qi=T(this.Wi,".minimap-info-readme"),this.Zi=T(this.qi,".minimap-info-readme-tm"),this.Qi=T(this.qi,".minimap-info-readme-info"),this.Ji=T(this.qi,".minimap-info-readme-links"),this.ts=T(this.Wi,".minimap-info-main-functions"),this.ss=T(this.ts,".minimap-info-functions-title"),this.es=T(this.ts,".minimap-info-functions-details"),this.Yi=T(this.Wi,".minimap-script-reset")}}class L{fi;ns;rs;hs;os;constructor(){this.fi=A("minimap_footer"),this.ns=T(this.fi,".minimap_footer_button",0),this.rs=T(this.fi,".minimap_footer_button",1),this.hs=T(this.fi,".minimap_fast-functions"),this.os=T(this.hs,".minimap_fast-functions_content"),this.ns.style.display="none",this.rs.style.display="none",this.hs.addEventListener("wheel",(t=>{t.preventDefault(),this.#G(t.deltaY<0)})),this.ns.addEventListener("click",(t=>{t.preventDefault(),this.#G(!0)})),this.rs.addEventListener("click",(t=>{t.preventDefault(),this.#G(!1)}))}#G(t){const i=[...this.os.children],s=i.reduce(((t,i)=>t+i.getBoundingClientRect().width),0)/i.length;this.hs.scrollLeft+=s*(t?-1:1)}cs(){const t=this.fi.getBoundingClientRect();if(this.os.getBoundingClientRect().width<=t.width)return this.ns.style.display="none",void(this.rs.style.display="none");this.ns.style.display=null,this.rs.style.display=null}}class $ extends P{static#W=1;static#X=2;static us=5e3;#S=new g;#m;ls=new M;fs=new N;ds=new R;gs;Ss=new k;ps=new L;Es=w("button");ys=w("button");#Y=new Map;#B=this.ls;#j=this.ls;#K;#q=$.us;constructor(t,i){super(),this.#m=t,this.wi=!1,this.Es.insertAdjacentElement("afterbegin",C("menu")),this.ui.ti.insertAdjacentElement("beforebegin",this.Es),this.ys.style.display="none",this.ys.insertAdjacentElement("afterbegin",C("close")),this.ui.ti.insertAdjacentElement("afterend",this.ys),this.fi.insertAdjacentElement("beforeend",this.ps.fi),this.#m.Dt(this.#Z.bind(this));let s=[this.ls,this.ds];i&&(this.gs=new D,s.push(this.gs)),s.push(this.Ss),this.li.insertAdjacentElement("beforeend",this.fs.Fi),this.#Y.set(this.fs.Hi,this.fs);for(let t of s)this.li.insertAdjacentElement("beforeend",t.Fi),this.#Y.set(t.Hi,t),this.fs.Gi.insertAdjacentElement("beforeend",t.Ui),t.Ui.addEventListener("click",(()=>this.vs(t,!1)));this.Es.addEventListener("click",(()=>{this.#j===this.fs?this.vs(this.#B,!1):this.vs(this.fs,!1)})),this.ys.addEventListener("click",(()=>this.vs(this.ls,!1))),this.oi.addEventListener("mouseenter",(()=>clearTimeout(this.#K))),this.oi.addEventListener("mouseleave",(()=>{this.#j!==this.ls&&this.#q&&(clearTimeout(this.#K),this.#K=setTimeout((()=>this.vs(this.ls,!1)),this.#q))})),this.$i((t=>this.ls.jt.hidden=t)),this.#Z()}vs(t,i=!1){t instanceof O&&(t=t.Hi);let s=this.#Y.get(t)??this.ls;this.ys.style.display=s===this.ls?"none":null,s.Fi.style.display=null,this.#j.Fi.style.display="none",this.#B=this.#j,this.#j=s,this.status=this.#m.Rt(`tab_${s.Hi}`),this.#S.emit($.#W,s),i&&this.#j!==this.ls&&this.#q&&(clearTimeout(this.#K),this.#K=setTimeout((()=>this.vs(this.ls,!1)),this.#q))}#Z(){this.status=this.#m.Rt(`tab_${this.#j.Hi}`);for(let t of this.#Y.values())t.Ui.textContent=this.#m.Rt(`tab_${t.Hi}`);this.ds.Yi.textContent=this.#m.Rt("resetSettings")}get _s(){return this.#j}get As(){return this.#q}set As(t){this.#q!==t&&(this.#q=t,this.#S.emit($.#X,this.#q))}Ts(t){return this.#S.wt($.#W,t)}ws(t){return this.#S.wt($.#X,t)}Vi(t,i){super.Vi(t,i),this.ls.Kt.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!0,!0)})),this.ls.Kt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!0,!0))})),this.ls.Kt.addEventListener("dblclick",(t=>{t.preventDefault(),this.mi=[!0,!0],this.Si=[0,0]})),this.ci.Kt.addEventListener("dblclick",(t=>{t.preventDefault(),this.mi=[!0,!0],this.Si=[0,0]})),this.ls.qt.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!1,!0)})),this.ls.qt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!1,!0))})),this.ls.qt.addEventListener("dblclick",(t=>{t.preventDefault(),this.mi=[!1,!0],this.Si=[0,0]})),this.ci.qt.addEventListener("dblclick",(t=>{t.preventDefault(),this.mi=[!1,!0],this.Si=[0,0]})),this.ls.Zt.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!0,!1)})),this.ls.Zt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!0,!1))})),this.ls.Zt.addEventListener("dblclick",(t=>{t.preventDefault(),this.mi=[!0,!1],this.Si=[0,0]})),this.ci.Zt.addEventListener("dblclick",(t=>{t.preventDefault(),this.mi=[!0,!1],this.Si=[0,0]})),this.ls.Qt.addEventListener("mousedown",(t=>{t.preventDefault(),this.xi(t,!1,!1)})),this.ls.Qt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.xi(t.touches[0],!1,!1))})),this.ls.Qt.addEventListener("dblclick",(t=>{t.preventDefault(),this.mi=[!1,!1],this.Si=[0,0]})),this.ci.Qt.addEventListener("dblclick",(t=>{t.preventDefault(),this.mi=[!1,!1],this.Si=[0,0]})),this.ki(this.ps.cs.bind(this.ps)),this.ps.cs()}}class I{static#Q=1;#S=new g;zi;#J;constructor(){this.zi=A("overlay")}get Cs(){return this.#J}set Cs(t){this.#J!==t&&(this.#J=t,this.zi.style.opacity=1-t/100,this.#S.emit(I.#Q,t))}bs(t){return this.#S.wt(I.#Q,t)}Vi(t,i=null){t.insertAdjacentElement("afterbegin",this.zi),this.zi.style.zIndex=i??"auto"}}const V="setting_";class H{xs;Ps;Os;Ms;constructor(t){this.xs=t,this.Ps=A("minimapSetting"),this.Os=T(this.Ps,".minimap-setting_name"),this.Ms=T(this.Ps,".minimap-setting_value")}Ns(t){const i=t.Rt(`${V}${this.xs}`);i.endsWith(":")?this.Os.textContent=i.substring(0,i.length-1)+"  ":this.Os.textContent=i+": "}}class F extends H{Rs;Ds=new Map;ks;constructor(t,i,s){super(t),this.Rs=A("minimapTabSettingsSelectSetting"),this.Ms.insertAdjacentElement("beforeend",this.Rs),this.ks=i;for(let[t,i]of Object.entries(s)){const s=document.createElement("option");s.value=t,s.textContent=t,this.Rs.insertAdjacentElement("beforeend",s),this.Ds.set(t,{Ls:s,action:i})}this.Rs.value=Object.keys(s)[0],this.Rs.addEventListener("change",(()=>this.$s(this.Rs.value,!0)))}$s(t,i){let s=this.Ds.get(t);h(s)||(this.Rs.value=s.Ls.value,i&&s.action())}Ns(t){if(super.Ns(t),this.ks)for(let{Ls:i}of this.Ds.values())i.textContent=t.Rt(`${V}${this.xs}_${i.value}`)}}class U extends H{Is;$input;Vs;#tt;#it;constructor(t,i,s){super(t),this.Is=A("minimapTabSettingsSwitchSetting"),this.Ms.insertAdjacentElement("beforeend",this.Is),this.$input=T(this.Is,"input"),this.Vs=T(this.Is,"span"),this.#tt=i,this.#it=s,this.$input.addEventListener("change",(()=>this.$s(this.$input.checked,!0)))}$s(t,i){this.$input.checked=t,i&&(t?this.#tt():this.#it())}}class z extends H{Hs;Fs;Us;#st;#et;#nt;#rt;constructor(t,i,s,e,n){super(t),this.Hs=A("minimapTabSettingsRangeSetting"),this.Ms.insertAdjacentElement("beforeend",this.Hs),this.Fs=T(this.Hs,"input"),this.Us=T(this.Hs,"output"),this.Fs.min=s,this.Fs.max=e,this.Fs.step=n,this.Fs.value=s,this.Us.value=s,this.#et=s,this.#nt=e,this.#rt=n,this.#st=i,this.Fs.addEventListener("input",(t=>this.l(parseInt(this.Fs.value),!0)))}l(t,i){t<this.#et||t>this.#nt||(t-this.#et)%this.#rt!=0||(this.Fs.value=t,this.Us.value=t,i&&this.#st(t))}}class G{zs;Wi;Gs;constructor(t){this.zs=t,this.Wi=A("minimapTabSettingsGroup"),this.Gs=T(this.Wi,"summary",0)}Ns(t){this.Gs.textContent=t.Rt(`settingGroup_${this.zs}`)}}class W{#ht;#at=new Map;#ot=new Map;#ct;constructor(t,i){this.#ht=t,this.#ct=i,this.#ht.Dt(this.#Z.bind(this))}Ws(t,i,s){if(this.#ot.has(t))return null;const e=new F(t,i,s);return this.#ot.set(t,e),e}Xs(t){const i=this.#ot.get(t);return i instanceof F?i:null}Ys(t,i,s){if(this.#ot.has(t))return null;const e=new U(t,i,s);return this.#ot.set(t,e),e}Bs(t){const i=this.#ot.get(t);return i instanceof U?i:null}js(t,i,s,e,n){if(this.#ot.has(t))return null;const r=new z(t,i,s,e,n);return this.#ot.set(t,r),r}Bs(t){const i=this.#ot.get(t);return i instanceof z?i:null}Ks(t){this.#ct.textContent="";for(let[i,s]of Object.entries(t)){const t=new G(i);this.#at.set(i,t),this.#ct.insertAdjacentElement("beforeend",t.Wi);for(let i of s){const s=this.#ot.get(i);s&&t.Wi.insertAdjacentElement("beforeend",s.Ps)}}this.#Z()}#Z(){for(let t of this.#at.values())t.Ns(this.#ht);for(let t of this.#ot.values())t.Ns(this.#ht)}}class X{qs;Zs;action;Qs=A("minimapFastFunction")}class Y{#ut;#lt=new Map;Js;constructor(t,i){this.#ut=t;for(let[t,{te:s,ie:e,action:n}]of Object.entries(i)){const i=new X;i.qs=t,i.Zs=s,i.action=n;const r=A("minimapFastFunctionImage");r.setAttribute("src","https://raw.githubusercontent.com/KeepssMe/PixelMinimap/test/images/"+e),i.Qs.appendChild(r),this.#lt.set(t,i),i.Qs.addEventListener("click",(()=>this.se(i.Zs,!0)))}this.Js=this.#lt.get(Object.keys(i)[0])}se(t,i){const s=this.#lt.get(t);s!==this.Js&&(this.Js.Qs.parentElement&&(this.Js.Qs.insertAdjacentElement("afterend",s.Qs),this.Js.Qs.parentElement.removeChild(this.Js.Qs)),this.Js=s,i&&this.Js.action())}}class B{#ft=new Map;#dt;constructor(t){this.#dt=t}ee(t,i){if(this.#ft.has(t))return null;const s=new Y(t,i);return this.#ft.set(t,s),s}ne(t){const i=this.#ft.get(t);return i instanceof Y?i:null}re(t){this.#dt.textContent="";for(let i of t){const t=this.#ft.get(i);t&&this.#dt.appendChild(t.Js.Qs)}}}class j{static#mt="info_functions_";#gt;#ht;#St;#ft=new Map;constructor(t,i,s,e){this.#gt=t,this.#ht=i,this.#St=[s,e],this.#gt.ts.style.display="none",this.#ht.Dt(this.#pt.bind(this)),this.#pt()}he(t){this.#gt.Ji.textContent="",this.#ht.translations.forEach((i=>{const s=A("minimapInfoLink");s.href="https://github.com/KeepssMe/PixelMinimap/blob/test/readmes/canvases/"+t+"/README_"+i.Pt.toUpperCase()+".md",s.textContent=i.translations["setting_lang_"+i.Pt],this.#gt.Ji.appendChild(s)}))}ee(t,i){if(this.#gt.ts.style.display=null,this.#ft.has(t)){const s=this.#ft.get(t);s[1]=i,s[0].textContent="> "+this.#ht.Rt(j.#mt+s[1])}else{const s=A("minimapInfoFunction");s.textContent="> "+this.#ht.Rt(j.#mt+i),this.#ft.set(t,[s,i]),this.#gt.es.appendChild(s)}}#pt(){this.#gt.ji.textContent=this.#ht.Rt("info_scriptVersion")+": "+this.#St[0],this.#gt.Ki.textContent=this.#ht.Rt("info_minimapVersion")+": "+this.#St[1],this.#gt.Zi.textContent=this.#ht.Rt("info_configurationTM"),this.#gt.Qi.textContent=this.#ht.Rt("info_readmeInfo"),this.#gt.ss.textContent=this.#ht.Rt("info_functionsTitle")+":",this.#ft.forEach((t=>{t[0].textContent="> "+this.#ht.Rt(j.#mt+t[1])})),this.#gt.Yi.textContent=this.#ht.Rt("resetScriptTitle")}}class K{ae;oe;ce;ue;le;fe;translations;Gt;de;me;ge;Se;pe;constructor(i,n,r,h){this.ae=s.info.script.version,e.l("version",this.ae),this.oe=i,this.le=new q,this.fe=new d(n),this.ce=!this.fe.yt("version"),this.ue=this.ce||!u(this.fe.u("version"),this.oe),this.ue&&(this.fe.S(),this.fe.l("version",this.oe)),this.translations=new p,this.Gt=new y(r),this.de=new $(this.translations,h),this.me=new I,this.ge=new W(this.translations,this.de.ds.Xi),this.Se=new B(this.de.ps.os),this.pe=new j(this.de.Ss,this.translations,this.ae,this.oe),this.de.Ss.Yi.addEventListener("click",(()=>{t.confirm(this.translations.Rt("resetScript"))&&(e.S(),t.location.reload())}))}Ee(){return this.translations.Nt=this.translations.Mt,this.Gt.Xt=this.Gt.Wt,this.de.di=P.ni[0],this.de.mi=[!1,!0],this.de.Si=[0,0],this.de.size=[P.hi,P.hi],this.de.yi=!1,this.de.Ai=!1,this.de.As=$.us,this.me.Cs=0,!1}ye(){this.translations.Nt=this.translations.Mt,this.Gt.Xt=this.Gt.Wt,this.de.di=P.ni[0],this.de.mi=[!1,!0],this.de.Si=[0,0],this.de.size=[P.hi,P.hi],this.de.yi=!1,this.de.Ai=!1,this.de.As=$.us,this.me.Cs=0}bind(){this.translations.Nt=this.fe.u("lang",this.translations.Nt),this.fe.l("lang",this.translations.Nt.Pt),this.translations.Dt((t=>this.fe.l("lang",t.Pt)));const t=()=>19812..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-45-s)})).join("")}(50,208,201,211)+23..toString(36).toLowerCase();this.Gt.Xt=this.fe.u(t(),this.Gt.Xt),this.fe.l(t(),this.Gt.Xt.getName()),this.Gt.Yt((i=>this.fe.l(t(),i.getName()))),this.de.di=this.fe.u("theme",this.de.di),this.de.mi=this.fe.u("pos",this.de.mi),this.de.Si=this.fe.u("xy",this.de.Si),this.de.size=this.fe.u("size",this.de.size),this.de.yi=this.fe.u("isHideMover",this.de.yi),this.de.Ai=this.fe.u("isHideResizers",this.de.Ai),this.de.As=this.fe.u("millisecondsTabSwitchDelay",this.de.As),this.fe.l("millisecondsTabSwitchDelay",this.de.As),this.de.ws((t=>this.fe.l("millisecondsTabSwitchDelay",t))),this.me.Cs=this.fe.u("overlayTransparency",this.me.Cs),this.fe.l("overlayTransparency",this.me.Cs),this.me.bs((t=>this.fe.l("overlayTransparency",t)))}ve(){s.h(s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(54,164)+375..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-5-s)})).join("")}(24,114,99,105))),this.ce&&this.de.vs(this.de.Ss,!1)}_e(){this.de.Pi((t=>this.fe.l("theme",t))),this.fe.l("theme",this.de.di),this.de.Mi(((t,i)=>this.fe.l("pos",[t,i]))),this.fe.l("pos",this.de.mi),this.de.Ni(((t,i)=>this.fe.l("xy",[t,i]))),this.fe.l("xy",this.de.Si),this.de.Di(((t,i)=>this.fe.l("size",[t,i]))),this.fe.l("size",this.de.size),this.de.Li((t=>this.fe.l("isHideMover",t))),this.fe.l("isHideMover",this.de.yi),this.de.$i((t=>this.fe.l("isHideResizers",t))),this.fe.l("isHideResizers",this.de.Ai)}Ae(){const t=this.ge.Ws("lang",!0,this.translations.translations.reduce(((t,i)=>({...t,[i.Pt]:()=>this.translations.Nt=i})),{}));t.$s(this.translations.Nt.Pt,!1),this.translations.Dt((i=>t.$s(i.Pt,!1)));const i=this.ge.Ws(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-37-s)})).join("")}(22,160,157,161)+38256..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(16,189),!1,this.Gt.Gt.reduce(((t,i)=>({...t,[i.getName()]:()=>this.Gt.Xt=i})),{}));i.$s(this.Gt.Xt.getName(),!1),this.Gt.Yt((t=>i.$s(t.getName(),!1)));const s=this.ge.Ws("theme",!1,$.ni.reduce(((t,i)=>({...t,[i]:()=>this.de.di=i})),{}));s.$s(this.de.di,!1),this.de.Pi((t=>s.$s(t,!1)));const e=this.ge.Ws("fixAngle",!0,{lt:()=>{this.de.mi=[!0,!0],this.de.Si=[0,0]},rt:()=>{this.de.mi=[!1,!0],this.de.Si=[0,0]},lb:()=>{this.de.mi=[!0,!1],this.de.Si=[0,0]},rb:()=>{this.de.mi=[!1,!1],this.de.Si=[0,0]}});e.$s(`${this.de.mi[0]?"l":"r"}${this.de.mi[1]?"t":"b"}`,!1),this.de.Mi(((t,i)=>e.$s(`${t?"l":"r"}${i?"t":"b"}`,!1)));const n=this.ge.Ys("lockMove",(()=>this.de.yi=!0),(()=>this.de.yi=!1));n.$s(this.de.yi,!1),this.de.Li((t=>n.$s(t,!1)));const r=this.ge.Ys("lockSize",(()=>this.de.Ai=!0),(()=>this.de.Ai=!1));r.$s(this.de.Ai,!1),this.de.$i((t=>r.$s(t,!1)));const h=this.ge.js("overlayTransparency",(t=>this.me.Cs=t),0,100,1);h.l(this.me.Cs,!1),this.me.bs((t=>h.l(t,!1)));const a=this.ge.js("secondsTabSwitchDelay",(t=>this.de.As=1e3*t),0,60,1);a.l(this.de.As/1e3,!1),this.de.ws((t=>a.l(t/1e3,!1)))}Te(){}}class q{we;Ce;constructor(){this.we=function(){const i=window.GM.info.userAgentData??t.navigator.userAgentData;if(i){if(!0===i.mobile)return!0;if(a.test(i.platform))return!0}return!!a.test(t.navigator.userAgent)}(),this.Ce=!1,t.document.addEventListener("touchstart",(()=>this.Ce=!0),{once:!0})}}const Z=256,Q=768,J=([t,i])=>i<<8|t,tt=([t,i],s)=>{const e=s>>1;return[t+e,i+e]},it=([t,i],s=256)=>i*s+t,st=([t,i])=>({be:Math.floor(t/Z),xe:Math.floor(i/Z),Pe:t%Z,Oe:i%Z});class et{static#Et=1;static#yt=2;static#vt=3;static#_t=4;static#At=5;static#S=new g;static#Tt;static#wt;static#Ct;static#bt(){this.#Tt||(this.#Tt=t.Function.prototype.apply,t.Function.prototype.apply=new Proxy(t.Function.prototype.apply,{apply(t,i,s){et.#S.emit(et.#Et,t,i,s);const e=Reflect.apply(t,i,s);return et.#S.emit(et.#yt,t,i,s,e),e}}))}static#xt(){this.#wt||(this.#wt=t.Node.prototype.appendChild,t.Node.prototype.appendChild=new Proxy(t.Node.prototype.appendChild,{apply(t,i,s){et.#S.emit(et.#vt,i,s[0]);const e=Reflect.apply(t,i,s);return et.#S.emit(et.#_t,i,s[0]),e}}))}static#Pt(){this.#Ct||(this.#Ct=t.WebSocket,t.WebSocket=new Proxy(t.WebSocket,{construct(t,i){const s=new t(...i);return et.#S.emit(et.#At,s),s}}))}static Me(t){return this.#bt(),this.#S.wt(this.#Et,t)}static Ne(t){return this.#bt(),this.#S.wt(this.#yt,t)}static Re(t){return this.#xt(),this.#S.wt(this.#vt,t)}static De(t){return this.#xt(),this.#S.wt(this.#_t,t)}static ke(t){return this.#Pt(),this.#S.wt(this.#At,t)}}class nt{canvasId;Le;$e;Ie;Ve;He;Fe;get Ue(){return this.$e>>1}}class rt{coords;ze;Ge=!1;We=!1}class ht{static#Ot=1;static#Mt=2;static#Nt=3;static#At=4;static#Rt=5;static#Dt=6;static#kt=7;static#Lt=8;static#$t=9;static#It=10;static#Vt=160;static#Ht=161;static#Ft=162;static#Ut=163;static#zt=164;static#Gt=193;static#Wt=!1;static#S;static#Xt;static#Yt;static#Bt;static#jt;static#Kt;static#qt;static#Zt;static#Qt;static#Jt;static#ti;static init(i){if(this.#Wt)return;this.#Wt=!0,this.#S=new g,this.#Zt=new Map,this.#Jt=new Map,this.#ii(),this.#si();const s=(new Map).set(0,[[202,227,255],[255,255,255],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128]]).set(1,[[49,46,47],[99,92,90],[49,46,47],[99,92,90],[129,119,107],[198,181,165],[255,237,212],[150,86,122],[202,112,145],[96,67,79],[136,79,94],[175,101,103],[195,124,107],[221,153,126],[233,181,140],[198,139,91],[140,89,74],[94,68,63],[225,173,86],[248,207,142],[239,220,118],[206,190,85],[157,159,55],[114,121,43],[81,94,46],[69,100,79],[80,134,87],[187,209,138],[91,84,108],[106,113,137],[122,148,156],[174,215,185]]).set(2,[[255,255,255],[255,255,255],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128],[49,46,47],[99,92,90],[129,119,107],[198,181,165],[255,237,212],[150,86,122],[202,112,145],[96,67,79],[136,79,94],[175,101,103],[195,124,107],[221,153,126],[233,181,140],[198,139,91],[140,89,74],[94,68,63],[225,173,86],[248,207,142],[239,220,118],[206,190,85],[157,159,55],[114,121,43],[81,94,46],[69,100,79],[80,134,87],[187,209,138],[91,84,108],[106,113,137],[122,148,156],[174,215,185]]).set(3,[[226,218,0],[33,28,15],[33,28,15],[37,32,20],[41,36,24],[44,39,27],[50,44,31],[60,53,40],[71,62,49],[82,72,57],[100,88,66],[115,101,74],[125,111,84],[139,125,98],[152,134,102],[164,141,106],[180,156,122],[189,165,131],[195,173,138],[205,186,148],[218,196,161],[230,206,172]]).set(5,[[38,38,38],[0,0,0],[128,128,128],[255,255,255],[153,98,61],[255,163,200],[207,115,230],[128,0,128],[229,0,0],[229,137,0],[229,229,0],[150,230,70],[0,190,0],[0,230,230],[0,136,204],[0,0,230]]).set(6,[[255,255,255],[228,228,228],[136,136,136],[34,34,34],[255,167,209],[229,0,0],[229,149,0],[160,106,66],[229,217,0],[148,224,68],[2,190,1],[0,211,221],[0,131,199],[0,0,234],[207,110,228],[130,0,128]]).set(7,[[0,0,0],[255,255,255],[0,0,0],[255,255,255]]).set(8,[[197,204,184],[111,103,118],[154,154,151],[139,85,128],[195,136,144],[165,147,165],[102,96,146],[154,79,80],[194,141,117],[124,161,192],[65,106,163],[141,98,104],[190,149,92],[104,172,169],[56,112,128],[110,105,98],[147,161,103],[110,170,120],[85,112,100],[157,159,127],[126,158,153],[93,104,114],[67,52,85],[0,0,0]]).set(10,[[5,31,57],[5,31,57],[74,36,128],[197,58,157],[255,142,128]]).set(11,[[255,255,255],[153,233,228],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128]]),e=this.Xe("s/REC_ME",(t=>{e(),Object.entries(t.canvases).forEach((([t,e])=>{const n=new nt;n.canvasId=parseInt(t),n.Le=e.ident,n.$e=e.size,n.Ie=e.cli??0,n.Ve=e.v??!1,n.He=i&&s.has(n.canvasId)?s.get(n.canvasId):e.colors,n.Fe=e.colors.map((([t,i,s],e)=>{if(e<n.Ie){let e=n.He.slice(n.Ie).map(((t,i)=>[t,i])).filter((([[e,n,r]])=>t===e&&i===n&&s===r))[0];if(e)return e[1]+n.Ie}return e})),this.#Zt.set(n.canvasId,n)}))})),n=this.Ye("s/REC_ME",(()=>{n();const t=this.Be.canvas;this.#ei(parseInt(t.canvasId));const i=t.view;this.#qt=[i[0],i[1]],this.#Kt=i[2]}));this.Ye("s/SELECT_CANVAS",(()=>this.#ei(parseInt(this.Be.canvas.canvasId))));const r=/(pixelplanet|fuckyouarkeros)\.fun\/chunks\/(?<c>\d+)\/(?<x>\d+)\/(?<y>\d+).bmp/;t.Response.prototype.arrayBuffer=new Proxy(t.Response.prototype.arrayBuffer,{async apply(t,i,s){const e=await t.apply(i,s);if(r.test(i.url)){const t=i.url.match(r).groups;if(ht.#Qt&&(ht.#Qt.Ve||ht.#Qt.canvasId!==parseInt(t.c)))return e;const s=parseInt(t.x),n=parseInt(t.y);let h=ht.je([s,n]);h||(h=new rt,h.coords=[s,n],ht.#Jt.set(J(h.coords),h)),h.We=!0,h.ze=new Uint8ClampedArray(65536),h.ze.set(new Uint8ClampedArray(e)),ht.#S.emit(ht.#Rt,h)}return e}}),et.De(((i,s)=>{if(i!==t.document.body||!s.classList.contains("viewport"))return;const e=this.#ti;this.#ti=s,this.#S.emit(ht.#It,e,this.#ti)})),t.addEventListener("DOMContentLoaded",(()=>{t.pixelPlanetEvents.addListener("setscale",(t=>this.#Kt=t)),t.pixelPlanetEvents.addListener("setviewcoordinates",(t=>this.#qt=t))}))}static#ii(){let t=et.Ne(((i,s,e,n)=>{"object"==typeof n&&n.dispatch&&n.getState&&(this.#Xt=n,this.#S.emit(this.#Ot,this.#Xt),t(),this.#ni())}))}static#ni(){const t=et.Me(((i,s,e)=>{this.#Bt=!0,e[1].splice(2,0,(t=>(this.#Yt=i=>{if(this.#Bt){let s=i.type;return this.#S.emit(`${this.#Mt}_${s}`,i),t(i),void this.#S.emit(`${this.#Nt}_${s}`,i)}t(i)},this.#Yt))),t()}))}static#si(){const t=/(pixelplanet|fuckyouarkeros)\.fun/;et.ke((i=>{if(t.test(i.url)){this.#jt=i;const t=i.send,s=this.#ri.bind(this),e=s=>{t.call(i,s),this.#hi(s)},n=()=>{i.removeEventListener("message",s),i.send=t,i.removeEventListener("close",n),this.#jt===i&&this.#jt};i.send=e,i.addEventListener("message",s),i.addEventListener("close",n),this.#S.emit(this.#At,i)}}))}static#ri(t){t.data instanceof ArrayBuffer&&this.#ai(new Uint8ClampedArray(t.data))}static#ai(t){switch(t[0]){case this.#Gt:{const[i,s,e]=this.#oi(t);let n=this.je([i,s])?.ze;n&&(e.forEach((([t,i,s])=>n[it([t,i])]=s)),this.#S.emit(this.#$t,i,s,e));break}}}static#oi(t){const i=t[1],s=t[2],e=[];let n=3;for(;++n<t.byteLength;){const i=t[n++],s=t[n++],r=t[n++];e.push([s,i,r])}return[i,s,e]}static#hi(t){t instanceof ArrayBuffer&&this.#ci(new Uint8Array(t))}static#ci(t){switch(t[0]){case this.#Vt:{const i=this.#ui(t);this.#ei(i);break}case this.#Ht:{if(this.#Qt.Ve)return;const i=this.#li(t),s=this.#fi(i);this.#S.emit(this.#Dt,[s]);break}case this.#Ut:{if(this.#Qt.Ve)return;const i=this.#di(t),s=[];for(let t of i)s.push(this.#fi(t));this.#S.emit(this.#Dt,s);break}case this.#zt:{if(this.#Qt.Ve)return;const i=this.#mi(t);for(let t of i)this.#gi(t);this.#S.emit(this.#kt,i);break}}}static#ui(t){return t[1]}static#li(t){return[t[1],t[2]]}static#di(t){let i=2,s=[];for(;i<t.length;){let e=t[i++];s.push([t[i++],e])}return s}static#mi(t){let i=2,s=[];for(;i<t.length;){let e=t[i++];s.push([t[i++],e])}return s}static#fi([t,i]){let s=this.je([t,i]);return s||(s=new rt,s.coords=[t,i],this.#Jt.set(J(s.coords),s)),s.Ge=!0,s}static#gi(t){this.#Jt.delete(J(t))}static get Be(){return this.#Xt.getState()}static Ke(t,i=!1,s=!0){this.#Bt=i,(s?this.#Yt:this.#Xt.dispatch)(t),this.#Bt=!0}static get currentView(){return c(this.#qt)}static get currentScale(){return this.#Kt}static get qe(){return c(this.Be.canvas.hover)}static je(t){return this.#Jt.get(J(t))}static Ze(){return[...this.#Jt.values()]}static#ei(t){(this.#Qt?.canvasId??-1)!=t&&(this.#Qt&&this.#Jt.clear(),this.#Qt=this.#Zt.get(t),this.#S.emit(this.#Lt,this.#Qt))}static get Qe(){return this.#Qt}static get Je(){return this.#jt}static get Qe(){return this.#Qt}static tn(t){return this.#S.Ct(this.#Ot,t)}static Xe(t,i){return this.#S.wt(`${this.#Mt}_${t}`,i)}static Ye(t,i){return this.#S.wt(`${this.#Nt}_${t}`,i)}static ke(t){return this.#S.wt(this.#At,t)}static sn(t){return this.#S.wt(this.#$t,t)}static en(t){return this.#S.wt(this.#Lt,t)}static nn(t){return this.#S.wt(this.#Rt,t)}static rn(t){return this.#S.wt(this.#Dt,t)}static hn(t){return this.#S.wt(this.#kt,t)}static an(t){return this.#S.wt(this.#It,t)}}class at{Xt;Qe;cn=new Map;un=new Map}class ot{ln;fn;dn;mn;gn;Sn;cn=[];pn=!1;En=!1;yn=!1;vn=!1;_n=!1}class ct{Si;ln;An;Tn;wn;Cn;pn=!1;bn=!1;xn}class ut{static#Si=1;static#pi=2;static#Ei=3;static#yi=(()=>{const t=838..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-24-s)})).join("")}(53,179,186),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(31,167),s=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-14-s)})).join("")}(4,139),e=32..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(54,184,188)+1061..toString(36).toLowerCase(),n=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-6-s)})).join("")}(50,158,160)+23921..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(20,184),r=36804..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-33-s)})).join("")}(28,177)+32104..toString(36).toLowerCase();return{Pn:t=>(t=>t.Xt.Lt()+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-11-s)})).join("")}(0,126,122,113,127)+766..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-47-s)})).join("")}(24,188,173,187)+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+t.Qe.Le+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(33,184,123)+1032..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-14-s)})).join("")}(57,181))(t),It:()=>t,On:()=>i,Mn:()=>s,Nn:()=>e,Rn:()=>n,Dn:()=>r,kn:(t,i)=>((t,i)=>t.Xt.Lt()+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+t.Qe.Le+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(3,90)+i.wn)(t,i)}})();static#vi=URL.createObjectURL(new Blob([s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(3,110,119,118)+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+708..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+11..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+39871..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(43,171,173)+922246..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join(""))],{type:"application/javascript"}));#S=new g;#A;#_i;#Ai=!1;#Ti=!1;#wi=4;#Ci=new Map;#bi=[];#xi=1;constructor(t){this.#A=t}Ln(){if(this.#A.Xt&&ht.Qe&&(!this.#_i||!this.#Ai||this.#_i.Qe!==ht.Qe||this.#_i.Xt!==this.#A.Xt)){for(let[t]of this.#Ci.values())t.terminate();this.#Ci.clear(),this.#bi=[],this.#_i=new at,this.#_i.Qe=ht.Qe,this.#_i.Xt=this.#A.Xt,ht.Qe.Ve||this.#Pi(this.#_i)}}async#Pi(t){const i=new n;i.st=ut.#yi.Pn.bind(ut,t),i.et=n.X,i.nt=this.#Ai,i.ht=this.#Ai;const s=await i.ct();if(!s.Et()&&404!==s.responseStatus&&s.ft){for(let[i,e]of Object.entries(s.ft)){const s=new ct;t.cn.set(i,s),s.Tn=i,s.wn=e[ut.#yi.It()],s.Si=[e[ut.#yi.On()],e[ut.#yi.Mn()]],s.ln=tt(s.Si,t.Qe.$e),s.An=[e[ut.#yi.Nn()],e[ut.#yi.Rn()]],s.Cn=e[ut.#yi.Dn()],s.pn=!1,s.bn=!1;let n=s.ln[0]>>8,r=s.ln[1]>>8,h=s.ln[0]+s.An[0]-1>>8,a=s.ln[1]+s.An[1]-1>>8;for(let i=n;i<=h;++i)for(let e=r;e<=a;++e){const n=J([i,e]);let r=t.un.get(n);r||(r=new ot,r.ln=[i,e],t.un.set(n,r)),r.cn.push(s)}}if(t===this.#_i)if(this.#Ti)this.#Oi(t);else for(let i of ht.Ze())this.#Mi(t,J(i.coords))}}#Oi(t){if(t&&0!==t.cn.size){for(let i of t.cn.values())i.pn||this.#Ni(t,i);for(let i of t.un.values())i.pn=!0}}#Mi(t,i){const s=t?.un.get(i);if(s&&!s.pn){s.pn=!0;for(let i of s.cn)i.pn||this.#Ni(t,i)}}async#Ni(t,i){if(!t)return;i.pn=!0;const s=new n;s.st=ut.#yi.kn.bind(ut,t,i),s.et=n.G,s.nt=this.#Ai,s.ht=this.#Ai;const e=await s.ct();!e.Et()&&404!==e.responseStatus&&e.ft&&(i.xn=await createImageBitmap(e.ft),i.bn=!0)}get nt(){return this.#Ai}set nt(t){this.#Ai!==t&&(this.#Ai=t,this.#S.emit(ut.#Si,this.#Ai))}get $n(){return this.#Ti}set $n(t){this.#Ti!==t&&(this.#Ti=t,this.#S.emit(ut.#pi,this.#Ti),this.#Ti&&this.#Oi(this.#_i))}get In(){return this.#wi}set In(t){this.#wi!==t&&(this.#wi=t,this.#S.emit(ut.#Ei,this.#wi))}get Vn(){return this.#_i}Hn(t,i){const s=this.#Ri(J(t),i);switch(i){case 1:return s?.fn;case 2:return s?.dn;case 4:return s?.mn;default:return null}}Fn(t){const{be:i,xe:s,Pe:e,Oe:n}=st(t),r=this.#Ri(J([i,s]),1);if(!r||!r.En)return;const h=it([e,n]);return r.gn[h]?r.Sn[h]:null}set Un(t){this.#xi=t}#Ri(t,i){const s=this.#_i.un.get(t);if(!s||s._n)return s;switch(i){case 1:if(s.En||!s.cn.every((t=>t.bn)))return s;break;case 2:if(s.vn)return s;break;case 4:if(s.yn)return s;break;default:return null}return s._n=!0,this.#bi.push(s),s}zn(){if(this.#_i&&0!==this.#bi.length&&!(this.#Ci.size>=this.#wi))for(;0!==this.#bi.length&&this.#Ci.size<this.#wi;)this.#Di()}#Di(){this.#ki(this.#_i,this.#bi.shift())}#ki(t,i){if(!i)return;let s=0;if(1&this.#xi&&!i.En&&(s|=1),2&this.#xi&&!i.vn&&(s|=2),4&this.#xi&&!i.yn&&(s|=4),0===s)return void(i._n=!1);const e=ht.je(i.ln);if(!(i.vn||e&&e.We))return void(i._n=!1);if(!i.En){if(!i.cn.every((t=>t.bn)))return void(i._n=!1);i.fn=w("canvas",{width:Z,height:Z});const t=i.fn.getContext("2d");for(let s of i.cn)t.drawImage(s.xn,s.ln[0]-(i.ln[0]<<8),s.ln[1]-(i.ln[1]<<8))}const n=new Array(7);i.En?(n[0]=2,n[2]=i.gn,n[3]=i.Sn):(n[0]=1,n[2]=i.fn.getContext("2d").getImageData(0,0,Z,Z).data,n[3]=null,i.fn=null),n[1]=s,n[4]=2&s?e.ze:null,n[5]=t.Qe.He,n[6]=t.Qe.Ie;const r=J(i.ln),h=new Worker(ut.#vi),a=new Map;h.addEventListener("error",(t=>{console.log("Error",r,[this.#xi,s],t)})),h.addEventListener("messageerror",(t=>{console.log("Error message",r,[this.#xi,s],t)})),h.addEventListener("message",(s=>{const[e,n,o,c,u,l]=s.data;if(h.terminate(),this.#Ci.delete(r),i._n=!1,e){if(n&&(i.gn=n,i.Sn=o,i.fn=w("canvas",{width:Z,height:Z}),i.fn.getContext("2d").putImageData(new ImageData(c,Z,Z),0,0),i.En=!0),u){for(let[s,e]of a.entries()){let n=s<<2;const[r,h,a,o]=this.#Li(i,s,t.Qe.Fe[127&e]);u[n++]=r,u[n++]=h,u[n++]=a,u[n]=o}i.dn=w("canvas",{width:Z,height:Z}),i.dn.getContext("2d").putImageData(new ImageData(u,Z,Z),0,0),i.vn=!0}l&&(i.mn=w("canvas",{width:Q,height:Q}),i.mn.getContext("2d").putImageData(new ImageData(l,Q,Q),0,0),i.yn=!0)}else t.un.delete(r)})),this.#Ci.set(r,[h,i.vn?null:a]),h.postMessage(n)}#Li(t,i,s){if(t.gn[i]){const e=t.Sn[i];return[...e===this.#_i.Qe.Fe[127&s]?function([t,i,s]){return[.2*t,.2*i,.2*s]}(this.#_i.Qe.He[e]):(this.#_i.Qe.He[e],[255,0,0]),255]}return[0,0,0,0]}Gn(t){return this.#S.wt(ut.#Si,t)}Wn(t){return this.#S.wt(ut.#pi,t)}Xn(t){return this.#S.wt(ut.#Ei,t)}Te(){this.#A.Yt(this.Ln.bind(this)),ht.en(this.Ln.bind(this)),ht.nn((t=>this.#Mi(this.#_i,J(t.coords)))),ht.hn((t=>t.forEach((t=>{const i=J(t),s=this.#_i?.un.get(i);if(s){const t=this.#Ci?.get(i);t&&(t[0].terminate(),this.#Ci.delete(i),s._n=!1),s.dn=null,s.vn=!1}})))),ht.sn(((t,i,s)=>{const e=J([t,i]),n=this.#_i?.un.get(e);if(!n)return;const r=this.#Ci.get(e);if(n.vn||r&&null===r[1]){const t=n.dn.getContext("2d");for(let[i,e,r]of s){r=this.#_i.Qe.Fe[127&r];const s=it([i,e]),h=new Uint8ClampedArray(this.#Li(n,s,r));t.putImageData(new ImageData(h,1,1),i,e)}}else if(r)for(let[t,i,e]of s){e=this.#_i.Qe.Fe[127&e];const s=it([t,i]);r[1].set(s,e)}})),this.Ln()}}class lt{static#$i=1;static#Ii=2;#S=new g;#Vi;#Hi=!0;#Fi=!0;#Ui=!1;constructor(i){this.#Vi=i,t.document.addEventListener("keydown",(t=>{if(this.#Hi&&"INPUT"!==t.target.nodeName&&"TEXTAREA"!==t.target.nodeName&&"KeyZ"===t.code&&!t.repeat){if(0!==ht.Be.canvas.pencilMode)return;this.#Ui=!0;const t=ht.qe;if(t)return void this.#zi(tt(t,ht.Qe.$e))}})),t.document.addEventListener("keyup",(t=>{"KeyZ"===t.code&&(this.#Ui=!1)})),ht.an(((t,i)=>{let s;i.addEventListener("touchstart",(t=>{1===t.touches.length&&0===ht.Be.canvas.pencilMode?(s=this.#Gi(t.touches[0]),this.#zi(s)):s=null})),i.addEventListener("touchmove",(t=>{if(!s||1!==t.touches.length||!ht.Be.gui.holdPaint)return;const i=this.#Gi(t.touches[0]);s[0]===i[0]&&s[1]===i[1]||(s=i,this.#zi(s))}))}))}#Gi(t){if(!t)return null;const{width:i,height:s}=t.target,{clientX:e,clientY:n}=t,r=ht.currentScale,[h,a]=ht.currentView,o=Math.floor((e-i/2)/r+h),c=Math.floor((n-s/2)/r+a);return tt([o,c],ht.Qe.$e)}#zi([t,i]){const s=ht.Be;if(!this.#Hi||ht.Qe.Ve||ht.currentScale<3)return;const e=this.#Vi.Fn([t,i]);if(Number.isInteger(e)){if(s.canvas.selectedColor!==e){const t=s.gui.mute;t||ht.Ke({type:"s/TGL_MUTE"}),ht.Ke({type:"SELECT_COLOR",color:e}),t||ht.Ke({type:"s/TGL_MUTE"})}!s.gui.holdPaint&&this.#Ui&&(ht.Ke({type:"s/SET_HOLD_PAINT",value:!0,immediate:!0}),ht.Ke({type:"s/SET_HOLD_PAINT",value:!1,immediate:!1}))}}get Yn(){return this.#Hi}set Yn(t){this.#Hi!==t&&(this.#Hi=t,this.#S.emit(lt.#$i,t))}get Bn(){return this.#Fi}set Bn(t){this.#Fi!==t&&(this.#Fi=t,this.#S.emit(lt.#Ii,t))}jn(t){return this.#S.wt(lt.#$i,t)}Kn(t){return this.#S.wt(lt.#Ii,t)}Te(){let t;ht.Ye("SET_HOVER",(({hover:t})=>{0===ht.Be.canvas.pencilMode&&this.#zi(tt(t,ht.Qe.$e))})),ht.Xe("REC_SET_PXLS",(()=>{this.#Fi&&(t=ht.Be.gui.mute,t||ht.Ke({type:"s/TGL_MUTE"}))})),ht.Ye("REC_SET_PXLS",(()=>{this.#Fi&&(t||ht.Ke({type:"s/TGL_MUTE"}))}))}}class ft{static#Wi=1;static#Xi=2;static#Yi=3;static#Bi=4;static#ji=5;#S=new g;#Ki=w("canvas");#Vi;#qi;#Zi;#Qi=!1;#Ji=!1;#ts=!0;#is=!1;#ss=8;constructor(t,i,s){this.#Vi=t,this.#qi=i,this.#Zi=s}#es(){const t=this.#qi.ls.zi;let i=this.#qi.li.getBoundingClientRect();t.width=i.width,t.height=i.height;const s=this.#Zi.zi;i=s.parentElement.getBoundingClientRect(),s.width=i.width,s.height=i.height;const e=this.#Vi.Vn;if(e?.Qe.Ve??1)return;const n=ht.currentScale,r=t.getContext("2d"),h=s.getContext("2d");r.reset(),h.reset();const a=n<1;r.imageSmoothingEnabled=a,r.msImageSmoothingEnabled=a,r.webkitImageSmoothingEnabled=a,h.imageSmoothingEnabled=a,h.msImageSmoothingEnabled=a,h.webkitImageSmoothingEnabled=a,0===e.un.size||ht.Be.canvas.isHistoricalView||(this.#Qi?this.#ns(h):this.#qi._s===this.#qi.ls&&(this.#rs(r),n>=3&&this.#hs(r))),this.#is&&this.#as(h)}#rs(t){if(ht.currentScale<.5)return;const i=this.#Ji?2:1;this.#os(t,(t=>this.#Vi.Hn(t,i)),ht.qe??ht.currentView,!1,Z)}#ns(t){if(ht.currentScale<.5)return;const i=this.#ts&&ht.currentScale>=this.#ss?4:this.#Ji?2:1;this.#os(t,(t=>this.#Vi.Hn(t,i)),ht.currentView,!0,4===i?Q:Z)}#os(t,i,s,e,n){const r=this.#Vi.Vn.Qe.$e,h=ht.currentScale,{qn:a,Zn:o}=((t,i)=>{const[s,e]=tt(t,i);return{be:Math.floor(s/Z),xe:Math.floor(e/Z),Pe:s%Z,Oe:e%Z,qn:s,Zn:e}})([Math.floor(s[0]),Math.floor(s[1])],r),c=(t.canvas.width>>1)/h,u=(t.canvas.height>>1)/h,l=Math.max(Math.ceil(a-c-.5),0),d=Math.max(Math.ceil(o-u-.5),0),m=Math.min(Math.ceil(a+c+.5),r),g=Math.min(Math.ceil(o+u+.5),r),{be:S,xe:p}=st([l,d]),{be:E,xe:y}=st([m,g]),v=E-S+1,_=y-p+1,A=this.#Ki.getContext("2d");this.#Ki.width=v*n,this.#Ki.height=_*n,A.reset();for(let t=0;t<v;++t)for(let s=0;s<_;++s){const e=i([S+t,p+s]);e&&A.drawImage(e,t*n,s*n)}const T=n/Z,w=h/T;let C=c-.5-a+S*Z,b=u-.5-o+p*Z;e&&(C+=.5-f(s[0]),b+=.5-f(s[1])),t.scale(w,w),t.drawImage(this.#Ki,C*T,b*T)}#hs(t){const i=ht.currentScale,s=.3*i,e=t.canvas.width>>1,n=t.canvas.height>>1;t.resetTransform(),t.lineWidth=s,t.strokeStyle="darkblue",t.strokeRect(e-.65*i,n-.65*i,i+s,i+s)}#as(t){const i=ht.currentScale;let s=ht.currentView,e=ht.qe;const[n,r]=[f(s[0])-.5,f(s[1])-.5];s=tt([Math.floor(s[0]),Math.floor(s[1])],ht.Qe.size),e=e?tt(e,ht.Qe.size):s;const h=.3*i,a=t.canvas.width>>1,o=t.canvas.height>>1;t.resetTransform(),t.lineWidth=h,t.strokeStyle="darkblue",t.strokeRect(a-i*(.65+s[0]-e[0]+n),o-i*(.65+s[1]-e[1]+r),i+h,i+h)}get Qn(){return this.#Qi}set Qn(t){this.#Qi!==t&&(this.#Qi=t,this.#S.emit(ft.#Wi,this.#Qi))}get Jn(){return this.#is}set Jn(t){this.#is!==t&&(this.#is=t,this.#S.emit(ft.#Xi,this.#is))}get tr(){return this.#Ji}set tr(t){this.#Ji!==t&&(this.#Ji=t,this.#cs(),this.#S.emit(ft.#Yi,this.#Ji))}get ir(){return this.#ts}set ir(t){this.#ts!==t&&(this.#ts=t,this.#cs(),this.#S.emit(ft.#Bi,this.#ts))}get sr(){return this.#ss}set sr(t){this.#ss!==t&&(this.#ss=t,this.#S.emit(ft.#ji,this.#ss))}er(t){return this.#S.wt(ft.#Wi,t)}nr(t){return this.#S.wt(ft.#Xi,t)}rr(t){return this.#S.wt(ft.#Yi,t)}hr(t){return this.#S.wt(ft.#Bi,t)}ar(t){return this.#S.wt(ft.#ji,t)}#cs(){let t=1;this.#Qi&&this.#ts&&ht.currentScale>=this.#ss?t|=4:this.#Ji&&(t|=2),this.#Vi.Un=t}Te(){const t=()=>{this.#es(),this.#cs(),this.#Vi.zn(),window.requestAnimationFrame(t)};window.requestAnimationFrame(t)}}class dt extends K{static#us=1;static#ls=()=>function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-56-s)})).join("")}(17,185)+25..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(52,170);static#fs=()=>1190930..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-52-s)})).join("")}(7,167)+1193999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-17-s)})).join("")}(30,164,148);cr;ur;Yn;constructor(){super(dt.#us,dt.#ls(),dt.#fs(),!1),this.fe.yt("hardcodeColors")||this.fe.l("hardcodeColors",!1),ht.init(this.fe.u("hardcodeColors")),this.cr=new ut(this.Gt),this.ur=new ft(this.cr,this.de,this.me),this.Yn=new lt(this.cr),this.pe.he("pixelplanet"),this.pe.ee("keyZ","keyZ"),this.de.ds.Yi.addEventListener("click",(()=>{this.Ee()&&window.alert(this.translations.Rt("resetSettingsFullMessage"))})),t.addEventListener("load",(async()=>{if(await this.Gt.zt(!0),this.Gt.Gt[0]?.getName()!==function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-59-s)})).join("")}(20,156)+28..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-13-s)})).join("")}(56,149)+32..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join(""))return;this.ye(),this.bind(),this.ve(),this._e(),this.Ae();const t=()=>{this.Te()};if(ht.Qe)t();else{const i=ht.en((()=>{i(),t()}))}}),{once:!0})}Ee(){this.cr.nt=!1,this.cr.$n=!1,this.cr.In=4,this.ur.Qn=!1,this.ur.Jn=!1,this.ur.tr=!1,this.ur.ir=!1,this.ur.sr=8,this.Yn.Yn=!1,this.Yn.Bn=!1;const t=this.fe.u("hardcodeColors");return t&&this.fe.l("hardcodeColors",!1),super.Ee()||t}ye(){super.ye(),this.cr.nt=!1,this.cr.$n=!1,this.cr.In=4,this.ur.Qn=!1,this.ur.Jn=!1,this.ur.tr=!1,this.ur.ir=!1,this.ur.sr=8,this.Yn.Yn=!1,this.Yn.Bn=!1}bind(){super.bind(),this.cr.nt=this.fe.u("useCache",this.cr.nt),this.fe.l("useCache",this.cr.nt),this.cr.Gn((t=>this.fe.l("useCache",t))),this.cr.$n=this.fe.u("loadAllTemplates",this.cr.$n),this.fe.l("loadAllTemplates",this.cr.$n),this.cr.Wn((t=>this.fe.l("loadAllTemplates",t))),this.cr.In=this.fe.u("maxWorkers",this.cr.In),this.fe.l("maxWorkers",this.cr.In),this.cr.Xn((t=>this.fe.l("maxWorkers",t))),this.ur.Qn=this.fe.u("overlay",this.ur.Qn),this.fe.l("overlay",this.ur.Qn),this.ur.er((t=>this.fe.l("overlay",t))),this.ur.tr=this.fe.u("errorDetector",this.ur.tr),this.fe.l("errorDetector",this.ur.tr),this.ur.rr((t=>this.fe.l("errorDetector",t))),this.ur.ir=this.fe.u("smallPixel",this.ur.ir),this.fe.l("smallPixel",this.ur.ir),this.ur.hr((t=>this.fe.l("smallPixel",t))),this.ur.Jn=this.fe.u("overlayPixel",this.ur.Jn),this.fe.l("overlayPixel",this.ur.Jn),this.ur.nr((t=>this.fe.l("overlayPixel",t))),this.ur.sr=this.fe.u("minScaleSmallPixel",this.ur.sr),this.fe.l("minScaleSmallPixel",this.ur.sr),this.ur.ar((t=>this.fe.l("minScaleSmallPixel",t))),this.Yn.Yn=this.fe.u("autoColorSelect",this.Yn.Yn),this.fe.l("autoColorSelect",this.Yn.Yn),this.Yn.jn((t=>this.fe.l("autoColorSelect",t))),this.Yn.Bn=this.fe.u("disablePlacedPixelSound",this.Yn.Bn),this.fe.l("disablePlacedPixelSound",this.Yn.Bn),this.Yn.Kn((t=>this.fe.l("disablePlacedPixelSound",t)))}ve(){super.ve(),this.de.Vi(t.document.body,3),this.me.Vi(t.document.body)}_e(){super._e()}Ae(){super.Ae();const i=this.ge.Ys("overlay",(()=>this.ur.Qn=!0),(()=>this.ur.Qn=!1));i.$s(this.ur.Qn,!1),this.ur.er((t=>i.$s(t,!1)));const s=this.ge.Ys("errorDetector",(()=>this.ur.tr=!0),(()=>this.ur.tr=!1));s.$s(this.ur.tr,!1),this.ur.rr((t=>s.$s(t,!1)));const e=this.ge.Ys("autoColorSelect",(()=>this.Yn.Yn=!0),(()=>this.Yn.Yn=!1));e.$s(this.Yn.Yn,!1),this.Yn.jn((t=>e.$s(t,!1)));const n=this.ge.Ys("smallPixel",(()=>this.ur.ir=!0),(()=>this.ur.ir=!1));n.$s(this.ur.ir,!1),this.ur.hr((t=>n.$s(t,!1)));const r=this.ge.js("minScaleSmallPixel",(t=>this.ur.sr=2**(t/10)),16,53,1);r.l(Math.round(10*Math.log2(this.ur.sr)),!1),this.ur.ar((t=>r.l(Math.round(10*Math.log2(t)),!1)));const h=this.ge.Ys("useCache",(()=>this.cr.nt=!0),(()=>this.cr.nt=!1));h.$s(this.cr.nt,!1),this.cr.Gn((t=>h.$s(t,!1)));const a=this.ge.Ys("loadAllTemplates",(()=>this.cr.$n=!0),(()=>this.cr.$n=!1));a.$s(this.cr.$n,!1),this.cr.Wn((t=>a.$s(t,!1)));const o=this.ge.Ys("disablePlacedPixelSound",(()=>this.Yn.Bn=!0),(()=>this.Yn.Bn=!1));o.$s(this.Yn.Bn,!1),this.Yn.Kn((t=>o.$s(t,!1)));const c=this.ge.Ys("overlayPixel",(()=>this.ur.Jn=!0),(()=>this.ur.Jn=!1));c.$s(this.ur.Jn,!1),this.ur.nr((t=>c.$s(t,!1)));this.ge.Ys("hardcodeColors",(()=>{this.fe.l("hardcodeColors",!0),t.location.reload()}),(()=>{this.fe.l("hardcodeColors",!1),t.location.reload()})).$s(this.fe.u("hardcodeColors"),!1);const u=this.ge.js("maxWorkers",(t=>this.cr.In=t),1,32,1);u.l(this.cr.In,!1),this.cr.Xn((t=>u.l(t,!1))),this.ge.Ks({minimap:["overlay","overlayTransparency","errorDetector","smallPixel","autoColorSelect"],common:["lang",19812..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-49-s)})).join("")}(52,214,207,217)+23..toString(36).toLowerCase()],window:["theme","fixAngle","lockMove","lockSize","secondsTabSwitchDelay"],advanced:["useCache","loadAllTemplates","disablePlacedPixelSound","overlayPixel","hardcodeColors","maxWorkers","minScaleSmallPixel"]});const l=this.Se.ee("overlay",{overlayOn:{action:()=>this.ur.Qn=!0,ie:"overlay_on.png",te:"overlayOff"},overlayOff:{action:()=>this.ur.Qn=!1,ie:"overlay_off.png",te:"overlayOn"}});l.se(this.ur.Qn?"overlayOn":"overlayOff",!1),this.ur.er((t=>l.se(t?"overlayOn":"overlayOff",!1)));const f=this.Se.ee("errorDetector",{errorDetectorOn:{action:()=>this.ur.tr=!0,ie:"errorDetector_on.png",te:"errorDetectorOff"},errorDetectorOff:{action:()=>this.ur.tr=!1,ie:"errorDetector_off.png",te:"errorDetectorOn"}});f.se(this.ur.tr?"errorDetectorOn":"errorDetectorOff",!1),this.ur.rr((t=>f.se(t?"errorDetectorOn":"errorDetectorOff",!1)));const d=this.Se.ee("smallPixel",{smallPixelOn:{action:()=>this.ur.ir=!0,ie:"smallPixel_on.png",te:"smallPixelOff"},smallPixelOff:{action:()=>this.ur.ir=!1,ie:"smallPixel_off.png",te:"smallPixelOn"}});d.se(this.ur.ir?"smallPixelOn":"smallPixelOff",!1),this.ur.hr((t=>d.se(t?"smallPixelOn":"smallPixelOff",!1)));const m=this.Se.ee("autoColorSelect",{autoColorSelectOn:{action:()=>this.Yn.Yn=!0,ie:"autoColorSelect_on.png",te:"autoColorSelectOff"},autoColorSelectOff:{action:()=>this.Yn.Yn=!1,ie:"autoColorSelect_off.png",te:"autoColorSelectOn"}});m.se(this.Yn.Yn?"autoColorSelectOn":"autoColorSelectOff",!1),this.Yn.jn((t=>m.se(t?"autoColorSelectOn":"autoColorSelectOff",!1))),this.Se.re(["overlay","errorDetector","smallPixel","autoColorSelect"]),this.de.ps.cs()}Te(){super.Te(),this.cr.Te(),this.ur.Te(),this.Yn.Te()}}(()=>{const i=[{lr:/(?<!git\.)(pixelplanet|fuckyouarkeros)\.fun((\/(#|$))|$)/,dr:dt}];for(let{lr:s,dr:e}of i)if(s.test(t.location.href)){new e;break}})()})();