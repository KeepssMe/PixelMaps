// ==UserScript==
// @name Pixel Minimap (Test)
// @description OMG. I made a minimap. (At least I hope)
// @version 0.3.1.7
// @author KeepssMe | Thank you Sallbet for testing and listening to my whining
// @exclude *git.pixelplanet.fun/*
// @match *.pixelplanet.fun/*
// @match *pixelplanet.fun/*
// @match *fuckyouarkeros.fun/*
// @match *pixelzone.io/*
// @match *pixelcanvas.io/*
// @connect raw.githubusercontent.com
// @downloadURL https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/minimap.user.js
// @grant GM_getResourceText
// @grant GM_addStyle
// @grant GM_addElement
// @grant GM_listValues
// @grant GM_setValue
// @grant GM_getValue
// @grant GM_deleteValue
// @grant GM_xmlhttpRequest
// @iconURL https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/icons/icon-min.png
// @namespace https://github.com/KeepssMe/PixelMinimap
// @resource PPF_CHUNKCHECKER https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/ppf.chunkchecker.js
// @resource TRANSLATIONS https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/translations.json
// @resource STYLES https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/styles.css
// @resource VIEWS https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/views.html
// @run-at document-start
// @sandbox raw
// @updateURL https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/minimap.user.js
// ==/UserScript==

(()=>{const t=unsafeWindow,i=window;class s{static info=i.GM.info;static t=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-18-s)})).join("")}(33,148,129,122)+21269..toString(36).toLowerCase()+34..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+690366..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-8-s)})).join("")}(14,122,136)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(19,204,184,166)+29..toString(36).toLowerCase()];static i=t=>JSON.parse(s.t(t));static#t=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-1-s)})).join("")}(31,136,132,129,110,103)+13..toString(36).toLowerCase()+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+998726..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(53,192)+29..toString(36).toLowerCase()];static addElement(t,i={},s=null){return s?this.#t(s,t,i):this.#t(t,i)}static h=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(42,190,186,183,164,157)+13..toString(36).toLowerCase()+35..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+1078..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-20-s)})).join("")}(45,173)+14..toString(36).toLowerCase()]}class e{static o=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(19,128,130,116,97,90)+1037..toString(36).toLowerCase()+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+381..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(6,156,171)+28..toString(36).toLowerCase()];static u=i[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(3,166,150,151,142)+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+13746..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-41-s)})).join("")}(37,179)];static l=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(6,138,151,130,111,104)+29..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(61,181,171,159,147)+14..toString(36).toLowerCase()];static S=i[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-2-s)})).join("")}(59,172,164,162,156)+19202..toString(36).toLowerCase()+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-34-s)})).join("")}(22,153)+28310..toString(36).toLowerCase()];static p=()=>e.o().forEach((t=>e.S(t)));static getEntries=()=>e.o().reduce(((t,i)=>({...t,[i]:e.u(i)})),{})}class r{static#i=window[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+43581..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(32,166,146,175,178,177,164)+34790..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(56,211)+29..toString(36).toLowerCase()];static#s=(()=>{const t=11..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(59,198,194)+11..toString(36).toLowerCase(),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(15,116)+999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-2-s)})).join("")}(17,141,116)+11..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-6-s)})).join("")}(1,111,111,110,124)+27..toString(36).toLowerCase(),s=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-46-s)})).join("")}(8,160)+1032..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-60-s)})).join("")}(33,203),e=28..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-41-s)})).join("")}(9,165,166)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-19-s)})).join("")}(46,162)+22..toString(36).toLowerCase(),r=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-23-s)})).join("")}(3,146,127,138,126)+29039..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(35,209),n=29..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-15-s)})).join("")}(42,158)+1217..toString(36).toLowerCase(),h=30..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(18,160)+21..toString(36).toLowerCase(),a=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(19,171)+690396..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(45,161,155)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(24,181,143)+914..toString(36).toLowerCase(),o=27..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(60,173,175,163,183,165)+620546..toString(36).toLowerCase(),u=852..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(25,132,133)+12..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(7,157,159),c=24..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(26,165)+27..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(60,195,200,178,174,177)+2296106198159..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(63,170)+14..toString(36).toLowerCase(),l=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-7-s)})).join("")}(49,167,167)+13380..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(25,171,168),f=887..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(34,175)+999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-32-s)})).join("")}(63,206)+27..toString(36).toLowerCase(),d=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-20-s)})).join("")}(10,140,141,141)+874..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-26-s)})).join("")}(9,135),g=35506..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(45,157,194,172)+37973..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(28,187),S=531..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(30,186,188)+27..toString(36).toLowerCase(),p=986..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(30,181,181,181,183)+28..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-8-s)})).join("")}(24,133),m=1037..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-37-s)})).join("")}(31,185,165)+1108..toString(36).toLowerCase();return{m:()=>t,_:()=>i,A:()=>s,T:()=>e,C:()=>r,O:()=>n,P:()=>h,R:()=>a,N:()=>o,M:()=>u,k:()=>c,D:()=>l,L:()=>f,$:()=>d,I:()=>g,V:()=>S,H:()=>p,U:()=>m}})();static F=0;static G=1;static W=2;static X=3;static Y=4;static B=5;static j=6;static K=0;static q=1;static Z=2;static J=3;static tt=4;static it=5;static#e(t){switch(t){case this.G:return this.#s.m();case this.W:return this.#s._();case this.X:return this.#s.A();case this.Y:return this.#s.T();case this.B:return this.#s.C();case this.j:return this.#s.O();default:return null}}st;et=r.F;nt=!0;ht=!0;#r=r.K;#n;#h;get ot(){return this.#r}async ut(t=!1){switch(this.#r){case r.K:return await this.#a();case r.tt:case r.it:return t?await this.#a():this.#h;default:return await this.#n}}async#a(){let t;return this.#h=void 0,this.#r=r.K,this.#n=new Promise((i=>{try{t=r.#i({[r.#s.P()]:"function"==typeof this.st?this.st(this):this.st,[r.#s.R()]:r.#e(this.et),[r.#s.M()]:!this.nt,[r.#s.N()]:this.ht,[r.#s.k()]:t=>{this.#r=t[r.#s.I()]},[r.#s.D()]:t=>{this.#r=r.it;const s=new n;s.ct=!0,i(s)},[r.#s.L()]:t=>{const s=new n;s.errorText=t[r.#s.V()],i(s)},[r.#s.$()]:t=>{const s=new n;s.ft=t[r.#s.H()],s.dt=t[r.#s.U()],i(s)}})}catch(t){const s=new n;s.gt=t,i(s)}})),this.#n.abort=t.abort,this.#h=await this.#n,this.#h}St(){this.#n?.abort()}Et(){const t=new r;return t.st=this.st,t.et=this.et,t.nt=this.nt,t.ht=this.ht,t}}class n{dt=0;ft=null;ct=!1;errorText=null;gt=null;vt(){return this.errorText||this.gt}}function h(t){return null==t}const a=/Mobile|Android|webOS|iPhone|iPod|iPad|BlackBerry|Windows Phone|Windows Mobile|Opera Mini|WPDesktop|IEMobile|Fennec|Nokia/i;const o=new Error("Incorrect value type");function u(t){switch(typeof t){case"number":case"boolean":case"string":case"bigint":case"undefined":return t;case"object":if(null===t)return null;let i=Array.isArray(t)?[]:{};for(let s in t)t.hasOwnProperty(s)&&(i[s]=u(t[s]));return i;default:throw o}}function c(t,i){if(t===i)return!0;const s=typeof t;if(s!==typeof i)return!1;switch(s){case"number":case"boolean":case"string":case"bigint":case"undefined":return!1;case"object":if(null===t)return!1;let s=Array.isArray(t);if(s!==Array.isArray(i))return!1;if(s){if(t.length!==i.length)return!1}else if(Object.keys(t).length!==Object.keys(i).length)return!1;for(let s in t)if(t.hasOwnProperty(s)&&(!i.hasOwnProperty(s)||!c(t[s],i[s])))return!1;return!0;default:throw o}}function l(t,i,s){return Math.max(t,Math.min(i,s))}function f(t){return Math.abs(t-Math.floor(t))}class d{#o={};#u;constructor(t){this.#u=t+"_",e.o().filter((i=>i.startsWith(t))).forEach((t=>this.#o[t.slice(this.#u.length)]=e.u(t,void 0)))}#c(t){return this.#u+t}yt(t){return this.#o.hasOwnProperty(t)}u(t,i=null){return this.yt(t)?u(this.#o[t]):i}l(t,i){c(this.#o[t],i)||(e.l(this.#c(t),i),this.#o[t]=u(i))}S(t){delete this.#o[t],e.S(this.#c(t))}p(){for(let t of Object.keys(this.#o))delete this.#o[t],e.S(this.#c(t))}}class g{_t=new Set;At=new Set}class S{#l=new Map;wt(t,...i){const s=this.#l.get(t);if(!s)return;const{_t:e,At:r}=s;e.forEach((t=>{try{t(...i)}catch(t){console.error(t)}})),r.forEach((t=>e.delete(t))),0===e.size?this.#l.delete(t):r.clear()}Tt(t){return 0!==this.#l.get(t)?._t.size??!1}bt(t){return this.#l.get(t)?._t.size??0}Ct(t,i){return this.#f(t,i,!1)}xt(t,i){return this.#f(t,i,!0)}#f(t,i,s=!1){let e=this.#l.get(t);e||(e=new g,this.#l.set(t,e));const{_t:r,At:n}=e;return r.has(i)||(r.add(i),s&&n.add(i)),this.Ot.bind(this,t,i)}Ot(t,i){const s=this.#l.get(t);if(!s)return;const{_t:e,At:r}=s;e.delete(i),r.delete(i),0===e.length&&this.#l.delete(t)}Pt(t){const i=this.#l.get(t);i&&(i._t.clear(),i.At.clear(),this.#l.delete(t))}}class p{Rt;Nt;translations}class m{static#d=1;static#g=new Map;static#S;static{const i=()=>10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(39,161)+17..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-52-s)})).join("")}(27,147,157,163,157)+10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-62-s)})).join("")}(28,163)+1146..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(5,123),e=s.i(i()),r=new Map;for(let t of e){if(this.#g[t.name])continue;const i=new p;i.Rt=t.name,i.Nt=t.langs,i.translations=t.translations,this.#g[i.Rt]=i,i.Nt.filter((t=>!r.has(t))).forEach((t=>r.set(t,i)))}this.#S=Object.values(this.#g)[0];for(let i of t.navigator.languages)if(r.has(i)){this.#S=r.get(i);break}}#p=new S;#m;constructor(){this.#m=m.#S}get translations(){return[...Object.values(m.#g)]}get Mt(){return m.#S}get kt(){return this.#m}set kt(t){t instanceof p&&(t=t.Rt);let i=m.#g[t]??m.#S;this.#m!==i&&(this.#m=i,this.#p.wt(m.#d,i))}Dt(t){return this.#m.translations[t]??t}Lt(t){return this.#p.Ct(m.#d,t)}}class E{$t;It;Vt}class v{static#s=(()=>{const t=838..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-22-s)})).join("")}(11,142)+14..toString(36).toLowerCase(),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-46-s)})).join("")}(11,179,173)+25..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(33,161),s=30..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-42-s)})).join("")}(16,172)+21..toString(36).toLowerCase();return{Ht:t=>29945008..toString(36).toLowerCase()+10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+1147..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(51,200,146,215,208,198,212,205,205,192,206,192,205,206,186,204,190,201,189,186,128,200,177,193)+886..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(35,129,95,147,147,159,145,146,145,138,124,86)+24530..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-10-s)})).join("")}(36,95,162,154)+22..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(43,131,193,187,178)+t+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(47,155,159,151)+12..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(23,199,199,192,202)+28..toString(36).toLowerCase()+30..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(51,176,166)+24..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-24-s)})).join("")}(56,190),Ut:()=>t,Ft:()=>i,zt:()=>s}})();static Gt=1;static Wt=2;static#E(t,i){return t&&i&&t.$t()===i.$t()&&t.It()===i.It()&&t.Vt()===i.Vt()}#p=new S;#v=new r;#y;#_=()=>null;#A=[];#w=null;#T=null;constructor(t){this.#v.nt=!1,this.#v.ht=!0,this.#v.et=r.X,this.#v.st=v.#s.Ht.bind(v,t),this.Xt()}get Yt(){return[...this.#A]}get Bt(){return this.#w}get jt(){return this.#T}set jt(t){t instanceof E&&(t=t.$t()),t=this.#_(t)??this.#w,v.#E(this.#T,t)||(this.#T=t,this.#p.wt(v.Gt,t))}async Xt(t=!1){t&&0!==this.#A.length||(this.#y??=this.#b(),await this.#y)}async#b(){const t=await this.#v.ut(!0);if(!t.ft)return void(this.#y=void 0);const i={};for(let s of t.ft){if(i[s[v.#s.Ut()]])continue;const t=new E;t.$t=()=>s[v.#s.Ut()],t.It=()=>s[v.#s.Ft()],t.Vt=()=>s[v.#s.zt()],i[t.$t()]=t}this.#_=t=>i[t],this.#A=Object.values(i),this.#w=this.#A[0];const s=this.#T;this.#T=i[s?.$t()]??this.#w,this.#p.wt(v.Wt,this.Yt),s&&!v.#E(s,this.#T)&&this.#p.wt(v.Gt,this.#T),this.#y=void 0}Kt(t){return this.#p.Ct(v.Gt,t)}qt(t){return this.#p.Ct(v.Wt,t)}}const y=new Map,_=(new DOMParser).parseFromString(s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-1-s)})).join("")}(26,113)+25..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-11-s)})).join("")}(35,115)+13..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+35..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")),"text/html").body.children;for(let t of _){const i=t.getAttribute("viewKey"),s=t.cloneNode(!0);s.removeAttribute("viewKey"),y.set(i,s)}function A(t){return y.get(t)?.cloneNode(!0)}function w(t,i,s=0){return function(t,i){return[...t.querySelectorAll(i)]}(t,i)[s]}function T(t,i={},e=null,r=!1){if(r)return s.addElement(t,i,e);const n=document.createElement(t);if(i)for(let t of Object.keys(i))n.setAttribute(t,i[t]);return e&&e.insertAdjacentElement("beforeend",n),n}function b(t){const i=w(y.get("svgs"),`svg[key="${t}"]`).cloneNode(!0);return i.removeAttribute("key"),i}class C{Qt;Zt;Jt;ti;ii}class x{si;ei;ri;ni;hi}class O{static#C=1;static#x=2;static#O=3;static#P=4;static#R=5;static#N=6;static#M=7;static#k=8;static#D=9;static#L=10;static ai=["dark","darkmini"];static oi=200;static ui=300;static ci=30;#p=new S;li=A("movewin");fi=new C;di=new x;gi=w(this.li,".movewin_main");Si=w(this.li,".movewin_footer");#$=[!1,!0];#I=[0,0];#V=[O.ui,O.ui];#H=!1;#U=!1;#F=!0;constructor(){this.fi.Qt=w(this.li,".movewin_resizers"),this.fi.Zt=w(this.li,".movewin_resizer-lt"),this.fi.Jt=w(this.li,".movewin_resizer-rt"),this.fi.ti=w(this.li,".movewin_resizer-lb"),this.fi.ii=w(this.li,".movewin_resizer-rb"),this.di.si=w(this.li,".movewin_header"),this.di.ei=w(this.li,".movewin_header-info"),this.di.ri=w(this.li,".movewin_header-status"),this.di.ni=w(this.li,".movewin_header-mover"),this.di.hi=w(this.li,".movewin_header-button_minimize")}get pi(){return this.li.getAttribute("theme")}set pi(t){O.ai.includes(t)||(t=O.ai[0]),this.li.setAttribute("theme",t),this.#p.wt(O.#C,t)}get status(){return this.di.ri.textContent}set status(t){this.di.ri.textContent!==t&&(this.di.ri.textContent=t,this.#p.wt(O.#x,t))}get mi(){return[...this.#$]}set mi([t,i]){if(!this.li.parentElement)return void(this.#$=[t,i]);if(this.#$[0]===t&&this.#$[1]===i)return;const s=this.li.getBoundingClientRect(),e=this.li.parentElement.getBoundingClientRect();let r=t?{v:"left",r:"right",Ei:s.left-e.left}:{v:"right",r:"left",Ei:e.right-s.right},n=i?{v:"top",r:"bottom",Ei:s.top-e.top}:{v:"bottom",r:"top",Ei:e.bottom-s.bottom};this.#$=[t,i],this.#I=[r.Ei,n.Ei],this.li.style[r.v]=this.#I[0]+"px",this.li.style[r.r]=null,this.li.style[n.v]=this.#I[1]+"px",this.li.style[n.r]=null,this.#p.wt(O.#O,...this.#$),this.#p.wt(O.#P,...this.#I)}get vi(){return[...this.#I]}get yi(){const t=this.li.getBoundingClientRect(),i=this.li.parentElement.getBoundingClientRect();return[this.#$[0]?t.left-i.left:i.right-t.right,this.#$[1]?t.top-i.top:i.bottom-t.bottom]}set vi([t,i]){if(!this.li.parentElement)return void(this.#I=[t,i]);if(this.#I[0]===t&&this.#I[1]===i)return;const s=this.li.getBoundingClientRect(),e=this.li.parentElement.getBoundingClientRect();this.#I[0]=l(0,t,e.width-s.width),this.#I[1]=l(0,i,e.height-s.height),this.li.style[this.#$[0]?"left":"right"]=this.#I[0]+"px",this.li.style[this.#$[1]?"top":"bottom"]=this.#I[1]+"px",this.#p.wt(O.#P,t,i)}get size(){return[...this.#V]}get _i(){const t=this.li.getBoundingClientRect();return[t.width,t.height]}set size([t,i]){if(!this.li.parentElement)return void(this.#V=[t,i]);if(this.#V[0]===t&&this.#V[0]===i)return;const s=this.li.getBoundingClientRect(),e=this.li.parentElement.getBoundingClientRect();let r=this.#$[0]?e.right-s.left-(O.ci-Math.min(O.ci,s.left-e.left)):s.right-e.left-(O.ci-Math.min(O.ci,e.right-s.right)),n=this.#$[1]?e.bottom-s.top-(O.ci-Math.min(O.ci,s.top-e.top)):s.bottom-e.top-(O.ci-Math.min(O.ci,e.bottom-s.bottom));this.#V[0]=l(O.oi,t,r),this.#V[1]=l(O.oi,i,n),this.li.style.width=this.#V[0]+"px",this.li.style.height=this.#V[1]+"px",this.#p.wt(O.#N,...this.#V)}get Ai(){return this.#H}get wi(){return this.di.ni.hidden}set Ai(t){t!==this.#H&&(this.di.ni.hidden=t,this.#H=t,this.#p.wt(O.#k,t))}get Ti(){return this.#U}get bi(){return this.fi.Qt.hidden}set Ti(t){t!==this.#U&&(this.fi.Qt.hidden=t,this.#U=t,this.#p.wt(O.#D,t))}get Ci(){return this.#F}get xi(){return"none"===this.Si.style.display}set Ci(t){t!==this.#F&&(this.Si.style.display=t?"none":null,this.#F=t,this.#p.wt(O.#L,t))}Oi(i){const s=(()=>{let t=this.li.getBoundingClientRect(),s=this.li.parentElement.getBoundingClientRect(),e=s.width-t.width,r=s.height-t.height,n=this.#$[0]?{v:"left",f:t=>t-a}:{v:"right",f:t=>a-t},h=this.#$[1]?{v:"top",f:t=>t-o}:{v:"bottom",f:t=>o-t},a=i.clientX+s[n.v]-t[n.v],o=i.clientY+s[h.v]-t[h.v];return(t,i)=>{let s=l(0,n.f(t),e),a=l(0,h.f(i),r);this.li.style[n.v]=s+"px",this.li.style[h.v]=a+"px",this.#p.wt(O.#R,s,a)}})(),e=t=>s(t.pageX,t.pageY),r=()=>{let i=this.li.getBoundingClientRect(),s=this.li.parentElement.getBoundingClientRect();this.#$[0]?(this.#I[0]=i.left-s.left,this.li.style.left=this.#I[0]+"px"):(this.#I[0]=s.right-i.right,this.li.style.right=this.#I[0]+"px"),this.#$[1]?(this.#I[1]=i.top-s.top,this.li.style.top=this.#I[1]+"px"):(this.#I[1]=s.bottom-i.bottom,this.li.style.bottom=this.#I[1]+"px"),this.#p.wt(O.#P,...this.#I),t.document.removeEventListener("mousemove",e),t.document.removeEventListener("mouseup",r),t.document.removeEventListener("touchmove",n),t.document.removeEventListener("touchstart",h),t.document.removeEventListener("touchend",h),t.document.removeEventListener("touchcancel",h)},n=t=>e(t.touches[0]),h=t=>{1!==t.touches.length&&r()};t.document.addEventListener("mousemove",e),t.document.addEventListener("mouseup",r),t.document.addEventListener("touchmove",n),t.document.addEventListener("touchstart",h),t.document.addEventListener("touchend",h),t.document.addEventListener("touchcancel",h)}Pi(i,s,e){const r=(()=>{let t=this.li.getBoundingClientRect(),r=this.li.parentElement.getBoundingClientRect();const n=(s,e,n,h,a)=>{if(s!==e){let i=e?t.left-r.left:r.right-t.right;return()=>i}let o=n,u=O.ci,c=0,f=t=>t;s?(o=n,u-=Math.min(O.ci,r[h]-t[h]),c=t[h]-r[n]-O.oi,f=t=>t-d):(o=h,u-=Math.min(O.ci,t[n]-r[n]),c=r[h]-t[n]-O.oi,f=t=>d-t);let d=i[a]+r[o]-t[o];return t=>{const i=l(u,f(t),c);return this.li.style[o]=i+"px",i}},h=(s,e,n,h,a)=>{let o=t[h],u=t=>t,c=0;return s?(o+=i[a],u=t=>o-t,c=t[n]-r[e]-(O.ci-Math.min(O.ci,r[n]-t[n]))):(o-=i[a],u=t=>o+t,c=r[n]-t[e]-(O.ci-Math.min(O.ci,t[e]-r[e]))),t=>{const i=l(O.oi,u(t),c);return this.li.style[h]=i+"px",i}};let a=n(s,this.#$[0],"left","right","clientX"),o=n(e,this.#$[1],"top","bottom","clientY"),u=h(s,"left","right","width","clientX"),c=h(e,"top","bottom","height","clientY");return(t,i)=>{this.#p.wt(O.#R,a(t),o(i)),this.#p.wt(O.#M,u(t),c(i))}})(),n=t=>r(t.pageX,t.pageY),h=()=>{let i=this.li.getBoundingClientRect(),s=this.li.parentElement.getBoundingClientRect();this.#$[0]?(this.#I[0]=i.left-s.left,this.li.style.left=this.#I[0]+"px"):(this.#I[0]=s.right-i.right,this.li.style.right=this.#I[0]+"px"),this.#$[1]?(this.#I[1]=i.top-s.top,this.li.style.top=this.#I[1]+"px"):(this.#I[1]=s.bottom-i.bottom,this.li.style.bottom=this.#I[1]+"px"),this.#V=[i.width,i.height],this.li.style.width=this.#V[0]+"px",this.li.style.height=this.#V[1]+"px",this.#p.wt(O.#P,...this.#I),this.#p.wt(O.#N,...this.#V),t.document.removeEventListener("mousemove",n),t.document.removeEventListener("mouseup",h),t.document.removeEventListener("touchmove",a),t.document.removeEventListener("touchstart",o),t.document.removeEventListener("touchend",o),t.document.removeEventListener("touchcancel",o)},a=t=>n(t.touches[0]),o=t=>{1!==t.touches.length&&h()};t.document.addEventListener("mousemove",n),t.document.addEventListener("mouseup",h),t.document.addEventListener("touchmove",a),t.document.addEventListener("touchstart",o),t.document.addEventListener("touchend",o),t.document.addEventListener("touchcancel",o)}#z(){const t=this.li.parentElement.getBoundingClientRect(),i=(i,s,e,r,n,h)=>{const a=Math.max(O.oi,t[h]-O.ci),o=a>e?e:a,u=l(0,a-o,s);return this.li.style[h]=o+"px",this.li.style[i?r:n]=u+"px",[u,o]},[s,e]=i(this.#$[0],this.#I[0],this.#V[0],"left","right","width"),[r,n]=i(this.#$[1],this.#I[1],this.#V[1],"top","bottom","height");this.#p.wt(O.#R,s,r),this.#p.wt(O.#M,e,n)}Ri(t){return this.#p.Ct(O.#C,t)}Ni(t){return this.#p.Ct(O.#x,t)}Mi(t){return this.#p.Ct(O.#O,t)}ki(t){return this.#p.Ct(O.#P,t)}Di(t){return this.#p.Ct(O.#R,t)}Li(t){return this.#p.Ct(O.#N,t)}$i(t){return this.#p.Ct(O.#M,t)}Ii(t){return this.#p.Ct(O.#k,t)}Vi(t){return this.#p.Ct(O.#D,t)}Hi(t){return this.#p.Ct(O.#L,t)}Ui(i,s){i.insertAdjacentElement("afterbegin",this.li),this.li.style.zIndex=s,this.pi??=O.ai[0],this.li.style[this.#$[0]?"left":"right"]=this.#I[0]+"px",this.li.style[this.#$[1]?"top":"bottom"]=this.#I[1]+"px",this.li.style.width=this.#V[0]+"px",this.li.style.height=this.#V[1]+"px",this.di.ni.hidden=this.#H,this.fi.Qt.hidden=this.#U,this.Si.style.display=this.#F?"none":null,this.#z(),this.di.ni.addEventListener("mousedown",(t=>{t.preventDefault(),this.Oi(t)})),this.di.ni.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Oi(t.touches[0]))})),this.fi.Zt.addEventListener("mousedown",(t=>{t.preventDefault(),this.Pi(t,!0,!0)})),this.fi.Zt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Pi(t.touches[0],!0,!0))})),this.fi.Jt.addEventListener("mousedown",(t=>{t.preventDefault(),this.Pi(t,!1,!0)})),this.fi.Jt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Pi(t.touches[0],!1,!0))})),this.fi.ti.addEventListener("mousedown",(t=>{t.preventDefault(),this.Pi(t,!0,!1)})),this.fi.ti.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Pi(t.touches[0],!0,!1))})),this.fi.ii.addEventListener("mousedown",(t=>{t.preventDefault(),this.Pi(t,!1,!1)})),this.fi.ii.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Pi(t.touches[0],!1,!1))})),t.addEventListener("resize",this.#z.bind(this))}}class P{Fi;zi;Gi;constructor(t,i,s){this.Fi=t,h(i)||(this.zi=A(i)),this.Gi=A("minimapTabMenuButton"),this.Gi.textContent=s}}class R extends P{Wi;Qt;Zt;Jt;ti;ii;constructor(){super("main","minimapTabMain","Minimap"),this.Wi=w(this.zi,".minimap-tab_main_canvas"),this.Qt=w(this.zi,".minimap_inner_resizers"),this.Zt=w(this.Qt,".minimap_inner_resizer_lt"),this.Jt=w(this.Qt,".minimap_inner_resizer_rt"),this.ti=w(this.Qt,".minimap_inner_resizer_lb"),this.ii=w(this.Qt,".minimap_inner_resizer_rb")}}class N extends P{Xi;constructor(){super("menu","minimapTabMenu","Menu"),this.zi.style.display="none",this.Xi=w(this.zi,".minimap-tab_menu_buttons")}}class M extends P{Yi;constructor(){super("settings","minimapTabSettings","Settings"),this.zi.style.display="none",this.Yi=w(this.zi,".minimap-tab_settings_detail")}}class k extends P{Yi;constructor(){super("artlist","minimapTabArtList","Art list"),this.zi.style.display="none",this.Yi=w(this.zi,".minimap-tab_artlist_detail")}}class D extends P{constructor(){super("info","minimapTabInfo","Info"),this.zi.style.display="none"}}class L{Si;Bi;ji;Ki;qi;constructor(){this.Si=A("minimap_footer"),this.Bi=w(this.Si,".minimap_footer_button",0),this.ji=w(this.Si,".minimap_footer_button",1),this.Ki=w(this.Si,".minimap_fast-functions"),this.qi=w(this.Ki,".minimap_fast-functions_content"),this.Bi.style.display="none",this.ji.style.display="none",this.Ki.addEventListener("wheel",(t=>{t.preventDefault(),this.#G(t.deltaY<0)})),this.Bi.addEventListener("click",(t=>{t.preventDefault(),this.#G(!0)})),this.ji.addEventListener("click",(t=>{t.preventDefault(),this.#G(!1)}))}#G(t){const i=[...this.qi.children],s=i.reduce(((t,i)=>t+i.getBoundingClientRect().width),0)/i.length;this.Ki.scrollLeft+=s*(t?-1:1)}Qi(){const t=this.Si.getBoundingClientRect();if(this.qi.getBoundingClientRect().width<=t.width)return this.Bi.style.display="none",void(this.ji.style.display="none");this.Bi.style.display=null,this.ji.style.display=null}}class $ extends O{static#W=1;static#X=5e3;#p=new S;#g;Zi=new R;Ji=new N;ts=new M;ss;es=new D;rs=new L;ns=T("button");hs=T("button");#Y=new Map;#B=this.Zi;#j=this.Zi;#K;constructor(t,i){super(),this.#g=t,this.Ci=!1,this.status=this.#g.Dt(`tab_${this.#j.Fi}`),this.ns.insertAdjacentElement("afterbegin",b("menu")),this.di.ei.insertAdjacentElement("beforebegin",this.ns),this.hs.style.display="none",this.hs.insertAdjacentElement("afterbegin",b("close")),this.di.ei.insertAdjacentElement("afterend",this.hs),this.Si.insertAdjacentElement("beforeend",this.rs.Si),this.#g.Lt(this.#q.bind(this));let s=[this.Zi,this.ts];i&&(this.ss=new k,s.push(this.ss)),s.push(this.es),this.gi.insertAdjacentElement("beforeend",this.Ji.zi),this.#Y.set(this.Ji.Fi,this.Ji);for(let t of s)this.gi.insertAdjacentElement("beforeend",t.zi),this.#Y.set(t.Fi,t),this.Ji.Xi.insertAdjacentElement("beforeend",t.Gi),t.Gi.textContent=this.#g.Dt(`tab_${t.Fi}`),t.Gi.addEventListener("click",(()=>this.os(t,!1)));this.ns.addEventListener("click",(()=>{this.#j===this.Ji?this.os(this.#B,!1):this.os(this.Ji,!1)})),this.hs.addEventListener("click",(()=>this.os(this.Zi,!1))),this.li.addEventListener("mouseenter",(()=>clearTimeout(this.#K))),this.li.addEventListener("mouseleave",(()=>{this.#j!==this.Zi&&(clearTimeout(this.#K),this.#K=setTimeout((()=>this.os(this.Zi,!1)),$.#X))})),this.Vi((t=>this.Zi.Qt.hidden=t))}os(t,i=!1){t instanceof P&&(t=t.Fi);let s=this.#Y.get(t)??this.Zi;this.hs.style.display=s===this.Zi?"none":null,s.zi.style.display=null,this.#j.zi.style.display="none",this.#B=this.#j,this.#j=s,this.status=this.#g.Dt(`tab_${s.Fi}`),this.#p.wt($.#W,s),i&&this.#j!==this.Zi&&(clearTimeout(this.#K),this.#K=setTimeout((()=>this.os(this.Zi,!1)),$.#X))}#q(){this.status=this.#g.Dt(`tab_${this.#j.Fi}`);for(let t of this.#Y.values())t.Gi.textContent=this.#g.Dt(`tab_${t.Fi}`)}get us(){return this.#j}cs(t){return this.#p.Ct($.#W,t)}Ui(t,i){super.Ui(t,i),this.Zi.Zt.addEventListener("mousedown",(t=>{t.preventDefault(),this.Pi(t,!0,!0)})),this.Zi.Zt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Pi(t.touches[0],!0,!0))})),this.Zi.Zt.addEventListener("dblclick",(t=>{t.preventDefault(),this.mi=[!0,!0],this.vi=[0,0]})),this.fi.Zt.addEventListener("dblclick",(t=>{t.preventDefault(),this.mi=[!0,!0],this.vi=[0,0]})),this.Zi.Jt.addEventListener("mousedown",(t=>{t.preventDefault(),this.Pi(t,!1,!0)})),this.Zi.Jt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Pi(t.touches[0],!1,!0))})),this.Zi.Jt.addEventListener("dblclick",(t=>{t.preventDefault(),this.mi=[!1,!0],this.vi=[0,0]})),this.fi.Jt.addEventListener("dblclick",(t=>{t.preventDefault(),this.mi=[!1,!0],this.vi=[0,0]})),this.Zi.ti.addEventListener("mousedown",(t=>{t.preventDefault(),this.Pi(t,!0,!1)})),this.Zi.ti.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Pi(t.touches[0],!0,!1))})),this.Zi.ti.addEventListener("dblclick",(t=>{t.preventDefault(),this.mi=[!0,!1],this.vi=[0,0]})),this.fi.ti.addEventListener("dblclick",(t=>{t.preventDefault(),this.mi=[!0,!1],this.vi=[0,0]})),this.Zi.ii.addEventListener("mousedown",(t=>{t.preventDefault(),this.Pi(t,!1,!1)})),this.Zi.ii.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Pi(t.touches[0],!1,!1))})),this.Zi.ii.addEventListener("dblclick",(t=>{t.preventDefault(),this.mi=[!1,!1],this.vi=[0,0]})),this.fi.ii.addEventListener("dblclick",(t=>{t.preventDefault(),this.mi=[!1,!1],this.vi=[0,0]})),this.$i(this.rs.Qi.bind(this.rs)),this.rs.Qi()}}class I{static#Q=1;#p=new S;Wi;#Z;constructor(){this.Wi=A("overlay")}get ls(){return this.#Z}set ls(t){this.#Z!==t&&(this.#Z=t,this.Wi.style.opacity=1-t/100,this.#p.wt(I.#Q,t))}fs(t){return this.#p.Ct(I.#Q,t)}Ui(t,i=null){t.insertAdjacentElement("afterbegin",this.Wi),this.Wi.style.zIndex=i??"auto"}}const V="setting_";class H{ds;gs;Ss;ps;constructor(t){this.ds=t,this.gs=A("minimapTabSettingsSetting"),this.Ss=w(this.gs,".minimap-tab_settings_setting-name"),this.ps=w(this.gs,".minimap-tab_settings_setting-value")}Es(t){this.Ss.textContent=t.Dt(`${V}${this.ds}`)+": "}}class U extends H{vs;ys=new Map;_s;constructor(t,i,s){super(t),this.vs=A("minimapTabSettingsSelectSetting"),this.ps.insertAdjacentElement("beforeend",this.vs),this._s=i;for(let[t,i]of Object.entries(s)){const s=document.createElement("option");s.value=t,s.textContent=t,this.vs.insertAdjacentElement("beforeend",s),this.ys.set(t,{As:s,action:i})}this.vs.value=Object.keys(s)[0],this.vs.addEventListener("change",(()=>this.ws(this.vs.value,!0)))}ws(t,i){let s=this.ys.get(t);h(s)||(this.vs.value=s.As.value,i&&s.action())}Es(t){if(super.Es(t),this._s)for(let{As:i}of this.ys.values())i.textContent=t.Dt(`${V}${this.ds}_${i.value}`)}}class F extends H{Ts;$input;bs;#J;#tt;constructor(t,i,s){super(t),this.Ts=A("minimapTabSettingsSwitchSetting"),this.ps.insertAdjacentElement("beforeend",this.Ts),this.$input=w(this.Ts,"input"),this.bs=w(this.Ts,"span"),this.#J=i,this.#tt=s,this.$input.addEventListener("change",(()=>this.ws(this.$input.checked,!0)))}ws(t,i){this.$input.checked=t,i&&(t?this.#J():this.#tt())}}class z extends H{Cs;xs;Os;#it;constructor(t,i,s,e,r){super(t),this.Cs=A("minimapTabSettingsRangeSetting"),this.ps.insertAdjacentElement("beforeend",this.Cs),this.xs=w(this.Cs,"input"),this.Os=w(this.Cs,"output"),this.xs.min=s,this.xs.max=e,this.xs.step=r,this.xs.value=s,this.Os.value=s,this.#it=i,this.xs.addEventListener("input",(t=>this.l(this.xs.value,!0)))}l(t,i){(t-this.xs.min)%this.xs.step==0&&(this.xs.value=t,this.Os.value=t,i&&this.#it(t))}}class G{Ps;Yi;Rs;constructor(t){this.Ps=t,this.Yi=A("minimapTabSettingsGroup"),this.Rs=w(this.Yi,"summary",0)}Es(t){this.Rs.textContent=t.Dt(`settingGroup_${this.Ps}`)}}class W{#st;#et=new Map;#rt=new Map;#nt;constructor(t,i){this.#st=t,this.#nt=i,this.#st.Lt(this.#ht.bind(this))}Ns(t,i,s){if(this.#rt.has(t))return null;const e=new U(t,i,s);return this.#rt.set(t,e),e}Ms(t){const i=this.#rt.get(t);return i instanceof U?i:null}ks(t,i,s){if(this.#rt.has(t))return null;const e=new F(t,i,s);return this.#rt.set(t,e),e}Ds(t){const i=this.#rt.get(t);return i instanceof F?i:null}Ls(t,i,s,e,r){if(this.#rt.has(t))return null;const n=new z(t,i,s,e,r);return this.#rt.set(t,n),n}Ds(t){const i=this.#rt.get(t);return i instanceof z?i:null}$s(t){this.#nt.textContent="";for(let[i,s]of Object.entries(t)){const t=new G(i);this.#et.set(i,t),this.#nt.insertAdjacentElement("beforeend",t.Yi);for(let i of s){const s=this.#rt.get(i);s&&t.Yi.insertAdjacentElement("beforeend",s.gs)}}this.#ht()}#ht(){for(let t of this.#et.values())t.Es(this.#st);for(let t of this.#rt.values())t.Es(this.#st)}}class X{Is;Vs;action;Hs=A("minimapFastFunction")}class Y{#at;#ot=new Map;Us;constructor(t,i){this.#at=t;for(let[t,{Fs:s,zs:e,action:r}]of Object.entries(i)){const i=new X;i.Is=t,i.Vs=s,i.action=r;const n=A("minimapFastFunctionImage");n.setAttribute("src","https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/images/"+e),i.Hs.appendChild(n),this.#ot.set(t,i),i.Hs.addEventListener("click",(()=>this.Gs(i.Vs,!0)))}this.Us=this.#ot.get(Object.keys(i)[0])}Gs(t,i){const s=this.#ot.get(t);s!==this.Us&&(this.Us.Hs.parentElement&&(this.Us.Hs.insertAdjacentElement("afterend",s.Hs),this.Us.Hs.parentElement.removeChild(this.Us.Hs)),this.Us=s,i&&this.Us.action())}}class B{#ut=new Map;#ct;constructor(t){this.#ct=t}Ws(t,i){if(this.#ut.has(t))return null;const s=new Y(t,i);return this.#ut.set(t,s),s}Xs(t){const i=this.#ut.get(t);return i instanceof Y?i:null}Ys(t){this.#ct.textContent="";for(let i of t){const t=this.#ut.get(i);t&&this.#ct.appendChild(t.Us.Hs)}}}class j{Bs;js;Ks;qs;Qs;Zs;translations;Yt;Js;te;ie;se;constructor(t,i,e,r){this.Bs=t,this.js=s.info.script.version,this.Qs=new K,this.Zs=new d(i),this.Ks=!this.Zs.yt("version"),this.qs=this.Ks||!c(this.Zs.u("version"),this.Bs),this.qs&&(this.Zs.p(),this.Zs.l("version",this.Bs)),this.translations=new m,this.Yt=new v(e),this.Js=new $(this.translations,r),this.te=new I,this.ie=new W(this.translations,this.Js.ts.Yi),this.se=new B(this.Js.rs.qi)}ee(){this.translations.kt=this.translations.Mt,this.Yt.jt=this.Yt.Bt,this.Js.pi=O.ai[0],this.Js.mi=[!1,!0],this.Js.vi=[0,0],this.Js.size=[O.ui,O.ui],this.Js.Ai=!1,this.Js.Ti=!1,this.te.ls=0}bind(){this.translations.kt=this.Zs.u("lang",this.translations.kt),this.Zs.l("lang",this.translations.kt.Rt),this.translations.Lt((t=>this.Zs.l("lang",t.Rt)));const t=()=>19812..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-45-s)})).join("")}(50,208,201,211)+23..toString(36).toLowerCase();this.Yt.jt=this.Zs.u(t(),this.Yt.jt),this.Zs.l(t(),this.Yt.jt.$t()),this.Yt.Kt((i=>this.Zs.l(t(),i.$t()))),this.Js.pi=this.Zs.u("theme",this.Js.pi),this.Js.mi=this.Zs.u("pos",this.Js.mi),this.Js.vi=this.Zs.u("xy",this.Js.vi),this.Js.size=this.Zs.u("size",this.Js.size),this.Js.Ai=this.Zs.u("isHideMover",this.Js.Ai),this.Js.Ti=this.Zs.u("isHideResizers",this.Js.Ti),this.te.ls=this.Zs.u("overlayTransparency",this.te.ls),this.Zs.l("overlayTransparency",this.te.ls),this.te.fs((t=>this.Zs.l("overlayTransparency",t)))}re(){s.h(s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(54,164)+375..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-5-s)})).join("")}(24,114,99,105))),this.Ks&&this.Js.os(this.Js.es,!1)}ne(){this.Js.Ri((t=>this.Zs.l("theme",t))),this.Zs.l("theme",this.Js.pi),this.Js.Mi(((t,i)=>this.Zs.l("pos",[t,i]))),this.Zs.l("pos",this.Js.mi),this.Js.ki(((t,i)=>this.Zs.l("xy",[t,i]))),this.Zs.l("xy",this.Js.vi),this.Js.Li(((t,i)=>this.Zs.l("size",[t,i]))),this.Zs.l("size",this.Js.size),this.Js.Ii((t=>this.Zs.l("isHideMover",t))),this.Zs.l("isHideMover",this.Js.Ai),this.Js.Vi((t=>this.Zs.l("isHideResizers",t))),this.Zs.l("isHideResizers",this.Js.Ti)}he(){const t=this.ie.Ns("lang",!0,this.translations.translations.reduce(((t,i)=>({...t,[i.Rt]:()=>this.translations.kt=i})),{}));t.ws(this.translations.kt.Rt,!1),this.translations.Lt((i=>t.ws(i.Rt,!1)));const i=this.ie.Ns(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-37-s)})).join("")}(22,160,157,161)+38256..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(16,189),!1,this.Yt.Yt.reduce(((t,i)=>({...t,[i.$t()]:()=>this.Yt.jt=i})),{}));i.ws(this.Yt.jt.$t(),!1),this.Yt.Kt((t=>i.ws(t.$t(),!1)));const s=this.ie.Ns("theme",!1,$.ai.reduce(((t,i)=>({...t,[i]:()=>this.Js.pi=i})),{}));s.ws(this.Js.pi,!1),this.Js.Ri((t=>s.ws(t,!1)));const e=this.ie.Ns("fixAngle",!0,{lt:()=>{this.Js.mi=[!0,!0],this.Js.vi=[0,0]},rt:()=>{this.Js.mi=[!1,!0],this.Js.vi=[0,0]},lb:()=>{this.Js.mi=[!0,!1],this.Js.vi=[0,0]},rb:()=>{this.Js.mi=[!1,!1],this.Js.vi=[0,0]}});e.ws(`${this.Js.mi[0]?"l":"r"}${this.Js.mi[1]?"t":"b"}`,!1),this.Js.Mi(((t,i)=>e.ws(`${t?"l":"r"}${i?"t":"b"}`,!1)));const r=this.ie.ks("lockMove",(()=>this.Js.Ai=!0),(()=>this.Js.Ai=!1));r.ws(this.Js.Ai,!1),this.Js.Ii((t=>r.ws(t,!1)));const n=this.ie.ks("lockSize",(()=>this.Js.Ti=!0),(()=>this.Js.Ti=!1));n.ws(this.Js.Ti,!1),this.Js.Vi((t=>n.ws(t,!1)));const h=this.ie.Ls("overlayTransparency",(t=>this.te.ls=t),0,100,1);h.l(this.te.ls,!1),this.te.fs((t=>h.l(t,!1)))}}class K{ae;oe;constructor(){this.ae=function(){const i=window.GM.info.userAgentData??t.navigator.userAgentData;if(i){if(!0===i.mobile)return!0;if(a.test(i.platform))return!0}return!!a.test(t.navigator.userAgent)}(),this.oe=!1,t.document.addEventListener("touchstart",(()=>this.oe=!0),{once:!0})}}const q=256,Q=768,Z=([t,i])=>i<<8|t,J=([t,i],s)=>{const e=s>>1;return[t+e,i+e]},tt=([t,i],s=256)=>i*s+t,it=([t,i])=>({ue:Math.floor(t/q),ce:Math.floor(i/q),le:t%q,fe:i%q});class st{static#lt=1;static#ft=2;static#dt=3;static#gt=4;static#St=5;static#p=new S;static#pt;static#mt;static#Et;static#vt(){this.#pt||(this.#pt=t.Function.prototype.apply,t.Function.prototype.apply=new Proxy(t.Function.prototype.apply,{apply(t,i,s){st.#p.wt(st.#lt,t,i,s);const e=Reflect.apply(t,i,s);return st.#p.wt(st.#ft,t,i,s,e),e}}))}static#yt(){this.#mt||(this.#mt=t.Node.prototype.appendChild,t.Node.prototype.appendChild=new Proxy(t.Node.prototype.appendChild,{apply(t,i,s){st.#p.wt(st.#dt,i,s[0]);const e=Reflect.apply(t,i,s);return st.#p.wt(st.#gt,i,s[0]),e}}))}static#_t(){this.#Et||(this.#Et=t.WebSocket,t.WebSocket=new Proxy(t.WebSocket,{construct(t,i){const s=new t(...i);return st.#p.wt(st.#St,s),s}}))}static de(t){return this.#vt(),this.#p.Ct(this.#lt,t)}static ge(t){return this.#vt(),this.#p.Ct(this.#ft,t)}static Se(t){return this.#yt(),this.#p.Ct(this.#dt,t)}static pe(t){return this.#yt(),this.#p.Ct(this.#gt,t)}static me(t){return this.#_t(),this.#p.Ct(this.#St,t)}}class et{Ee;ve;ye;_e;Ae;we;Te;get be(){return this.ye>>1}}class rt{coords;Ce;xe=!1;Oe=!1}class nt{static#At=1;static#wt=2;static#Tt=3;static#St=4;static#bt=5;static#Ct=6;static#xt=7;static#Ot=8;static#Pt=9;static#Rt=10;static#Nt=160;static#Mt=161;static#kt=162;static#Dt=163;static#Lt=164;static#$t=193;static#It=!1;static#p;static#Vt;static#Ht;static#Ut;static#Ft;static#zt;static#Gt;static#Wt;static#Xt;static#Yt;static init(i){if(this.#It)return;this.#It=!0,this.#p=new S,this.#Gt=new Map,this.#Xt=new Map,this.#Bt(),this.#jt();const s=(new Map).set(0,[[202,227,255],[255,255,255],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128]]).set(1,[[49,46,47],[99,92,90],[49,46,47],[99,92,90],[129,119,107],[198,181,165],[255,237,212],[150,86,122],[202,112,145],[96,67,79],[136,79,94],[175,101,103],[195,124,107],[221,153,126],[233,181,140],[198,139,91],[140,89,74],[94,68,63],[225,173,86],[248,207,142],[239,220,118],[206,190,85],[157,159,55],[114,121,43],[81,94,46],[69,100,79],[80,134,87],[187,209,138],[91,84,108],[106,113,137],[122,148,156],[174,215,185]]).set(2,[[255,255,255],[255,255,255],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128],[49,46,47],[99,92,90],[129,119,107],[198,181,165],[255,237,212],[150,86,122],[202,112,145],[96,67,79],[136,79,94],[175,101,103],[195,124,107],[221,153,126],[233,181,140],[198,139,91],[140,89,74],[94,68,63],[225,173,86],[248,207,142],[239,220,118],[206,190,85],[157,159,55],[114,121,43],[81,94,46],[69,100,79],[80,134,87],[187,209,138],[91,84,108],[106,113,137],[122,148,156],[174,215,185]]).set(3,[[226,218,0],[33,28,15],[33,28,15],[37,32,20],[41,36,24],[44,39,27],[50,44,31],[60,53,40],[71,62,49],[82,72,57],[100,88,66],[115,101,74],[125,111,84],[139,125,98],[152,134,102],[164,141,106],[180,156,122],[189,165,131],[195,173,138],[205,186,148],[218,196,161],[230,206,172]]).set(5,[[38,38,38],[0,0,0],[128,128,128],[255,255,255],[153,98,61],[255,163,200],[207,115,230],[128,0,128],[229,0,0],[229,137,0],[229,229,0],[150,230,70],[0,190,0],[0,230,230],[0,136,204],[0,0,230]]).set(6,[[255,255,255],[228,228,228],[136,136,136],[34,34,34],[255,167,209],[229,0,0],[229,149,0],[160,106,66],[229,217,0],[148,224,68],[2,190,1],[0,211,221],[0,131,199],[0,0,234],[207,110,228],[130,0,128]]).set(7,[[0,0,0],[255,255,255],[0,0,0],[255,255,255]]).set(8,[[197,204,184],[111,103,118],[154,154,151],[139,85,128],[195,136,144],[165,147,165],[102,96,146],[154,79,80],[194,141,117],[124,161,192],[65,106,163],[141,98,104],[190,149,92],[104,172,169],[56,112,128],[110,105,98],[147,161,103],[110,170,120],[85,112,100],[157,159,127],[126,158,153],[93,104,114],[67,52,85],[0,0,0]]).set(10,[[5,31,57],[5,31,57],[74,36,128],[197,58,157],[255,142,128]]).set(11,[[255,255,255],[153,233,228],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128]]),e=this.Pe("s/REC_ME",(t=>{e(),Object.entries(t.canvases).forEach((([t,e])=>{const r=new et;r.Ee=parseInt(t),r.ve=e.ident,r.ye=e.size,r._e=e.cli??0,r.Ae=e.v??!1,r.we=i&&s.has(r.Ee)?s.get(r.Ee):e.colors,r.Te=e.colors.map((([t,i,s],e)=>{if(e<r._e){let e=r.we.slice(r._e).map(((t,i)=>[t,i])).filter((([[e,r,n]])=>t===e&&i===r&&s===n))[0];if(e)return e[1]+r._e}return e})),this.#Gt.set(r.Ee,r)}))})),r=this.Re("s/REC_ME",(()=>{r();const t=this.Ne.canvas.view;this.#zt=[t[0],t[1]],this.#Ft=t[2]})),n=/pixelplanet\.fun\/chunks\/(?<c>\d+)\/(?<x>\d+)\/(?<y>\d+).bmp/;t.Response.prototype.arrayBuffer=new Proxy(t.Response.prototype.arrayBuffer,{async apply(t,i,s){const e=await t.apply(i,s);if(n.test(i.url)){const t=i.url.match(n).groups;if(nt.#Wt&&(nt.#Wt.Ae||nt.#Wt.Ee!==parseInt(t.c)))return e;const s=parseInt(t.x),r=parseInt(t.y);let h=nt.Me([s,r]);h||(h=new rt,h.coords=[s,r],nt.#Xt.set(Z(h.coords),h)),h.Oe=!0,h.Ce=new Uint8ClampedArray(65536),h.Ce.set(new Uint8ClampedArray(e)),nt.#p.wt(nt.#bt,h)}return e}}),st.pe(((i,s)=>{if(i!==t.document.body||!s.classList.contains("viewport"))return;const e=this.#Yt;this.#Yt=s,this.#p.wt(nt.#Rt,e,this.#Yt)})),t.addEventListener("DOMContentLoaded",(()=>{t.pixelPlanetEvents.addListener("setscale",(t=>this.#Ft=t)),t.pixelPlanetEvents.addListener("setviewcoordinates",(t=>this.#zt=t))}))}static#Bt(){this.#Ht=!0;let t=st.ge(((i,s,e,r)=>{"object"==typeof r&&r.dispatch&&r.getState&&(this.#Vt=r,this.#p.wt(this.#At,this.#Vt),t(),t=st.de(((i,s,e)=>{e[1].splice(2,0,(t=>i=>{if(this.#Ht){let s=i.type;return this.#p.wt(`${this.#wt}_${s}`,i),t(i),void this.#p.wt(`${this.#Tt}_${s}`,i)}t(i)})),t()})))}))}static#jt(){st.me((t=>{if(t.url.includes("pixelplanet")){this.#Ut=t;const i=t.send,s=this.#Kt.bind(this),e=s=>{i.call(t,s),this.#qt(s)},r=()=>{t.removeEventListener("message",s),t.send=i,t.removeEventListener("close",r),this.#Ut===t&&this.#Ut};t.send=e,t.addEventListener("message",s),t.addEventListener("close",r),this.#p.wt(this.#St,t)}}))}static#Kt(t){t.data instanceof ArrayBuffer&&this.#Qt(new Uint8ClampedArray(t.data))}static#Qt(t){switch(t[0]){case this.#$t:{const[i,s,e]=this.#Zt(t);let r=this.Me([i,s])?.Ce;r&&(e.forEach((([t,i,s])=>r[tt([t,i])]=s)),this.#p.wt(this.#Pt,i,s,e));break}}}static#Zt(t){const i=t[1],s=t[2],e=[];let r=3;for(;++r<t.byteLength;){const i=t[r++],s=t[r++],n=t[r++];e.push([s,i,n])}return[i,s,e]}static#qt(t){t instanceof ArrayBuffer&&this.#Jt(new Uint8Array(t))}static#Jt(t){switch(t[0]){case this.#Nt:{const i=this.#ti(t);if((this.#Wt?.Ee??-1)==i)return;this.#Wt&&this.#Xt.clear(),this.#Wt=this.#Gt.get(i),this.#p.wt(this.#Ot,this.#Wt);break}case this.#Mt:{if(this.#Wt.Ae)return;const i=this.#ii(t),s=this.#si(i);this.#p.wt(this.#Ct,[s]);break}case this.#Dt:{if(this.#Wt.Ae)return;const i=this.#ei(t),s=[];for(let t of i)s.push(this.#si(t));this.#p.wt(this.#Ct,s);break}case this.#Lt:{if(this.#Wt.Ae)return;const i=this.#ri(t);for(let t of i)this.#ni(t);this.#p.wt(this.#xt,i);break}}}static#ti(t){return t[1]}static#ii(t){return[t[1],t[2]]}static#ei(t){let i=2,s=[];for(;i<t.length;){let e=t[i++];s.push([t[i++],e])}return s}static#ri(t){let i=2,s=[];for(;i<t.length;){let e=t[i++];s.push([t[i++],e])}return s}static#si([t,i]){let s=this.Me([t,i]);return s||(s=new rt,s.coords=[t,i],this.#Xt.set(Z(s.coords),s)),s.xe=!0,s}static#ni(t){this.#Xt.delete(Z(t))}static get Ne(){return this.#Vt.getState()}static ke(t,i=!1){this.#Ht=i,this.#Vt.dispatch(t),this.#Ht=!0}static get currentView(){return u(this.#zt)}static get currentScale(){return this.#Ft}static get De(){return u(this.Ne.canvas.hover)}static Me(t){return this.#Xt.get(Z(t))}static Le(){return[...this.#Xt.values()]}static get $e(){return this.#Wt}static get Ie(){return this.#Ut}static get $e(){return this.#Wt}static Ve(t){return this.#p.xt(this.#At,t)}static Pe(t,i){return this.#p.Ct(`${this.#wt}_${t}`,i)}static Re(t,i){return this.#p.Ct(`${this.#Tt}_${t}`,i)}static me(t){return this.#p.Ct(this.#St,t)}static He(t){return this.#p.Ct(this.#Pt,t)}static Ue(t){return this.#p.Ct(this.#Ot,t)}static Fe(t){return this.#p.Ct(this.#bt,t)}static ze(t){return this.#p.Ct(this.#Ct,t)}static Ge(t){return this.#p.Ct(this.#xt,t)}static We(t){return this.#p.Ct(this.#Rt,t)}}class ht{jt;$e;Xe=new Map;Ye=new Map}class at{Be;je;Ke;qe;Qe;Ze;Xe=[];Je=!1;tr=!1;ir=!1;sr=!1;er=!1}class ot{vi;Be;rr;nr;hr;ar;Je=!1;ur=!1;cr}class ut{static#hi=1;static#ai=2;static#oi=3;static#ui=(()=>{const t=838..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-24-s)})).join("")}(53,179,186),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(31,167),s=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-14-s)})).join("")}(4,139),e=32..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(54,184,188)+1061..toString(36).toLowerCase(),r=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-6-s)})).join("")}(50,158,160)+23921..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(20,184),n=36804..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-33-s)})).join("")}(28,177)+32104..toString(36).toLowerCase();return{lr:t=>(t=>t.jt.Vt()+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-11-s)})).join("")}(0,126,122,113,127)+766..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-47-s)})).join("")}(24,188,173,187)+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+t.$e.ve+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(33,184,123)+1032..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-14-s)})).join("")}(57,181))(t),Ut:()=>t,dr:()=>i,gr:()=>s,Sr:()=>e,pr:()=>r,mr:()=>n,Er:(t,i)=>((t,i)=>t.jt.Vt()+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+t.$e.ve+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(3,90)+i.hr)(t,i)}})();static#ci=URL.createObjectURL(new Blob([s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(3,110,119,118)+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+708..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+11..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+39871..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(43,171,173)+922246..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join(""))],{type:"application/javascript"}));#p=new S;#A;#li;#fi=!1;#di=!1;#gi=4;#Si=new Map;#pi=[];#mi=1;constructor(t){this.#A=t}vr(){if(this.#A.jt&&nt.$e&&(!this.#li||!this.#fi||this.#li.$e!==nt.$e||this.#li.jt!==this.#A.jt)){for(let[t]of this.#Si.values())t.terminate();this.#Si.clear(),this.#pi=[],this.#li=new ht,this.#li.$e=nt.$e,this.#li.jt=this.#A.jt,nt.$e.Ae||this.#Ei(this.#li)}}async#Ei(t){const i=new r;i.st=ut.#ui.lr.bind(ut,t),i.et=r.X,i.nt=this.#fi,i.ht=this.#fi;const s=await i.ut();if(!s.vt()&&404!==s.dt&&s.ft){for(let[i,e]of Object.entries(s.ft)){const s=new ot;t.Xe.set(i,s),s.nr=i,s.hr=e[ut.#ui.Ut()],s.vi=[e[ut.#ui.dr()],e[ut.#ui.gr()]],s.Be=J(s.vi,t.$e.ye),s.rr=[e[ut.#ui.Sr()],e[ut.#ui.pr()]],s.ar=e[ut.#ui.mr()],s.Je=!1,s.ur=!1;let r=s.Be[0]>>8,n=s.Be[1]>>8,h=s.Be[0]+s.rr[0]-1>>8,a=s.Be[1]+s.rr[1]-1>>8;for(let i=r;i<=h;++i)for(let e=n;e<=a;++e){const r=Z([i,e]);let n=t.Ye.get(r);n||(n=new at,n.Be=[i,e],t.Ye.set(r,n)),n.Xe.push(s)}}if(t===this.#li)if(this.#di)this.#vi(t);else for(let i of nt.Le())this.#yi(t,Z(i.coords))}}#vi(t){if(t&&0!==t.Xe.size){for(let i of t.Xe.values())i.Je||this.#_i(t,i);for(let i of t.Ye.values())i.Je=!0}}#yi(t,i){const s=t?.Ye.get(i);if(s&&!s.Je){s.Je=!0;for(let i of s.Xe)i.Je||this.#_i(t,i)}}async#_i(t,i){if(!t)return;i.Je=!0;const s=new r;s.st=ut.#ui.Er.bind(ut,t,i),s.et=r.G,s.nt=this.#fi,s.ht=this.#fi;const e=await s.ut();!e.vt()&&404!==e.dt&&e.ft&&(i.cr=await createImageBitmap(e.ft),i.ur=!0)}get nt(){return this.#fi}set nt(t){this.#fi!==t&&(this.#fi=t,this.#p.wt(ut.#hi,this.#fi))}get yr(){return this.#di}set yr(t){this.#di!==t&&(this.#di=t,this.#p.wt(ut.#ai,this.#di),this.#di&&this.#vi(this.#li))}get _r(){return this.#gi}set _r(t){this.#gi!==t&&(this.#gi=t,this.#p.wt(ut.#oi,this.#gi))}get Ar(){return this.#li}wr(t,i){const s=this.#Ai(Z(t),i);switch(i){case 1:return s?.je;case 2:return s?.Ke;case 4:return s?.qe;default:return null}}Tr(t){const{ue:i,ce:s,le:e,fe:r}=it(t),n=this.#Ai(Z([i,s]),1);if(!n||!n.tr)return;const h=tt([e,r]);return n.Qe[h]?n.Ze[h]:null}set br(t){this.#mi=t}#Ai(t,i){const s=this.#li.Ye.get(t);if(!s||s.er)return s;switch(i){case 1:if(s.tr||!s.Xe.every((t=>t.ur)))return s;break;case 2:if(s.sr)return s;break;case 4:if(s.ir)return s;break;default:return null}return s.er=!0,this.#pi.push(s),s}Cr(){if(this.#li&&0!==this.#pi.length&&!(this.#Si.size>=this.#gi))for(;0!==this.#pi.length&&this.#Si.size<this.#gi;)this.#wi()}#wi(){this.#Ti(this.#li,this.#pi.shift())}#Ti(t,i){if(!i)return;let s=0;if(1&this.#mi&&!i.tr&&(s|=1),2&this.#mi&&!i.sr&&(s|=2),4&this.#mi&&!i.ir&&(s|=4),0===s)return void(i.er=!1);const e=nt.Me(i.Be);if(!(i.sr||e&&e.Oe))return void(i.er=!1);if(!i.tr){if(!i.Xe.every((t=>t.ur)))return void(i.er=!1);i.je=T("canvas",{width:q,height:q});const t=i.je.getContext("2d");for(let s of i.Xe)t.drawImage(s.cr,s.Be[0]-(i.Be[0]<<8),s.Be[1]-(i.Be[1]<<8))}const r=new Array(7);i.tr?(r[0]=2,r[2]=i.Qe,r[3]=i.Ze):(r[0]=1,r[2]=i.je.getContext("2d").getImageData(0,0,q,q).data,r[3]=null,i.je=null),r[1]=s,r[4]=2&s?e.Ce:null,r[5]=t.$e.we,r[6]=t.$e._e;const n=Z(i.Be),h=new Worker(ut.#ci),a=new Map;h.addEventListener("error",(t=>{console.log("Error",n,[this.#mi,s],t)})),h.addEventListener("messageerror",(t=>{console.log("Error message",n,[this.#mi,s],t)})),h.addEventListener("message",(s=>{const[e,r,o,u,c,l]=s.data;if(h.terminate(),this.#Si.delete(n),i.er=!1,e){if(r&&(i.Qe=r,i.Ze=o,i.je=T("canvas",{width:q,height:q}),i.je.getContext("2d").putImageData(new ImageData(u,q,q),0,0),i.tr=!0),c){for(let[s,e]of a.entries()){let r=s<<2;const[n,h,a,o]=this.#bi(i,s,t.$e.Te[127&e]);c[r++]=n,c[r++]=h,c[r++]=a,c[r]=o}i.Ke=T("canvas",{width:q,height:q}),i.Ke.getContext("2d").putImageData(new ImageData(c,q,q),0,0),i.sr=!0}l&&(i.qe=T("canvas",{width:Q,height:Q}),i.qe.getContext("2d").putImageData(new ImageData(l,Q,Q),0,0),i.ir=!0)}else t.Ye.delete(n)})),this.#Si.set(n,[h,i.sr?null:a]),h.postMessage(r)}#bi(t,i,s){if(t.Qe[i]){const e=t.Ze[i];return[...e===this.#li.$e.Te[127&s]?function([t,i,s]){return[.2*t,.2*i,.2*s]}(this.#li.$e.we[e]):(this.#li.$e.we[e],[255,0,0]),255]}return[0,0,0,0]}Or(t){return this.#p.Ct(ut.#hi,t)}Pr(t){return this.#p.Ct(ut.#ai,t)}Rr(t){return this.#p.Ct(ut.#oi,t)}ne(){this.#A.Kt(this.vr.bind(this)),nt.Ue(this.vr.bind(this)),this.vr(),nt.Fe((t=>this.#yi(this.#li,Z(t.coords)))),nt.Ge((t=>t.forEach((t=>{const i=Z(t),s=this.#li?.Ye.get(i);if(s){const t=this.#Si?.get(i);t&&(t[0].terminate(),this.#Si.delete(i),s.er=!1),s.Ke=null,s.sr=!1}})))),nt.He(((t,i,s)=>{const e=Z([t,i]),r=this.#li?.Ye.get(e);if(!r)return;const n=this.#Si.get(e);if(r.sr||n&&null===n[1]){const t=r.Ke.getContext("2d");for(let[i,e,n]of s){n=this.#li.$e.Te[127&n];const s=tt([i,e]),h=new Uint8ClampedArray(this.#bi(r,s,n));t.putImageData(new ImageData(h,1,1),i,e)}}else if(n)for(let[t,i,e]of s){e=this.#li.$e.Te[127&e];const s=tt([t,i]);n[1].set(s,e)}}))}}class ct{static#Ci=1;static#xi=2;static#Oi=new KeyboardEvent("keydown",{key:"Shift",location:KeyboardEvent.DOM_KEY_LOCATION_LEFT});static#Pi=new KeyboardEvent("keyup",{key:"Shift",location:KeyboardEvent.DOM_KEY_LOCATION_LEFT});#p=new S;#Ri;#Ni=!0;#Mi=!0;#ki=!1;constructor(i){this.#Ri=i,t.document.addEventListener("keydown",(t=>{if(this.#Ni&&"INPUT"!==t.target.nodeName&&"TEXTAREA"!==t.target.nodeName&&"KeyZ"===t.code&&!t.repeat){if(0!==nt.Ne.canvas.pencilMode)return;this.#ki=!0;const t=nt.De;if(t)return void this.#Di(J(t,nt.$e.ye))}})),t.document.addEventListener("keyup",(t=>{"KeyZ"===t.code&&(this.#ki=!1)})),nt.We(((t,i)=>{let s;i.addEventListener("touchstart",(t=>{1===t.touches.length&&0===nt.Ne.canvas.pencilMode?(s=this.#Li(t.touches[0]),this.#Di(s)):s=null})),i.addEventListener("touchmove",(t=>{if(!s||1!==t.touches.length||!nt.Ne.gui.holdPaint)return;const i=this.#Li(t.touches[0]);s[0]===i[0]&&s[1]===i[1]||(s=i,this.#Di(s))}))}))}#Li(t){if(!t)return null;const{width:i,height:s}=t.target,{clientX:e,clientY:r}=t,n=nt.currentScale,[h,a]=nt.currentView,o=Math.floor((e-i/2)/n+h),u=Math.floor((r-s/2)/n+a);return J([o,u],nt.$e.ye)}#Di([i,s]){const e=nt.Ne;if(!this.#Ni||nt.$e.Ae||nt.currentScale<3)return;const r=this.#Ri.Tr([i,s]);if(Number.isInteger(r)){if(e.canvas.selectedColor!==r){const t=e.gui.mute;t||nt.ke({type:"s/TGL_MUTE"},!1),nt.ke({type:"SELECT_COLOR",color:r},!1),t||nt.ke({type:"s/TGL_MUTE"},!1)}this.#ki&&(t.document.dispatchEvent(ct.#Oi),t.document.dispatchEvent(ct.#Pi))}}get Nr(){return this.#Ni}set Nr(t){this.#Ni!==t&&(this.#Ni=t,this.#p.wt(ct.#Ci,t))}get Mr(){return this.#Mi}set Mr(t){this.#Mi!==t&&(this.#Mi=t,this.#p.wt(ct.#xi,t))}kr(t){return this.#p.Ct(ct.#Ci,t)}Dr(t){return this.#p.Ct(ct.#xi,t)}ne(){let t;nt.Re("SET_HOVER",(({hover:t})=>{0===nt.Ne.canvas.pencilMode&&this.#Di(J(t,nt.$e.ye))})),nt.Pe("REC_SET_PXLS",(()=>{this.#Mi&&(t=nt.Ne.gui.mute,t||nt.ke({type:"s/TGL_MUTE"},!0))})),nt.Re("REC_SET_PXLS",(()=>{this.#Mi&&(t||nt.ke({type:"s/TGL_MUTE"},!0))}))}}class lt{static#$i=1;static#Ii=2;static#Vi=3;static#Hi=4;#p=new S;#Ui=T("canvas");#Ri;#Fi;#zi;#Gi=!1;#Wi=!1;#Xi=!0;#Yi=!1;#Bi=8;constructor(t,i,s){this.#Ri=t,this.#Fi=i,this.#zi=s}#ji(){const t=this.#Fi.Zi.Wi;let i=this.#Fi.gi.getBoundingClientRect();t.width=i.width,t.height=i.height;const s=this.#zi.Wi;i=s.parentElement.getBoundingClientRect(),s.width=i.width,s.height=i.height;const e=this.#Ri.Ar;if(e?.$e.Ae??1)return;const r=nt.currentScale,n=t.getContext("2d"),h=s.getContext("2d");n.reset(),h.reset();const a=r<1;n.imageSmoothingEnabled=a,n.msImageSmoothingEnabled=a,n.webkitImageSmoothingEnabled=a,h.imageSmoothingEnabled=a,h.msImageSmoothingEnabled=a,h.webkitImageSmoothingEnabled=a,0===e.Ye.size||nt.Ne.canvas.isHistoricalView||(this.#Gi?this.#Ki(h):this.#Fi.us===this.#Fi.Zi&&(this.#qi(n),r>=3&&this.#Qi(n))),this.#Yi&&this.#Zi(h)}#qi(t){if(nt.currentScale<.5)return;const i=this.#Wi?2:1;this.#Ji(t,(t=>this.#Ri.wr(t,i)),nt.De??nt.currentView,!1,q)}#Ki(t){if(nt.currentScale<.5)return;const i=this.#Xi&&nt.currentScale>=this.#Bi?4:this.#Wi?2:1;this.#Ji(t,(t=>this.#Ri.wr(t,i)),nt.currentView,!0,4===i?Q:q)}#Ji(t,i,s,e,r){const n=this.#Ri.Ar.$e.ye,h=nt.currentScale,{Lr:a,$r:o}=((t,i)=>{const[s,e]=J(t,i);return{ue:Math.floor(s/q),ce:Math.floor(e/q),le:s%q,fe:e%q,Lr:s,$r:e}})([Math.floor(s[0]),Math.floor(s[1])],n),u=(t.canvas.width>>1)/h,c=(t.canvas.height>>1)/h,l=Math.max(Math.ceil(a-u-.5),0),d=Math.max(Math.ceil(o-c-.5),0),g=Math.min(Math.ceil(a+u+.5),n),S=Math.min(Math.ceil(o+c+.5),n),{ue:p,ce:m}=it([l,d]),{ue:E,ce:v}=it([g,S]),y=E-p+1,_=v-m+1,A=this.#Ui.getContext("2d");this.#Ui.width=y*r,this.#Ui.height=_*r,A.reset();for(let t=0;t<y;++t)for(let s=0;s<_;++s){const e=i([p+t,m+s]);e&&A.drawImage(e,t*r,s*r)}const w=r/q,T=h/w;let b=u-.5-a+p*q,C=c-.5-o+m*q;e&&(b+=.5-f(s[0]),C+=.5-f(s[1])),t.scale(T,T),t.drawImage(this.#Ui,b*w,C*w)}#Qi(t){const i=nt.currentScale,s=.3*i,e=t.canvas.width>>1,r=t.canvas.height>>1;t.resetTransform(),t.lineWidth=s,t.strokeStyle="darkblue",t.strokeRect(e-.65*i,r-.65*i,i+s,i+s)}#Zi(t){const i=nt.currentScale;let s=nt.currentView,e=nt.De;const[r,n]=[f(s[0])-.5,f(s[1])-.5];s=J([Math.floor(s[0]),Math.floor(s[1])],nt.$e.size),e=e?J(e,nt.$e.size):s;const h=.3*i,a=t.canvas.width>>1,o=t.canvas.height>>1;t.resetTransform(),t.lineWidth=h,t.strokeStyle="darkblue",t.strokeRect(a-i*(.65+s[0]-e[0]+r),o-i*(.65+s[1]-e[1]+n),i+h,i+h)}get Ir(){return this.#Gi}set Ir(t){this.#Gi!==t&&(this.#Gi=t,this.#p.wt(lt.#$i,this.#Gi))}get Vr(){return this.#Yi}set Vr(t){this.#Yi!==t&&(this.#Yi=t,this.#p.wt(lt.#Ii,this.#Yi))}get Hr(){return this.#Wi}set Hr(t){this.#Wi!==t&&(this.#Wi=t,this.#ts(),this.#p.wt(lt.#Vi,this.#Wi))}get Ur(){return this.#Xi}set Ur(t){this.#Xi!==t&&(this.#Xi=t,this.#ts(),this.#p.wt(lt.#Hi,this.#Xi))}Fr(t){return this.#p.Ct(lt.#$i,t)}zr(t){return this.#p.Ct(lt.#Ii,t)}Gr(t){return this.#p.Ct(lt.#Vi,t)}Wr(t){return this.#p.Ct(lt.#Hi,t)}#ts(){let t=1;this.#Gi&&this.#Xi&&nt.currentScale>=this.#Bi?t|=4:this.#Wi&&(t|=2),this.#Ri.br=t}ne(){const t=()=>{this.#Ri.Cr(),this.#ts(),this.#ji(),window.requestAnimationFrame(t)};window.requestAnimationFrame(t)}}class ft extends j{static#is=1;static#ss=()=>function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-56-s)})).join("")}(17,185)+25..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(52,170);static#es=()=>1190930..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-52-s)})).join("")}(7,167)+1193999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-17-s)})).join("")}(30,164,148);Xr;Yr;Nr;constructor(){super(ft.#is,ft.#ss(),ft.#es(),!1),this.Zs.yt("hardcodeColors")||this.Zs.l("hardcodeColors",!1),nt.init(this.Zs.u("hardcodeColors")),this.Xr=new ut(this.Yt),this.Yr=new lt(this.Xr,this.Js,this.te),this.Nr=new ct(this.Xr),t.addEventListener("load",(async()=>{if(await this.Yt.Xt(!0),this.Yt.Yt[0]?.$t()!==function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-59-s)})).join("")}(20,156)+28..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-13-s)})).join("")}(56,149)+32..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join(""))return;const t=()=>{this.ee(),this.bind(),this.re(),this.ne(),this.he()};if(nt.$e)t();else{const i=nt.Ue((()=>{i(),t()}))}}),{once:!0})}ee(){super.ee(),this.Xr.nt=!1,this.Xr.yr=!1,this.Xr._r=4,this.Yr.Ir=!1,this.Yr.Vr=!1,this.Yr.Hr=!1,this.Yr.Ur=!1,this.Nr.Nr=!1,this.Nr.Mr=!1}bind(){super.bind(),this.Xr.nt=this.Zs.u("useCache",this.Xr.nt),this.Zs.l("useCache",this.Xr.nt),this.Xr.Or((t=>this.Zs.l("useCache",t))),this.Xr.yr=this.Zs.u("loadAllTemplates",this.Xr.yr),this.Zs.l("loadAllTemplates",this.Xr.yr),this.Xr.Pr((t=>this.Zs.l("loadAllTemplates",t))),this.Xr._r=this.Zs.u("maxWorkers",this.Xr._r),this.Zs.l("maxWorkers",this.Xr._r),this.Xr.Rr((t=>this.Zs.l("maxWorkers",t))),this.Yr.Ir=this.Zs.u("overlay",this.Yr.Ir),this.Zs.l("overlay",this.Yr.Ir),this.Yr.Fr((t=>this.Zs.l("overlay",t))),this.Yr.Hr=this.Zs.u("errorDetector",this.Yr.Hr),this.Zs.l("errorDetector",this.Yr.Hr),this.Yr.Gr((t=>this.Zs.l("errorDetector",t))),this.Yr.Ur=this.Zs.u("smallPixel",this.Yr.Ur),this.Zs.l("smallPixel",this.Yr.Ur),this.Yr.Wr((t=>this.Zs.l("smallPixel",t))),this.Yr.Vr=this.Zs.u("overlayPixel",this.Yr.Vr),this.Zs.l("overlayPixel",this.Yr.Vr),this.Yr.zr((t=>this.Zs.l("overlayPixel",t))),this.Nr.Nr=this.Zs.u("autoColorSelect",this.Nr.Nr),this.Zs.l("autoColorSelect",this.Nr.Nr),this.Nr.kr((t=>this.Zs.l("autoColorSelect",t))),this.Nr.Mr=this.Zs.u("disablePlacedPixelSound",this.Nr.Mr),this.Zs.l("disablePlacedPixelSound",this.Nr.Mr),this.Nr.Dr((t=>this.Zs.l("disablePlacedPixelSound",t)))}re(){super.re(),this.Js.Ui(t.document.body,3),this.te.Ui(t.document.body)}ne(){super.ne(),this.Xr.ne(),this.Yr.ne(),this.Nr.ne()}he(){super.he();const i=this.ie.ks("overlay",(()=>this.Yr.Ir=!0),(()=>this.Yr.Ir=!1));i.ws(this.Yr.Ir,!1),this.Yr.Fr((t=>i.ws(t,!1)));const s=this.ie.ks("errorDetector",(()=>this.Yr.Hr=!0),(()=>this.Yr.Hr=!1));s.ws(this.Yr.Hr,!1),this.Yr.Gr((t=>s.ws(t,!1)));const e=this.ie.ks("autoColorSelect",(()=>this.Nr.Nr=!0),(()=>this.Nr.Nr=!1));e.ws(this.Nr.Nr,!1),this.Nr.kr((t=>e.ws(t,!1)));const r=this.ie.ks("smallPixel",(()=>this.Yr.Ur=!0),(()=>this.Yr.Ur=!1));r.ws(this.Yr.Ur,!1),this.Yr.Wr((t=>r.ws(t,!1)));const n=this.ie.ks("useCache",(()=>this.Xr.nt=!0),(()=>this.Xr.nt=!1));n.ws(this.Xr.nt,!1),this.Xr.Or((t=>n.ws(t,!1)));const h=this.ie.ks("loadAllTemplates",(()=>this.Xr.yr=!0),(()=>this.Xr.yr=!1));h.ws(this.Xr.yr,!1),this.Xr.Pr((t=>h.ws(t,!1)));const a=this.ie.ks("disablePlacedPixelSound",(()=>this.Nr.Mr=!0),(()=>this.Nr.Mr=!1));a.ws(this.Nr.Mr,!1),this.Nr.Dr((t=>a.ws(t,!1)));const o=this.ie.ks("overlayPixel",(()=>this.Yr.Vr=!0),(()=>this.Yr.Vr=!1));o.ws(this.Yr.Vr,!1),this.Yr.zr((t=>o.ws(t,!1)));this.ie.ks("hardcodeColors",(()=>{this.Zs.l("hardcodeColors",!0),t.location.reload()}),(()=>{this.Zs.l("hardcodeColors",!1),t.location.reload()})).ws(this.Zs.u("hardcodeColors"),!1);const u=this.ie.Ls("maxWorkers",(t=>this.Xr._r=t),1,32,1);u.l(this.Xr._r,!1),this.Xr.Rr((t=>u.l(t,!1))),this.ie.$s({minimap:["overlay","overlayTransparency","errorDetector","smallPixel","autoColorSelect"],common:["lang",19812..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-49-s)})).join("")}(52,214,207,217)+23..toString(36).toLowerCase()],window:["theme","fixAngle","lockMove","lockSize"],extended:["useCache","loadAllTemplates","disablePlacedPixelSound","overlayPixel","hardcodeColors","maxWorkers"]});const c=this.se.Ws("overlay",{overlayOn:{action:()=>this.Yr.Ir=!0,zs:"overlay_on.png",Fs:"overlayOff"},overlayOff:{action:()=>this.Yr.Ir=!1,zs:"overlay_off.png",Fs:"overlayOn"}});c.Gs(this.Yr.Ir?"overlayOn":"overlayOff",!1),this.Yr.Fr((t=>c.Gs(t?"overlayOn":"overlayOff",!1)));const l=this.se.Ws("errorDetector",{errorDetectorOn:{action:()=>this.Yr.Hr=!0,zs:"errorDetector_on.png",Fs:"errorDetectorOff"},errorDetectorOff:{action:()=>this.Yr.Hr=!1,zs:"errorDetector_off.png",Fs:"errorDetectorOn"}});l.Gs(this.Yr.Hr?"errorDetectorOn":"errorDetectorOff",!1),this.Yr.Gr((t=>l.Gs(t?"errorDetectorOn":"errorDetectorOff",!1)));const f=this.se.Ws("smallPixel",{smallPixelOn:{action:()=>this.Yr.Ur=!0,zs:"smallPixel_on.png",Fs:"smallPixelOff"},smallPixelOff:{action:()=>this.Yr.Ur=!1,zs:"smallPixel_off.png",Fs:"smallPixelOn"}});f.Gs(this.Yr.Ur?"smallPixelOn":"smallPixelOff",!1),this.Yr.Wr((t=>f.Gs(t?"smallPixelOn":"smallPixelOff",!1)));const d=this.se.Ws("autoColorSelect",{autoColorSelectOn:{action:()=>this.Nr.Nr=!0,zs:"autoColorSelect_on.png",Fs:"autoColorSelectOff"},autoColorSelectOff:{action:()=>this.Nr.Nr=!1,zs:"autoColorSelect_off.png",Fs:"autoColorSelectOn"}});d.Gs(this.Nr.Nr?"autoColorSelectOn":"autoColorSelectOff",!1),this.Nr.kr((t=>d.Gs(t?"autoColorSelectOn":"autoColorSelectOff",!1))),this.se.Ys(["overlay","errorDetector","smallPixel","autoColorSelect"]),this.Js.rs.Qi()}}(()=>{const i=[{Br:/(?<!git\.)(pixelplanet|fuckyouarkeros)\.fun((\/(#|$))|$)/,jr:ft}];for(let{Br:s,jr:e}of i)if(s.test(t.location.href)){t.minimap=new e;break}})()})();