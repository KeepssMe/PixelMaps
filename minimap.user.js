// ==UserScript==
// @name Pixel Minimap (Test)
// @description OMG. I made a minimap. (At least I hope)
// @version 0.3.1.3
// @author KeepssMe | Thank you Sallbet for testing and listening to my whining
// @exclude *git.pixelplanet.fun/*
// @match *.pixelplanet.fun/*
// @match *pixelplanet.fun/*
// @match *fuckyouarkeros.fun/*
// @match *pixelzone.io/*
// @match *pixelcanvas.io/*
// @connect raw.githubusercontent.com
// @downloadURL https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/minimap.user.js
// @grant GM_getResourceText
// @grant GM_addStyle
// @grant GM_addElement
// @grant GM_listValues
// @grant GM_setValue
// @grant GM_getValue
// @grant GM_deleteValue
// @grant GM_xmlhttpRequest
// @iconURL https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/icons/icon-min.png
// @namespace https://github.com/KeepssMe/PixelMinimap
// @resource PPF_CHUNKCHECKER https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/ppf.chunkchecker.js
// @resource TRANSLATIONS https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/translations.json
// @resource STYLES https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/styles.css
// @resource VIEWS https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/views.html
// @run-at document-start
// @sandbox raw
// @updateURL https://raw.githubusercontent.com/KeepssMe/PixelMaps/test/minimap.user.js
// ==/UserScript==

(()=>{const t=unsafeWindow,i=window;class s{static info=i.GM.info;static t=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-18-s)})).join("")}(33,148,129,122)+21269..toString(36).toLowerCase()+34..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+690366..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-8-s)})).join("")}(14,122,136)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(19,204,184,166)+29..toString(36).toLowerCase()];static i=t=>JSON.parse(s.t(t));static#t=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-1-s)})).join("")}(31,136,132,129,110,103)+13..toString(36).toLowerCase()+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+998726..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(53,192)+29..toString(36).toLowerCase()];static addElement(t,i={},s=null){return s?this.#t(s,t,i):this.#t(t,i)}static h=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(42,190,186,183,164,157)+13..toString(36).toLowerCase()+35..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+1078..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-20-s)})).join("")}(45,173)+14..toString(36).toLowerCase()]}class r{static u=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(19,128,130,116,97,90)+1037..toString(36).toLowerCase()+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+381..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(6,156,171)+28..toString(36).toLowerCase()];static o=i[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(3,166,150,151,142)+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+13746..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-41-s)})).join("")}(37,179)];static l=i[function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(6,138,151,130,111,104)+29..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(61,181,171,159,147)+14..toString(36).toLowerCase()];static S=i[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-2-s)})).join("")}(59,172,164,162,156)+19202..toString(36).toLowerCase()+12..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-34-s)})).join("")}(22,153)+28310..toString(36).toLowerCase()];static p=()=>r.u().forEach((t=>r.S(t)));static getEntries=()=>r.u().reduce(((t,i)=>({...t,[i]:r.o(i)})),{})}class e{static#i=window[857..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+43581..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(32,166,146,175,178,177,164)+34790..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(56,211)+29..toString(36).toLowerCase()];static#s=(()=>{const t=11..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(59,198,194)+11..toString(36).toLowerCase(),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(15,116)+999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-2-s)})).join("")}(17,141,116)+11..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-6-s)})).join("")}(1,111,111,110,124)+27..toString(36).toLowerCase(),s=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-46-s)})).join("")}(8,160)+1032..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-60-s)})).join("")}(33,203),r=28..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-41-s)})).join("")}(9,165,166)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-19-s)})).join("")}(46,162)+22..toString(36).toLowerCase(),e=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-23-s)})).join("")}(3,146,127,138,126)+29039..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(35,209),n=29..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-15-s)})).join("")}(42,158)+1217..toString(36).toLowerCase(),h=30..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(18,160)+21..toString(36).toLowerCase(),a=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(19,171)+690396..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-0-s)})).join("")}(45,161,155)+14..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(24,181,143)+914..toString(36).toLowerCase(),u=27..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(60,173,175,163,183,165)+620546..toString(36).toLowerCase(),o=852..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(25,132,133)+12..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(7,157,159),c=24..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(26,165)+27..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(60,195,200,178,174,177)+2296106198159..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(63,170)+14..toString(36).toLowerCase(),l=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-7-s)})).join("")}(49,167,167)+13380..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(25,171,168),f=887..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(34,175)+999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-32-s)})).join("")}(63,206)+27..toString(36).toLowerCase(),d=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-20-s)})).join("")}(10,140,141,141)+874..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-26-s)})).join("")}(9,135),g=35506..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(45,157,194,172)+37973..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(28,187),S=531..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(30,186,188)+27..toString(36).toLowerCase(),p=986..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(30,181,181,181,183)+28..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-8-s)})).join("")}(24,133),E=1037..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-37-s)})).join("")}(31,185,165)+1108..toString(36).toLowerCase();return{m:()=>t,A:()=>i,_:()=>s,T:()=>r,C:()=>e,R:()=>n,N:()=>h,M:()=>a,k:()=>u,O:()=>o,$:()=>c,I:()=>l,D:()=>f,L:()=>d,P:()=>g,V:()=>S,H:()=>p,U:()=>E}})();static F=0;static Y=1;static B=2;static G=3;static W=4;static X=5;static j=6;static q=0;static K=1;static Z=2;static J=3;static tt=4;static it=5;static#r(t){switch(t){case this.Y:return this.#s.m();case this.B:return this.#s.A();case this.G:return this.#s._();case this.W:return this.#s.T();case this.X:return this.#s.C();case this.j:return this.#s.R();default:return null}}st;et=e.F;nt=!0;ht=!0;#e=e.q;#n;#h;get ut(){return this.#e}async ot(t=!1){switch(this.#e){case e.q:return await this.#a();case e.tt:case e.it:return t?await this.#a():this.#h;default:return await this.#n}}async#a(){let t;return this.#h=void 0,this.#e=e.q,this.#n=new Promise((i=>{try{t=e.#i({[e.#s.N()]:"function"==typeof this.st?this.st(this):this.st,[e.#s.M()]:e.#r(this.et),[e.#s.O()]:!this.nt,[e.#s.k()]:this.ht,[e.#s.$()]:t=>{this.#e=t[e.#s.P()]},[e.#s.I()]:t=>{this.#e=e.it;const s=new n;s.ct=!0,i(s)},[e.#s.D()]:t=>{const s=new n;s.errorText=t[e.#s.V()],i(s)},[e.#s.L()]:t=>{const s=new n;s.ft=t[e.#s.H()],s.dt=t[e.#s.U()],i(s)}})}catch(t){const s=new n;s.gt=t,i(s)}})),this.#n.abort=t.abort,this.#h=await this.#n,this.#h}St(){this.#n?.abort()}Et(){const t=new e;return t.st=this.st,t.et=this.et,t.nt=this.nt,t.ht=this.ht,t}}class n{dt=0;ft=null;ct=!1;errorText=null;gt=null;vt(){return this.errorText||this.gt}}function h(t){return null==t}const a=/Mobile|Android|webOS|iPhone|iPod|iPad|BlackBerry|Windows Phone|Windows Mobile|Opera Mini|WPDesktop|IEMobile|Fennec|Nokia/i;const u=new Error("Incorrect value type");function o(t){switch(typeof t){case"number":case"boolean":case"string":case"bigint":case"undefined":return t;case"object":if(null===t)return null;let i=Array.isArray(t)?[]:{};for(let s in t)t.hasOwnProperty(s)&&(i[s]=o(t[s]));return i;default:throw u}}function c(t,i){if(t===i)return!0;const s=typeof t;if(s!==typeof i)return!1;switch(s){case"number":case"boolean":case"string":case"bigint":case"undefined":return!1;case"object":if(null===t)return!1;let s=Array.isArray(t);if(s!==Array.isArray(i))return!1;if(s){if(t.length!==i.length)return!1}else if(Object.keys(t).length!==Object.keys(i).length)return!1;for(let s in t)if(t.hasOwnProperty(s)&&(!i.hasOwnProperty(s)||!c(t[s],i[s])))return!1;return!0;default:throw u}}function l(t,i,s){return Math.max(t,Math.min(i,s))}function f(t){return Math.abs(t-Math.floor(t))}function d(t){return t-Math.floor(t)}class g{#u={};#o;constructor(t){this.#o=t+"_",r.u().filter((i=>i.startsWith(t))).forEach((t=>this.#u[t.slice(this.#o.length)]=r.o(t,void 0)))}#c(t){return this.#o+t}yt(t){return this.#u.hasOwnProperty(t)}o(t){return o(this.#u[t])}l(t,i){c(this.#u[t],i)||(r.l(this.#c(t),i),this.#u[t]=o(i))}S(t){delete this.#u[t],r.S(this.#c(t))}p(){for(let t of Object.keys(this.#u))delete this.#u[t],r.S(this.#c(t))}}class S{At=new Set;wt=new Set}class p{#l=new Map;_t(t,...i){const s=this.#l.get(t);if(!s)return;const{At:r,wt:e}=s;r.forEach((t=>{try{t(...i)}catch(t){console.error(t)}})),e.forEach((t=>r.delete(t))),0===r.size?this.#l.delete(t):e.clear()}Tt(t){return 0!==this.#l.get(t)?.At.size??!1}bt(t){return this.#l.get(t)?.At.size??0}Ct(t,i){return this.#f(t,i,!1)}Rt(t,i){return this.#f(t,i,!0)}#f(t,i,s=!1){let r=this.#l.get(t);r||(r=new S,this.#l.set(t,r));const{At:e,wt:n}=r;return e.has(i)||(e.add(i),s&&n.add(i)),this.Nt.bind(this,t,i)}Nt(t,i){const s=this.#l.get(t);if(!s)return;const{At:r,wt:e}=s;r.delete(i),e.delete(i),0===r.length&&this.#l.delete(t)}Mt(t){const i=this.#l.get(t);i&&(i.At.clear(),i.wt.clear(),this.#l.delete(t))}}class E{xt;kt;translations}class v{static#d=1;static#g=new Map;static#S;static{const i=()=>10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(39,161)+17..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-52-s)})).join("")}(27,147,157,163,157)+10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-62-s)})).join("")}(28,163)+1146..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(5,123),r=s.i(i()),e=new Map;for(let t of r){if(this.#g[t.name])continue;const i=new E;i.xt=t.name,i.kt=t.langs,i.translations=t.translations,this.#g[i.xt]=i,i.kt.filter((t=>!e.has(t))).forEach((t=>e.set(t,i)))}this.#S=Object.values(this.#g)[0];for(let i of t.navigator.languages)if(e.has(i)){this.#S=e.get(i);break}}#p=new p;#E;constructor(){this.#E=v.#S}get translations(){return[...Object.values(v.#g)]}get Ot(){return v.#S}get $t(){return this.#E}set $t(t){t instanceof E&&(t=t.xt);let i=v.#g[t]??v.#S;this.#E!==i&&(this.#E=i,this.#p._t(v.#d,i))}It(t){return this.#E.translations[t]??t}Dt(t){return this.#p.Ct(v.#d,t)}}class m{Lt;Pt;Vt}class y{static#s=(()=>{const t=838..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-22-s)})).join("")}(11,142)+14..toString(36).toLowerCase(),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-46-s)})).join("")}(11,179,173)+25..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(33,161),s=30..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-42-s)})).join("")}(16,172)+21..toString(36).toLowerCase();return{Ht:t=>29945008..toString(36).toLowerCase()+10..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+1147..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-28-s)})).join("")}(51,200,146,215,208,198,212,205,205,192,206,192,205,206,186,204,190,201,189,186,128,200,177,193)+886..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-4-s)})).join("")}(35,129,95,147,147,159,145,146,145,138,124,86)+24530..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-10-s)})).join("")}(36,95,162,154)+22..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-38-s)})).join("")}(43,131,193,187,178)+t+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(47,155,159,151)+12..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(23,199,199,192,202)+28..toString(36).toLowerCase()+30..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-9-s)})).join("")}(51,176,166)+24..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-24-s)})).join("")}(56,190),zt:()=>t,Ut:()=>i,Ft:()=>s}})();static Yt=1;static Bt=2;static#v(t,i){return t&&i&&t.Lt()===i.Lt()&&t.Pt()===i.Pt()&&t.Vt()===i.Vt()}#p=new p;#m=new e;#y;#A=()=>null;#w=[];#_=null;#T=null;constructor(t){this.#m.nt=!1,this.#m.ht=!0,this.#m.et=e.G,this.#m.st=y.#s.Ht.bind(y,t),this.Gt()}get Wt(){return[...this.#w]}get Xt(){return this.#_}get jt(){return this.#T}set jt(t){t instanceof m&&(t=t.Lt()),t=this.#A(t)??this.#_,y.#v(this.#T,t)||(this.#T=t,this.#p._t(y.Yt,t))}async Gt(t=!1){t&&0!==this.#w.length||(this.#y??=this.#b(),await this.#y)}async#b(){const t=await this.#m.ot(!0);if(!t.ft)return void(this.#y=void 0);const i={};for(let s of t.ft){if(i[s[y.#s.zt()]])continue;const t=new m;t.Lt=()=>s[y.#s.zt()],t.Pt=()=>s[y.#s.Ut()],t.Vt=()=>s[y.#s.Ft()],i[t.Lt()]=t}this.#A=t=>i[t],this.#w=Object.values(i),this.#_=this.#w[0];const s=this.#T;this.#T=i[s?.Lt()]??this.#_,this.#p._t(y.Bt,this.Wt),s&&!y.#v(s,this.#T)&&this.#p._t(y.Yt,this.#T),this.#y=void 0}qt(t){return this.#p.Ct(y.Yt,t)}Kt(t){return this.#p.Ct(y.Bt,t)}}const A=(new DOMParser).parseFromString(s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-1-s)})).join("")}(26,113)+25..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-11-s)})).join("")}(35,115)+13..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+35..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")),"text/html").body.children;function w(t){if(t>A.length)throw new Error(`View with index ${t} not found`);return A.item(t).cloneNode(!0)}function _(t,i,s=0){return function(t,i){return[...t.querySelectorAll(i)]}(t,i)[s]}function T(t,i={},r=null,e=!1){if(e)return s.addElement(t,i,r);const n=document.createElement(t);if(i)for(let t of Object.keys(i))n.setAttribute(t,i[t]);return r&&r.insertAdjacentElement("beforeend",n),n}function b(t){const i=_(A.item(0),`svg[key="${t}"]`).cloneNode(!0);return i.removeAttribute("key"),i}class C{Qt;Zt;Jt;ti;ii}class R{si;ri;ei;ni;hi}class N{static#C=1;static#R=2;static#N=3;static#M=4;static#x=5;static#k=6;static#O=7;static#$=8;static#I=9;static#D=10;static ai=["dark","darkmini"];static ui=200;static oi=300;static ci=30;#p=new p;li=w(1);fi=new C;di=new R;gi=_(this.li,".movewin_main");Si=_(this.li,".movewin_footer");#L=[!1,!0];#P=[0,0];#V=[N.oi,N.oi];#H=!1;#z=!1;#U=!0;constructor(){this.fi.Qt=_(this.li,".movewin_resizers"),this.fi.Zt=_(this.li,".movewin_resizer-lt"),this.fi.Jt=_(this.li,".movewin_resizer-rt"),this.fi.ti=_(this.li,".movewin_resizer-lb"),this.fi.ii=_(this.li,".movewin_resizer-rb"),this.di.si=_(this.li,".movewin_header"),this.di.ri=_(this.li,".movewin_header-info"),this.di.ei=_(this.li,".movewin_header-status"),this.di.ni=_(this.li,".movewin_header-mover"),this.di.hi=_(this.li,".movewin_header-button_minimize")}get pi(){return this.li.getAttribute("theme")}set pi(t){N.ai.includes(t)||(t=N.ai[0]),this.li.setAttribute("theme",t),this.#p._t(N.#C,t)}get status(){return this.di.ei.textContent}set status(t){this.di.ei.textContent!==t&&(this.di.ei.textContent=t,this.#p._t(N.#R,t))}get Ei(){return[...this.#L]}set Ei([t,i]){if(!this.li.parentElement)return void(this.#L=[t,i]);if(this.#L[0]===t&&this.#L[1]===i)return;const s=this.li.getBoundingClientRect(),r=this.li.parentElement.getBoundingClientRect();let e=t?{v:"left",r:"right",vi:s.left-r.left}:{v:"right",r:"left",vi:r.right-s.right},n=i?{v:"top",r:"bottom",vi:s.top-r.top}:{v:"bottom",r:"top",vi:r.bottom-s.bottom};this.#L=[t,i],this.#P=[e.vi,n.vi],this.li.style[e.v]=this.#P[0]+"px",this.li.style[e.r]=null,this.li.style[n.v]=this.#P[1]+"px",this.li.style[n.r]=null,this.#p._t(N.#N,...this.#L),this.#p._t(N.#M,...this.#P)}get mi(){return[...this.#P]}get yi(){const t=this.li.getBoundingClientRect(),i=this.li.parentElement.getBoundingClientRect();return[this.#L[0]?t.left-i.left:i.right-t.right,this.#L[1]?t.top-i.top:i.bottom-t.bottom]}set mi([t,i]){if(!this.li.parentElement)return void(this.#P=[t,i]);if(this.#P[0]===t&&this.#P[1]===i)return;const s=this.li.getBoundingClientRect(),r=this.li.parentElement.getBoundingClientRect();this.#P[0]=l(0,t,r.width-s.width),this.#P[1]=l(0,i,r.height-s.height),this.li.style[this.#L[0]?"left":"right"]=this.#P[0]+"px",this.li.style[this.#L[1]?"top":"bottom"]=this.#P[1]+"px",this.#p._t(N.#M,t,i)}get size(){return[...this.#V]}get Ai(){const t=this.li.getBoundingClientRect();return[t.width,t.height]}set size([t,i]){if(!this.li.parentElement)return void(this.#V=[t,i]);if(this.#V[0]===t&&this.#V[0]===i)return;const s=this.li.getBoundingClientRect(),r=this.li.parentElement.getBoundingClientRect();let e=this.#L[0]?r.right-s.left-(N.ci-Math.min(N.ci,s.left-r.left)):s.right-r.left-(N.ci-Math.min(N.ci,r.right-s.right)),n=this.#L[1]?r.bottom-s.top-(N.ci-Math.min(N.ci,s.top-r.top)):s.bottom-r.top-(N.ci-Math.min(N.ci,r.bottom-s.bottom));this.#V[0]=l(N.ui,t,e),this.#V[1]=l(N.ui,i,n),this.li.style.width=this.#V[0]+"px",this.li.style.height=this.#V[1]+"px",this.#p._t(N.#k,...this.#V)}get wi(){return this.#H}get _i(){return this.di.ni.hidden}set wi(t){t!==this.#H&&(this.di.ni.hidden=t,this.#H=t,this.#p._t(N.#$,t))}get Ti(){return this.#z}get bi(){return this.fi.Qt.hidden}set Ti(t){t!==this.#z&&(this.fi.Qt.hidden=t,this.#z=t,this.#p._t(N.#I,t))}get Ci(){return this.#U}get Ri(){return"none"===this.Si.style.display}set Ci(t){t!==this.#U&&(this.Si.style.display=t?"none":null,this.#U=t,this.#p._t(N.#D,t))}Ni(i){const s=(()=>{let t=this.li.getBoundingClientRect(),s=this.li.parentElement.getBoundingClientRect(),r=s.width-t.width,e=s.height-t.height,n=this.#L[0]?{v:"left",f:t=>t-a}:{v:"right",f:t=>a-t},h=this.#L[1]?{v:"top",f:t=>t-u}:{v:"bottom",f:t=>u-t},a=i.clientX+s[n.v]-t[n.v],u=i.clientY+s[h.v]-t[h.v];return(t,i)=>{let s=l(0,n.f(t),r),a=l(0,h.f(i),e);this.li.style[n.v]=s+"px",this.li.style[h.v]=a+"px",this.#p._t(N.#x,s,a)}})(),r=t=>s(t.pageX,t.pageY),e=()=>{let i=this.li.getBoundingClientRect(),s=this.li.parentElement.getBoundingClientRect();this.#L[0]?(this.#P[0]=i.left-s.left,this.li.style.left=this.#P[0]+"px"):(this.#P[0]=s.right-i.right,this.li.style.right=this.#P[0]+"px"),this.#L[1]?(this.#P[1]=i.top-s.top,this.li.style.top=this.#P[1]+"px"):(this.#P[1]=s.bottom-i.bottom,this.li.style.bottom=this.#P[1]+"px"),this.#p._t(N.#M,...this.#P),t.document.removeEventListener("mousemove",r),t.document.removeEventListener("mouseup",e),t.document.removeEventListener("touchmove",n),t.document.removeEventListener("touchstart",h),t.document.removeEventListener("touchend",h),t.document.removeEventListener("touchcancel",h)},n=t=>r(t.touches[0]),h=t=>{1!==t.touches.length&&e()};t.document.addEventListener("mousemove",r),t.document.addEventListener("mouseup",e),t.document.addEventListener("touchmove",n),t.document.addEventListener("touchstart",h),t.document.addEventListener("touchend",h),t.document.addEventListener("touchcancel",h)}Mi(i,s,r){const e=(()=>{let t=this.li.getBoundingClientRect(),e=this.li.parentElement.getBoundingClientRect();const n=(s,r,n,h,a)=>{if(s!==r){let i=r?t.left-e.left:e.right-t.right;return()=>i}let u=n,o=N.ci,c=0,f=t=>t;s?(u=n,o-=Math.min(N.ci,e[h]-t[h]),c=t[h]-e[n]-N.ui,f=t=>t-d):(u=h,o-=Math.min(N.ci,t[n]-e[n]),c=e[h]-t[n]-N.ui,f=t=>d-t);let d=i[a]+e[u]-t[u];return t=>{const i=l(o,f(t),c);return this.li.style[u]=i+"px",i}},h=(s,r,n,h,a)=>{let u=t[h],o=t=>t,c=0;return s?(u+=i[a],o=t=>u-t,c=t[n]-e[r]-(N.ci-Math.min(N.ci,e[n]-t[n]))):(u-=i[a],o=t=>u+t,c=e[n]-t[r]-(N.ci-Math.min(N.ci,t[r]-e[r]))),t=>{const i=l(N.ui,o(t),c);return this.li.style[h]=i+"px",i}};let a=n(s,this.#L[0],"left","right","clientX"),u=n(r,this.#L[1],"top","bottom","clientY"),o=h(s,"left","right","width","clientX"),c=h(r,"top","bottom","height","clientY");return(t,i)=>{this.#p._t(N.#x,a(t),u(i)),this.#p._t(N.#O,o(t),c(i))}})(),n=t=>e(t.pageX,t.pageY),h=()=>{let i=this.li.getBoundingClientRect(),s=this.li.parentElement.getBoundingClientRect();this.#L[0]?(this.#P[0]=i.left-s.left,this.li.style.left=this.#P[0]+"px"):(this.#P[0]=s.right-i.right,this.li.style.right=this.#P[0]+"px"),this.#L[1]?(this.#P[1]=i.top-s.top,this.li.style.top=this.#P[1]+"px"):(this.#P[1]=s.bottom-i.bottom,this.li.style.bottom=this.#P[1]+"px"),this.#V=[i.width,i.height],this.li.style.width=this.#V[0]+"px",this.li.style.height=this.#V[1]+"px",this.#p._t(N.#M,...this.#P),this.#p._t(N.#k,...this.#V),t.document.removeEventListener("mousemove",n),t.document.removeEventListener("mouseup",h),t.document.removeEventListener("touchmove",a),t.document.removeEventListener("touchstart",u),t.document.removeEventListener("touchend",u),t.document.removeEventListener("touchcancel",u)},a=t=>n(t.touches[0]),u=t=>{1!==t.touches.length&&h()};t.document.addEventListener("mousemove",n),t.document.addEventListener("mouseup",h),t.document.addEventListener("touchmove",a),t.document.addEventListener("touchstart",u),t.document.addEventListener("touchend",u),t.document.addEventListener("touchcancel",u)}#F(){const t=this.li.parentElement.getBoundingClientRect(),i=(i,s,r,e,n,h)=>{const a=Math.max(N.ui,t[h]-N.ci),u=a>r?r:a,o=l(0,a-u,s);return this.li.style[h]=u+"px",this.li.style[i?e:n]=o+"px",[o,u]},[s,r]=i(this.#L[0],this.#P[0],this.#V[0],"left","right","width"),[e,n]=i(this.#L[1],this.#P[1],this.#V[1],"top","bottom","height");this.#p._t(N.#x,s,e),this.#p._t(N.#O,r,n)}xi(t){return this.#p.Ct(N.#C,t)}ki(t){return this.#p.Ct(N.#R,t)}Oi(t){return this.#p.Ct(N.#N,t)}$i(t){return this.#p.Ct(N.#M,t)}Ii(t){return this.#p.Ct(N.#x,t)}Di(t){return this.#p.Ct(N.#k,t)}Li(t){return this.#p.Ct(N.#O,t)}Pi(t){return this.#p.Ct(N.#$,t)}Vi(t){return this.#p.Ct(N.#I,t)}Hi(t){return this.#p.Ct(N.#D,t)}zi(i,s){i.insertAdjacentElement("afterbegin",this.li),this.li.style.zIndex=s,this.pi??=N.ai[0],this.li.style[this.#L[0]?"left":"right"]=this.#P[0]+"px",this.li.style[this.#L[1]?"top":"bottom"]=this.#P[1]+"px",this.li.style.width=this.#V[0]+"px",this.li.style.height=this.#V[1]+"px",this.di.ni.hidden=this.#H,this.fi.Qt.hidden=this.#z,this.Si.style.display=this.#U?"none":null,this.#F(),this.di.ni.addEventListener("mousedown",(t=>{t.preventDefault(),this.Ni(t)})),this.di.ni.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Ni(t.touches[0]))})),this.fi.Zt.addEventListener("mousedown",(t=>{t.preventDefault(),this.Mi(t,!0,!0)})),this.fi.Zt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Mi(t.touches[0],!0,!0))})),this.fi.Jt.addEventListener("mousedown",(t=>{t.preventDefault(),this.Mi(t,!1,!0)})),this.fi.Jt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Mi(t.touches[0],!1,!0))})),this.fi.ti.addEventListener("mousedown",(t=>{t.preventDefault(),this.Mi(t,!0,!1)})),this.fi.ti.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Mi(t.touches[0],!0,!1))})),this.fi.ii.addEventListener("mousedown",(t=>{t.preventDefault(),this.Mi(t,!1,!1)})),this.fi.ii.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Mi(t.touches[0],!1,!1))})),t.addEventListener("resize",this.#F.bind(this))}}const M="setting_";class x{Ui;Fi;Yi;Bi;constructor(t){this.Ui=t,this.Fi=w(7),this.Yi=_(this.Fi,".minimap-tab_settings_setting-name"),this.Bi=_(this.Fi,".minimap-tab_settings_setting-value")}Gi(t){this.Yi.textContent=t.It(`${M}${this.Ui}`)}}class k extends x{Wi;Xi=new Map;ji;constructor(t,i,s){super(t),this.Wi=w(8),this.Bi.insertAdjacentElement("beforeend",this.Wi),this.ji=i;for(let[t,i]of Object.entries(s)){const s=document.createElement("option");s.value=t,s.textContent=t,this.Wi.insertAdjacentElement("beforeend",s),this.Xi.set(t,{qi:s,action:i})}this.Wi.value=Object.keys(s)[0],this.Wi.addEventListener("change",(()=>this.Ki(this.Wi.value,!0)))}Ki(t,i){let s=this.Xi.get(t);h(s)||(this.Wi.value=s.qi.value,i&&s.action())}Gi(t){if(super.Gi(t),this.ji)for(let{qi:i}of this.Xi.values())i.textContent=t.It(`${M}${this.Ui}_${i.value}`)}}class O extends x{Qi;$input;Zi;#Y;#B;constructor(t,i,s){super(t),this.Qi=w(9),this.Bi.insertAdjacentElement("beforeend",this.Qi),this.$input=_(this.Qi,"input"),this.Zi=_(this.Qi,"span"),this.#Y=i,this.#B=s,this.$input.addEventListener("change",(()=>this.Ki(this.$input.checked,!0)))}Ki(t,i){this.$input.checked=t,i&&(t?this.#Y():this.#B())}}class ${Ji;ts;ss;constructor(t){this.Ji=t,this.ts=w(6),this.ss=_(this.ts,"summary",0)}Gi(t){this.ss.textContent=t.It(`settingGroup_${this.Ji}`)}}class I{#G;#W=new Map;#X=new Map;#j;constructor(t,i){this.#G=t,this.#j=i,this.#G.Dt(this.#q.bind(this))}rs(t,i,s){if(this.#X.has(t))return null;const r=new k(t,i,s);return this.#X.set(t,r),r}es(t){const i=this.#X.get(t);return i instanceof k?i:null}ns(t,i,s){if(this.#X.has(t))return null;const r=new O(t,i,s);return this.#X.set(t,r),r}hs(t){const i=this.#X.get(t);return i instanceof O?i:null}us(t){this.#j.textContent="";for(let[i,s]of Object.entries(t)){const t=new $(i);this.#W.set(i,t),this.#j.insertAdjacentElement("beforeend",t.ts);for(let i of s){const s=this.#X.get(i);s&&t.ts.insertAdjacentElement("beforeend",s.Fi)}}this.#q()}#q(){for(let t of this.#W.values())t.Gi(this.#G);for(let t of this.#X.values())t.Gi(this.#G)}}class D{os;cs;ls;constructor(t,i,s){this.os=t,h(i)||(this.cs=w(i)),this.ls=w(4),this.ls.textContent=s}}class L extends D{fs;Qt;Zt;Jt;ti;ii;constructor(){super("main",2,"Minimap"),this.fs=_(this.cs,".minimap-tab_main_canvas"),this.Qt=_(this.cs,".minimap_inner_resizers"),this.Zt=_(this.Qt,".minimap_inner_resizer_lt"),this.Jt=_(this.Qt,".minimap_inner_resizer_rt"),this.ti=_(this.Qt,".minimap_inner_resizer_lb"),this.ii=_(this.Qt,".minimap_inner_resizer_rb")}}class P extends D{ds;constructor(){super("menu",3,"Menu"),this.cs.style.display="none",this.ds=_(this.cs,".minimap-tab_menu_buttons")}}class V extends D{ts;constructor(){super("settings",5,"Settings"),this.cs.style.display="none",this.ts=_(this.cs,".minimap-tab_settings_detail")}}class H extends D{ts;constructor(){super("artlist",11,"Art list"),this.cs.style.display="none",this.ts=_(this.cs,".minimap-tab_artlist_detail")}}class z extends D{constructor(){super("info",12,"Info"),this.cs.style.display="none"}}class U extends N{static#K=1;static#Q=5e3;#p=new p;#g;gs=new L;Ss=new P;ps=new V;Es=new H;vs=new z;ys=T("button");As=T("button");#Z=new Map;#J=this.gs;#tt=this.gs;#it;ws;constructor(t){super(),this.#g=t,this.ws=new I(t,this.ps.ts),this.Ci=!1,this.status=this.#g.It(`tab_${this.#tt.os}`),this.ys.insertAdjacentElement("afterbegin",b("menu")),this.di.ri.insertAdjacentElement("beforebegin",this.ys),this.As.style.display="none",this.As.insertAdjacentElement("afterbegin",b("close")),this.di.ri.insertAdjacentElement("afterend",this.As),this.#g.Dt(this.#st.bind(this));let i=[this.gs,this.ps,this.Es,this.vs];this.gi.insertAdjacentElement("beforeend",this.Ss.cs),this.#Z.set(this.Ss.os,this.Ss);for(let t of i)this.gi.insertAdjacentElement("beforeend",t.cs),this.#Z.set(t.os,t),this.Ss.ds.insertAdjacentElement("beforeend",t.ls),t.ls.textContent=this.#g.It(`tab_${t.os}`),t.ls.addEventListener("click",(()=>this._s(t,!1)));this.ys.addEventListener("click",(()=>{this.#tt===this.Ss?this._s(this.#J,!1):this._s(this.Ss,!1)})),this.As.addEventListener("click",(()=>this._s(this.gs,!1))),this.li.addEventListener("mouseenter",(()=>clearTimeout(this.#it))),this.li.addEventListener("mouseleave",(()=>{this.#tt!==this.gs&&(clearTimeout(this.#it),this.#it=setTimeout((()=>this._s(this.gs,!1)),U.#Q))})),this.Vi((t=>this.gs.Qt.hidden=t))}_s(t,i=!1){t instanceof D&&(t=t.os);let s=this.#Z.get(t)??this.gs;this.As.style.display=s===this.gs?"none":null,s.cs.style.display=null,this.#tt.cs.style.display="none",this.#J=this.#tt,this.#tt=s,this.status=this.#g.It(`tab_${s.os}`),this.#p._t(U.#K,s),i&&this.#tt!==this.gs&&(clearTimeout(this.#it),this.#it=setTimeout((()=>this._s(this.gs,!1)),U.#Q))}#st(){this.status=this.#g.It(`tab_${this.#tt.os}`);for(let t of this.#Z.values())t.ls.textContent=this.#g.It(`tab_${t.os}`)}get Ts(){return this.#tt}bs(t){return this.#p.Ct(U.#K,t)}zi(t,i){super.zi(t,i),this.gs.Zt.addEventListener("mousedown",(t=>{t.preventDefault(),this.Mi(t,!0,!0)})),this.gs.Zt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Mi(t.touches[0],!0,!0))})),this.gs.Zt.addEventListener("dblclick",(t=>{t.preventDefault(),this.Ei=[!0,!0],this.mi=[0,0]})),this.fi.Zt.addEventListener("dblclick",(t=>{t.preventDefault(),this.Ei=[!0,!0],this.mi=[0,0]})),this.gs.Jt.addEventListener("mousedown",(t=>{t.preventDefault(),this.Mi(t,!1,!0)})),this.gs.Jt.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Mi(t.touches[0],!1,!0))})),this.gs.Jt.addEventListener("dblclick",(t=>{t.preventDefault(),this.Ei=[!1,!0],this.mi=[0,0]})),this.fi.Jt.addEventListener("dblclick",(t=>{t.preventDefault(),this.Ei=[!1,!0],this.mi=[0,0]})),this.gs.ti.addEventListener("mousedown",(t=>{t.preventDefault(),this.Mi(t,!0,!1)})),this.gs.ti.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Mi(t.touches[0],!0,!1))})),this.gs.ti.addEventListener("dblclick",(t=>{t.preventDefault(),this.Ei=[!0,!1],this.mi=[0,0]})),this.fi.ti.addEventListener("dblclick",(t=>{t.preventDefault(),this.Ei=[!0,!1],this.mi=[0,0]})),this.gs.ii.addEventListener("mousedown",(t=>{t.preventDefault(),this.Mi(t,!1,!1)})),this.gs.ii.addEventListener("touchstart",(t=>{1===t.touches.length&&(t.preventDefault(),this.Mi(t.touches[0],!1,!1))})),this.gs.ii.addEventListener("dblclick",(t=>{t.preventDefault(),this.Ei=[!1,!1],this.mi=[0,0]})),this.fi.ii.addEventListener("dblclick",(t=>{t.preventDefault(),this.Ei=[!1,!1],this.mi=[0,0]}))}}class F{fs;constructor(){this.fs=w(13)}zi(t,i=null){t.insertAdjacentElement("afterbegin",this.fs),this.fs.style.zIndex=i??"auto"}}class Y{Cs;Rs;Ns;Ms;xs;ks;translations;Wt;Os;$s;constructor(t,i,r){this.Cs=t,this.Rs=s.info.script.version,this.xs=new B,this.ks=new g(i),this.Ns=!this.ks.yt("version"),this.Ms=this.Ns||!c(this.ks.o("version"),this.Cs),this.Ms&&(this.ks.p(),this.ks.l("version",this.Cs)),this.translations=new v,this.Wt=new y(r),this.Os=new U(this.translations),this.$s=new F}bind(){this.translations.$t=this.ks.o("lang"),this.ks.l("lang",this.translations.$t.xt),this.translations.Dt((t=>this.ks.l("lang",t.xt)));const t=()=>19812..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-45-s)})).join("")}(50,208,201,211)+23..toString(36).toLowerCase();this.Wt.jt=this.ks.o(t()),this.ks.l(t(),this.Wt.jt.Lt()),this.Wt.qt((i=>this.ks.l(t(),i.Lt()))),this.Os.pi=this.ks.o("theme")??N.ai[0],this.Os.Ei=this.ks.o("pos")??[!1,!0],this.Os.mi=this.ks.o("xy")??[0,0],this.Os.size=this.ks.o("size")??[N.oi,N.oi],this.Os.wi=this.ks.o("isHideMover")??!1,this.Os.Ti=this.ks.o("isHideResizers")??!1}Is(){s.h(s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-27-s)})).join("")}(54,164)+375..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-5-s)})).join("")}(24,114,99,105))),this.Ns&&this.Os._s(this.Os.vs,!1)}Ds(){this.Os.xi((t=>this.ks.l("theme",t))),this.ks.l("theme",this.Os.pi),this.Os.Oi(((t,i)=>this.ks.l("pos",[t,i]))),this.ks.l("pos",this.Os.Ei),this.Os.$i(((t,i)=>this.ks.l("xy",[t,i]))),this.ks.l("xy",this.Os.mi),this.Os.Di(((t,i)=>this.ks.l("size",[t,i]))),this.ks.l("size",this.Os.size),this.Os.Pi((t=>this.ks.l("isHideMover",t))),this.ks.l("isHideMover",this.Os.wi),this.Os.Vi((t=>this.ks.l("isHideResizers",t))),this.ks.l("isHideResizers",this.Os.Ti)}Ls(){const t=this.Os.ws.rs("lang",!0,this.translations.translations.reduce(((t,i)=>({...t,[i.xt]:()=>this.translations.$t=i})),{}));t.Ki(this.translations.$t.xt,!1),this.translations.Dt((i=>t.Ki(i.xt,!1)));const i=this.Os.ws.rs(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-37-s)})).join("")}(22,160,157,161)+38256..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-63-s)})).join("")}(16,189),!1,this.Wt.Wt.reduce(((t,i)=>({...t,[i.Lt()]:()=>this.Wt.jt=i})),{}));i.Ki(this.Wt.jt.Lt(),!1),this.Wt.qt((t=>i.Ki(t.Lt(),!1)));const s=this.Os.ws.rs("theme",!1,U.ai.reduce(((t,i)=>({...t,[i]:()=>this.Os.pi=i})),{}));s.Ki(this.Os.pi,!1),this.Os.xi((t=>s.Ki(t,!1)));const r=this.Os.ws.rs("fixAngle",!0,{lt:()=>{this.Os.Ei=[!0,!0],this.Os.mi=[0,0]},rt:()=>{this.Os.Ei=[!1,!0],this.Os.mi=[0,0]},lb:()=>{this.Os.Ei=[!0,!1],this.Os.mi=[0,0]},rb:()=>{this.Os.Ei=[!1,!1],this.Os.mi=[0,0]}});r.Ki(`${this.Os.Ei[0]?"l":"r"}${this.Os.Ei[1]?"t":"b"}`,!1),this.Os.Oi(((t,i)=>r.Ki(`${t?"l":"r"}${i?"t":"b"}`,!1)));const e=this.Os.ws.ns("lockMove",(()=>this.Os.wi=!0),(()=>this.Os.wi=!1));e.Ki(this.Os.wi,!1),this.Os.Pi((t=>e.Ki(t,!1)));const n=this.Os.ws.ns("lockSize",(()=>this.Os.Ti=!0),(()=>this.Os.Ti=!1));n.Ki(this.Os.Ti,!1),this.Os.Vi((t=>n.Ki(t,!1)))}}class B{Ps;Vs;constructor(){this.Ps=function(){const i=window.GM.info.userAgentData??t.navigator.userAgentData;if(i){if(!0===i.mobile)return!0;if(a.test(i.platform))return!0}return!!a.test(t.navigator.userAgent)}(),this.Vs=!1,t.document.addEventListener("touchstart",(()=>this.Vs=!0),{once:!0})}}class G{static#rt=1;static#et=2;static#p=new p;static#nt;static#ht;static#at(){this.#nt||(this.#nt=t.Function.prototype.apply,t.Function.prototype.apply=new Proxy(t.Function.prototype.apply,{apply(t,i,s){const r=Reflect.apply(t,i,s);return G.#p._t(G.#rt,t,i,s,r),r}}))}static#ut(){this.#ht||(this.#ht=t.WebSocket,t.WebSocket=new Proxy(t.WebSocket,{construct(t,i){const s=new t(...i);return G.#p._t(G.#et,s),s}}))}static Hs(t){return this.#at(),this.#p.Ct(this.#rt,t)}static zs(t){return this.#ut(),this.#p.Ct(this.#et,t)}}const W=256,X=768,j=([t,i])=>i<<8|t,q=([t,i],s)=>{const r=s>>1;return[t+r,i+r]},K=([t,i],s=256)=>i*s+t,Q=([t,i])=>({Us:Math.floor(t/W),Fs:Math.floor(i/W),Ys:t%W,Bs:i%W});class Z{Gs;Ws;Xs;js;qs;Ks;Qs;get Zs(){return this.Xs>>1}}class J{coords;Js;tr=!1;ir=!1}class tt{static#ot=1;static#ct=2;static#lt=3;static#et=4;static#ft=5;static#dt=6;static#gt=7;static#St=8;static#pt=9;static#Et=160;static#vt=161;static#mt=162;static#yt=163;static#At=164;static#wt=193;static#_t=!1;static#p;static#Tt;static#bt;static#Ct;static#Rt;static#Nt;static#Mt;static#xt;static#kt;static init(i){if(this.#_t)return;this.#_t=!0,this.#p=new p,this.#Mt=new Map,this.#kt=new Map,this.#Ot(),this.#$t();const s=(new Map).set(0,[[202,227,255],[255,255,255],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128]]).set(1,[[49,46,47],[99,92,90],[49,46,47],[99,92,90],[129,119,107],[198,181,165],[255,237,212],[150,86,122],[202,112,145],[96,67,79],[136,79,94],[175,101,103],[195,124,107],[221,153,126],[233,181,140],[198,139,91],[140,89,74],[94,68,63],[225,173,86],[248,207,142],[239,220,118],[206,190,85],[157,159,55],[114,121,43],[81,94,46],[69,100,79],[80,134,87],[187,209,138],[91,84,108],[106,113,137],[122,148,156],[174,215,185]]).set(2,[[255,255,255],[255,255,255],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128],[49,46,47],[99,92,90],[129,119,107],[198,181,165],[255,237,212],[150,86,122],[202,112,145],[96,67,79],[136,79,94],[175,101,103],[195,124,107],[221,153,126],[233,181,140],[198,139,91],[140,89,74],[94,68,63],[225,173,86],[248,207,142],[239,220,118],[206,190,85],[157,159,55],[114,121,43],[81,94,46],[69,100,79],[80,134,87],[187,209,138],[91,84,108],[106,113,137],[122,148,156],[174,215,185]]).set(3,[[226,218,0],[33,28,15],[33,28,15],[37,32,20],[41,36,24],[44,39,27],[50,44,31],[60,53,40],[71,62,49],[82,72,57],[100,88,66],[115,101,74],[125,111,84],[139,125,98],[152,134,102],[164,141,106],[180,156,122],[189,165,131],[195,173,138],[205,186,148],[218,196,161],[230,206,172]]).set(5,[[38,38,38],[0,0,0],[128,128,128],[255,255,255],[153,98,61],[255,163,200],[207,115,230],[128,0,128],[229,0,0],[229,137,0],[229,229,0],[150,230,70],[0,190,0],[0,230,230],[0,136,204],[0,0,230]]).set(6,[[255,255,255],[228,228,228],[136,136,136],[34,34,34],[255,167,209],[229,0,0],[229,149,0],[160,106,66],[229,217,0],[148,224,68],[2,190,1],[0,211,221],[0,131,199],[0,0,234],[207,110,228],[130,0,128]]).set(7,[[0,0,0],[255,255,255],[0,0,0],[255,255,255]]).set(8,[[197,204,184],[111,103,118],[154,154,151],[139,85,128],[195,136,144],[165,147,165],[102,96,146],[154,79,80],[194,141,117],[124,161,192],[65,106,163],[141,98,104],[190,149,92],[104,172,169],[56,112,128],[110,105,98],[147,161,103],[110,170,120],[85,112,100],[157,159,127],[126,158,153],[93,104,114],[67,52,85],[0,0,0]]).set(10,[[5,31,57],[5,31,57],[74,36,128],[197,58,157],[255,142,128]]).set(11,[[255,255,255],[153,233,228],[255,255,255],[228,228,228],[196,196,196],[136,136,136],[78,78,78],[0,0,0],[244,179,174],[255,167,209],[255,84,178],[255,101,101],[229,0,0],[154,0,0],[254,164,96],[229,149,0],[160,106,66],[96,64,40],[245,223,176],[255,248,137],[229,217,0],[148,224,68],[2,190,1],[104,131,56],[0,101,19],[202,227,255],[0,211,221],[0,131,199],[0,0,234],[25,25,115],[207,110,228],[130,0,128]]),r=this.sr("s/REC_ME",(t=>{r(),Object.entries(t.canvases).forEach((([t,r])=>{const e=new Z;e.Gs=parseInt(t),e.Ws=r.ident,e.Xs=r.size,e.js=r.cli??0,e.qs=r.v??!1,e.Ks=i&&s.has(e.Gs)?s.get(e.Gs):r.colors,e.Qs=r.colors.map((([t,i,s],r)=>{if(r<e.js){let r=e.Ks.slice(e.js).map(((t,i)=>[t,i])).filter((([[r,e,n]])=>t===r&&i===e&&s===n))[0];if(r)return r[1]+e.js}return r})),this.#Mt.set(e.Gs,e)}))})),e=this.rr("s/REC_ME",(()=>{e();const t=this.er.canvas.view;this.#Nt=[t[0],t[1]],this.#Rt=t[2]})),n=/pixelplanet\.fun\/chunks\/(?<c>\d+)\/(?<x>\d+)\/(?<y>\d+).bmp/;t.Response.prototype.arrayBuffer=new Proxy(t.Response.prototype.arrayBuffer,{async apply(t,i,s){const r=await t.apply(i,s);if(n.test(i.url)){const t=i.url.match(n).groups;if(tt.#xt&&(tt.#xt.qs||tt.#xt.Gs!==parseInt(t.c)))return r;const s=parseInt(t.x),e=parseInt(t.y);let h=tt.nr([s,e]);h||(h=new J,h.coords=[s,e],tt.#kt.set(j(h.coords),h)),h.ir=!0,h.Js=new Uint8ClampedArray(65536),h.Js.set(new Uint8ClampedArray(r)),tt.#p._t(tt.#ft,h)}return r}}),t.addEventListener("DOMContentLoaded",(()=>{t.pixelPlanetEvents.addListener("setscale",(t=>this.#Rt=t)),t.pixelPlanetEvents.addListener("setviewcoordinates",(t=>this.#Nt=t))}))}static#Ot(){let t=G.Hs(((i,s,r,e)=>{"object"==typeof e&&e.dispatch&&e.getState&&(this.#It(e),t())}))}static#It(t){this.#Tt=t,this.#bt=t.dispatch,t.dispatch=t=>{let i=t.type;this.#p._t(`${this.#ct}_${i}`,t),this.#bt(t),this.#p._t(`${this.#lt}_${i}`,t)},this.#p._t(this.#ot)}static#$t(){G.zs((t=>{if(t.url.includes("pixelplanet")){this.#Ct=t;const i=t.send,s=this.#Dt.bind(this),r=s=>{i.call(t,s),this.#Lt(s)},e=()=>{t.removeEventListener("message",s),t.send=i,t.removeEventListener("close",e),this.#Ct===t&&this.#Ct};t.send=r,t.addEventListener("message",s),t.addEventListener("close",e),this.#p._t(this.#et,t)}}))}static#Dt(t){t.data instanceof ArrayBuffer&&this.#Pt(new Uint8ClampedArray(t.data))}static#Pt(t){switch(t[0]){case this.#wt:{const[i,s,r]=this.#Vt(t);let e=this.nr([i,s])?.Js;e&&(r.forEach((([t,i,s])=>e[K([t,i])]=s)),this.#p._t(this.#pt,i,s,r));break}}}static#Vt(t){const i=t[1],s=t[2],r=[];let e=3;for(;++e<t.byteLength;){const i=t[e++],s=t[e++],n=t[e++];r.push([s,i,n])}return[i,s,r]}static#Lt(t){t instanceof ArrayBuffer&&this.#Ht(new Uint8Array(t))}static#Ht(t){switch(t[0]){case this.#Et:{const i=this.#zt(t);if(this.#xt&&this.#kt.clear(),(this.#xt?.Gs??-1)==i)return;this.#xt=this.#Mt.get(i),this.#p._t(this.#St,this.#xt);break}case this.#vt:{if(this.#xt.qs)return;const i=this.#Ut(t),s=this.#Ft(i);this.#p._t(this.#dt,[s]);break}case this.#yt:{if(this.#xt.qs)return;const i=this.#Yt(t),s=[];for(let t of i)s.push(this.#Ft(t));this.#p._t(this.#dt,s);break}case this.#At:{if(this.#xt.qs)return;const i=this.#Bt(t);for(let t of i)this.#Gt(t);this.#p._t(this.#gt,i);break}}}static#zt(t){return t[1]}static#Ut(t){return[t[1],t[2]]}static#Yt(t){let i=2,s=[];for(;i<t.length;){let r=t[i++];s.push([t[i++],r])}return s}static#Bt(t){let i=2,s=[];for(;i<t.length;){let r=t[i++];s.push([t[i++],r])}return s}static#Ft([t,i]){let s=this.nr([t,i]);return s||(s=new J,s.coords=[t,i],this.#kt.set(j(s.coords),s)),s.tr=!0,s}static#Gt(t){this.#kt.delete(j(t))}static get er(){return this.#Tt.getState()}static hr(t,i=!1){return(i?store.dispatch:this.#bt)(t)}static get currentView(){return o(this.#Nt)}static get currentScale(){return this.#Rt}static get ar(){return o(this.er.canvas.hover)}static nr(t){return this.#kt.get(j(t))}static ur(){return[...this.#kt.values()]}static get cr(){return this.#xt}static get lr(){return this.#Ct}static get cr(){return this.#xt}static dr(t){return this.#p.Rt(this.#ot,t)}static sr(t,i){return this.#p.Ct(`${this.#ct}_${t}`,i)}static rr(t,i){return this.#p.Ct(`${this.#lt}_${t}`,i)}static zs(t){return this.#p.Ct(this.#et,t)}static gr(t){return this.#p.Ct(this.#pt,t)}static Sr(t){return this.#p.Ct(this.#St,t)}static pr(t){return this.#p.Ct(this.#ft,t)}static Er(t){return this.#p.Ct(this.#dt,t)}static vr(t){return this.#p.Ct(this.#gt,t)}}class it{jt;cr;mr=new Map;yr=new Map}class st{Ar;wr;_r;Tr;br;Cr;mr=[];Rr=!1;Nr=!1;Mr=!1;kr=!1;Or=!1}class rt{mi;Ar;$r;Ir;Dr;Lr;Rr=!1;Pr=!1;Vr}class et{static#Wt=1;static#Xt=2;static#jt=(()=>{const t=838..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-24-s)})).join("")}(53,179,186),i=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(31,167),s=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-14-s)})).join("")}(4,139),r=32..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-29-s)})).join("")}(54,184,188)+1061..toString(36).toLowerCase(),e=function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-6-s)})).join("")}(50,158,160)+23921..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-48-s)})).join("")}(20,184),n=36804..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-33-s)})).join("")}(28,177)+32104..toString(36).toLowerCase();return{Hr:t=>(t=>t.jt.Vt()+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-11-s)})).join("")}(0,126,122,113,127)+766..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-47-s)})).join("")}(24,188,173,187)+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+t.cr.Ws+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-44-s)})).join("")}(33,184,123)+1032..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-14-s)})).join("")}(57,181))(t),zt:()=>t,zr:()=>i,Ur:()=>s,Fr:()=>r,Yr:()=>e,Br:()=>n,Gr:(t,i)=>((t,i)=>t.jt.Vt()+31..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-71)})).join("")+t.cr.Ws+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-40-s)})).join("")}(3,90)+i.Dr)(t,i)}})();static#qt=URL.createObjectURL(new Blob([s.t(function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-35-s)})).join("")}(3,110,119,118)+21..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+708..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+11..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-13)})).join("")+39871..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-58-s)})).join("")}(43,171,173)+922246..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join(""))],{type:"application/javascript"}));#p=new p;#w;#Kt;#Qt=!1;#Zt=!1;#Jt=4;#ti=new Map;#ii=[];#si=1;constructor(t){this.#w=t}Wr(){if(this.#w.jt&&tt.cr&&(!this.#Kt||!this.#Qt||this.#Kt.cr!==tt.cr||this.#Kt.jt!==this.#w.jt)){for(let[t]of this.#ti.values())t.terminate();this.#ti.clear(),this.#ii=[],this.#Kt=new it,this.#Kt.cr=tt.cr,this.#Kt.jt=this.#w.jt,tt.cr.qs||this.#ri(this.#Kt)}}async#ri(t){const i=new e;i.st=et.#jt.Hr.bind(et,t),i.et=e.G,i.nt=this.#Qt,i.ht=this.#Qt;const s=await i.ot();if(!s.vt()&&404!==s.dt&&s.ft){for(let[i,r]of Object.entries(s.ft)){const s=new rt;t.mr.set(i,s),s.Ir=i,s.Dr=r[et.#jt.zt()],s.mi=[r[et.#jt.zr()],r[et.#jt.Ur()]],s.Ar=q(s.mi,t.cr.Xs),s.$r=[r[et.#jt.Fr()],r[et.#jt.Yr()]],s.Lr=r[et.#jt.Br()],s.Rr=!1,s.Pr=!1;let e=s.Ar[0]>>8,n=s.Ar[1]>>8,h=s.Ar[0]+s.$r[0]-1>>8,a=s.Ar[1]+s.$r[1]-1>>8;for(let i=e;i<=h;++i)for(let r=n;r<=a;++r){const e=j([i,r]);let n=t.yr.get(e);n||(n=new st,n.Ar=[i,r],t.yr.set(e,n)),n.mr.push(s)}}if(t===this.#Kt)if(this.#Zt)this.#ei(t);else for(let i of tt.ur())this.#ni(t,j(i.coords))}}#ei(t){if(t&&0!==t.mr.size){for(let i of t.mr.values())i.Rr||this.#hi(t,i);for(let i of t.yr.values())i.Rr=!0}}#ni(t,i){const s=t?.yr.get(i);if(s&&!s.Rr){s.Rr=!0;for(let i of s.mr)i.Rr||this.#hi(t,i)}}async#hi(t,i){if(!t)return;i.Rr=!0;const s=new e;s.st=et.#jt.Gr.bind(et,t,i),s.et=e.Y,s.nt=this.#Qt,s.ht=this.#Qt;const r=await s.ot();!r.vt()&&404!==r.dt&&r.ft&&(i.Vr=await createImageBitmap(r.ft),i.Pr=!0)}get nt(){return this.#Qt}set nt(t){this.#Qt!==t&&(this.#Qt=t,this.#p._t(et.#Wt,this.#Qt))}get Xr(){return this.#Zt}set Xr(t){this.#Zt!==t&&(this.#Zt=t,this.#p._t(et.#Xt,this.#Zt),this.#Zt&&this.#ei(this.#Kt))}get jr(){return this.#Kt}qr(t,i){const s=this.#ai(j(t),i);switch(i){case 1:return s?.wr;case 2:return s?._r;case 4:return s?.Tr;default:return null}}Kr(t){const i=this.#ai(j(t),1);if(!i||!i.Nr)return;const s=K(t);return i.br[s]?i.Cr[s]:null}set Qr(t){this.#si=t}#ai(t,i){const s=this.#Kt.yr.get(t);if(!s||s.Or)return s;switch(i){case 1:if(s.Nr||!s.mr.every((t=>t.Pr)))return s;break;case 2:if(s.kr)return s;break;case 4:if(s.Mr)return s;break;default:return null}return s.Or=!0,this.#ii.push(s),s}Zr(){if(this.#Kt&&0!==this.#ii.length&&!(this.#ti.size>=this.#Jt))for(;0!==this.#ii.length&&this.#ti.size<this.#Jt;)this.#ui()}#ui(){this.#oi(this.#Kt,this.#ii.pop())}#oi(t,i){if(!i)return;let s=0;if(1&this.#si&&!i.Nr&&(s|=1),2&this.#si&&!i.kr&&(s|=2),4&this.#si&&!i.Mr&&(s|=4),0===s)return void(i.Or=!1);const r=tt.nr(i.Ar);if(!(i.kr||r&&r.ir))return void(i.Or=!1);if(!i.Nr){if(!i.mr.every((t=>t.Pr)))return void(i.Or=!1);i.wr=T("canvas",{width:W,height:W});const t=i.wr.getContext("2d");for(let s of i.mr)t.drawImage(s.Vr,s.Ar[0]-(i.Ar[0]<<8),s.Ar[1]-(i.Ar[1]<<8))}const e=new Array(7);i.Nr?(e[0]=2,e[2]=i.br,e[3]=i.Cr):(e[0]=1,e[2]=i.wr.getContext("2d").getImageData(0,0,W,W).data,e[3]=null,i.wr=null),e[1]=s,e[4]=2&s?r.Js:null,e[5]=t.cr.Ks,e[6]=t.cr.js;const n=j(i.Ar),h=new Worker(et.#qt),a=new Map;h.addEventListener("error",(t=>{console.log("Error",n,[this.#si,s],t)})),h.addEventListener("messageerror",(t=>{console.log("Error message",n,[this.#si,s],t)})),h.addEventListener("message",(s=>{const[r,e,u,o,c,l]=s.data;if(h.terminate(),this.#ti.delete(n),i.Or=!1,r){if(e&&(i.br=e,i.Cr=u,i.wr=T("canvas",{width:W,height:W}),i.wr.getContext("2d").putImageData(new ImageData(o,W,W),0,0),i.Nr=!0),c){for(let[t,s]of a.entries()){let r=t<<2;const[e,n,h,a]=this.#ci(i,t,s);c[r++]=e,c[r++]=n,c[r++]=h,c[r]=a}i._r=T("canvas",{width:W,height:W}),i._r.getContext("2d").putImageData(new ImageData(c,W,W),0,0),i.kr=!0}l&&(i.Tr=T("canvas",{width:X,height:X}),i.Tr.getContext("2d").putImageData(new ImageData(l,X,X),0,0),i.Mr=!0)}else t.yr.delete(n)})),this.#ti.set(n,[h,i.kr?null:a]),h.postMessage(e)}#ci(t,i,s){if(t.br[i]){const r=t.Cr[i];return[...r===this.#Kt.cr.Qs[127&s]?function([t,i,s]){return[.2*t,.2*i,.2*s]}(this.#Kt.cr.Ks[r]):(this.#Kt.cr.Ks[r],[255,0,0]),255]}return[0,0,0,0]}Jr(t){return this.#p.Ct(et.#Wt,t)}te(t){return this.#p.Ct(et.#Xt,t)}Ds(){this.#w.qt(this.Wr.bind(this)),tt.Sr(this.Wr.bind(this)),this.Wr(),tt.pr((t=>this.#ni(this.#Kt,j(t.coords)))),tt.vr((t=>t.forEach((t=>{const i=j(t),s=this.#Kt?.yr.get(i);if(s){const t=this.#ti?.get(i);t&&(t[0].terminate(),this.#ti.delete(i)),this.#Kt.yr.forEach((t=>{t.kr=!1}))}})))),tt.gr(((t,i,s)=>{const r=j([t,i]),e=this.#Kt?.yr.get(r);if(!e)return;const n=this.#ti.get(r);if(e.kr||n&&null===n[1]){const t=e._r.getContext("2d");for(let[i,r,n]of s){n=this.#Kt.cr.Qs[127&n];const s=K([i,r]),h=new Uint8ClampedArray(this.#ci(e,s,n));t.putImageData(new ImageData(h,1,1),i,r)}}else if(n)for(let[t,i,r]of s){r=this.#Kt.cr.Qs[127&r];const s=K([t,i]);n[1].set(s,r)}}))}}class nt{static#li=1;static#fi=2;static#di=3;static#gi=4;#p=new p;#Si=T("canvas");#pi;#Ei;#vi;#mi=!1;#yi=!1;#Ai=!1;#wi=!0;#_i=8;constructor(t,i,s){this.#pi=t,this.#Ei=i,this.#vi=s}#Ti(){const t=this.#Ei.gs.fs;let i=this.#Ei.gi.getBoundingClientRect();t.width=i.width,t.height=i.height;const s=this.#vi.fs;i=s.parentElement.getBoundingClientRect(),s.width=i.width,s.height=i.height;const r=this.#pi.jr;if(r?.cr.qs??1)return;const e=tt.currentScale,n=t.getContext("2d"),h=s.getContext("2d");n.reset(),h.reset();const a=e<1;n.imageSmoothingEnabled=a,n.msImageSmoothingEnabled=a,n.webkitImageSmoothingEnabled=a,h.imageSmoothingEnabled=a,h.msImageSmoothingEnabled=a,h.webkitImageSmoothingEnabled=a,0===r.yr.size||tt.er.canvas.isHistoricalView||(this.#mi?this.#bi(h):this.#Ei.Ts===this.#Ei.gs&&(this.#Ci(n),e>=3&&this.#Ri(n,!1))),this.#yi&&this.#Ri(h,!0)}#Ci(t){if(tt.currentScale<.5)return;const i=this.#Ai?2:1;this.#Ni(t,(t=>this.#pi.qr(t,i)),tt.ar??tt.currentView,!1,W)}#bi(t){if(tt.currentScale<.5)return;const i=this.#wi&&tt.currentScale>=this.#_i?4:this.#Ai?2:1;this.#Ni(t,(t=>this.#pi.qr(t,i)),tt.currentView,!0,4===i?X:W)}#Ni(t,i,s,r,e){const n=this.#pi.jr.cr.Xs,h=tt.currentScale,{ie:a,se:u}=((t,i)=>{const[s,r]=q(t,i);return{Us:Math.floor(s/W),Fs:Math.floor(r/W),Ys:s%W,Bs:r%W,ie:s,se:r}})([Math.floor(s[0]),Math.floor(s[1])],n),o=(t.canvas.width>>1)/h,c=(t.canvas.height>>1)/h,l=Math.max(Math.ceil(a-o-.5),0),d=Math.max(Math.ceil(u-c-.5),0),g=Math.min(Math.ceil(a+o+.5),n),S=Math.min(Math.ceil(u+c+.5),n),{Us:p,Fs:E}=Q([l,d]),{Us:v,Fs:m}=Q([g,S]),y=v-p+1,A=m-E+1,w=this.#Si.getContext("2d");this.#Si.width=y*e,this.#Si.height=A*e,w.reset();for(let t=0;t<y;++t)for(let s=0;s<A;++s){const r=i([p+t,E+s]);r&&w.drawImage(r,t*e,s*e)}const _=e/W,T=h/_;let b=o-.5-a+p*W,C=c-.5-u+E*W;r&&(b+=.5-f(s[0]),C+=.5-f(s[1])),t.scale(T,T),t.drawImage(this.#Si,b*_,C*_)}#Ri(t,i=!1){const s=tt.currentScale,r=tt.currentView,e=.3*s,n=.65-.5,[h,a]=i?[d(r[0]),d(r[1])]:[.5,.5],u=t.canvas.width>>1,o=t.canvas.height>>1;t.resetTransform(),t.lineWidth=e,t.strokeStyle="darkblue",t.strokeRect(u-s*(n+h),o-s*(n+a),s+e,s+e)}get re(){return this.#mi}set re(t){this.#mi!==t&&(this.#mi=t,this.#p._t(nt.#li,this.#mi))}get ee(){return this.#yi}set ee(t){this.#yi!==t&&(this.#yi=t,this.#p._t(nt.#fi,this.#yi))}get ne(){return this.#Ai}set ne(t){this.#Ai!==t&&(this.#Ai=t,this.#Mi(),this.#p._t(nt.#di,this.#Ai))}get he(){return this.#wi}set he(t){this.#wi!==t&&(this.#wi=t,this.#Mi(),this.#p._t(nt.#gi,this.#wi))}ae(t){return this.#p.Ct(nt.#li,t)}ue(t){return this.#p.Ct(nt.#fi,t)}oe(t){return this.#p.Ct(nt.#di,t)}ce(t){return this.#p.Ct(nt.#gi,t)}#Mi(){let t=1;this.#mi&&this.#wi&&tt.currentScale>=this.#_i?t|=4:this.#Ai&&(t|=2),this.#pi.Qr=t}Ds(){const t=()=>{this.#Mi(),this.#Ti(),this.#pi.Zr(),window.requestAnimationFrame(t)};window.requestAnimationFrame(t)}}class ht extends Y{static#xi=1;static#ki=()=>function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-56-s)})).join("")}(17,185)+25..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-16-s)})).join("")}(52,170);static#Oi=()=>1190930..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-52-s)})).join("")}(7,167)+1193999..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-17-s)})).join("")}(30,164,148);le;fe;constructor(){super(ht.#xi,ht.#ki(),ht.#Oi()),this.ks.yt("hardcodeColors")||this.ks.l("hardcodeColors",!1),tt.init(this.ks.o("hardcodeColors")),this.le=new et(this.Wt),this.fe=new nt(this.le,this.Os,this.$s),t.addEventListener("load",(async()=>{await this.Wt.Gt(!0),this.Wt.Wt[0]?.Lt()===function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-59-s)})).join("")}(20,156)+28..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-13-s)})).join("")}(56,149)+32..toString(36).toLowerCase().split("").map((function(t){return String.fromCharCode(t.charCodeAt()+-39)})).join("")&&(this.bind(),this.Is(),this.Ds(),this.Ls())}),{once:!0})}bind(){super.bind(),this.le.nt=!!this.ks.yt("useCache")&&this.ks.o("useCache"),this.ks.l("useCache",this.le.nt),this.le.Jr((t=>this.ks.l("useCache",t))),this.le.Xr=!!this.ks.yt("loadAllTemplates")&&this.ks.o("loadAllTemplates"),this.ks.l("loadAllTemplates",this.le.Xr),this.le.te((t=>this.ks.l("loadAllTemplates",t))),this.fe.re=!!this.ks.yt("overlay")&&this.ks.o("overlay"),this.ks.l("overlay",this.fe.re),this.fe.ae((t=>this.ks.l("overlay",t))),this.fe.ee=!!this.ks.yt("overlayCenter")&&this.ks.o("overlayCenter"),this.ks.l("overlayCenter",this.fe.ee),this.fe.ue((t=>this.ks.l("overlayCenter",t))),this.fe.ne=!!this.ks.yt("errorDetector")&&this.ks.o("errorDetector"),this.ks.l("errorDetector",this.fe.ne),this.fe.oe((t=>this.ks.l("errorDetector",t))),this.fe.he=!!this.ks.yt("minipixel")&&this.ks.o("minipixel"),this.ks.l("minipixel",this.fe.he),this.fe.ce((t=>this.ks.l("minipixel",t)))}Is(){super.Is(),this.Os.zi(t.document.body,2),this.$s.zi(t.document.body)}Ds(){super.Ds(),this.le.Ds(),this.fe.Ds()}Ls(){super.Ls();this.Os.ws.ns("hardcodeColors",(()=>{this.ks.l("hardcodeColors",!0),t.location.reload()}),(()=>{this.ks.l("hardcodeColors",!1),t.location.reload()})).Ki(this.ks.o("hardcodeColors"),!1);const i=this.Os.ws.ns("useCache",(()=>this.le.nt=!0),(()=>this.le.nt=!1));i.Ki(this.ks.o("useCache"),!1),this.le.Jr((t=>i.Ki(t,!1)));const s=this.Os.ws.ns("loadAllTemplates",(()=>this.le.Xr=!0),(()=>this.le.Xr=!1));s.Ki(this.ks.o("loadAllTemplates"),!1),this.le.te((t=>s.Ki(t,!1)));const r=this.Os.ws.ns("overlay",(()=>this.fe.re=!0),(()=>this.fe.re=!1));r.Ki(this.ks.o("overlay"),!1),this.fe.ae((t=>r.Ki(t,!1)));const e=this.Os.ws.ns("overlayCenter",(()=>this.fe.ee=!0),(()=>this.fe.ee=!1));e.Ki(this.ks.o("overlayCenter"),!1),this.fe.ue((t=>e.Ki(t,!1)));const n=this.Os.ws.ns("errorDetector",(()=>this.fe.ne=!0),(()=>this.fe.ne=!1));n.Ki(this.ks.o("errorDetector"),!1),this.fe.oe((t=>n.Ki(t,!1)));const h=this.Os.ws.ns("minipixel",(()=>this.fe.he=!0),(()=>this.fe.he=!1));h.Ki(this.ks.o("minipixel"),!1),this.fe.ce((t=>h.Ki(t,!1))),this.Os.ws.us({minimap:["overlay","errorDetector","autoSelectColor","minipixel"],common:["lang",19812..toString(36).toLowerCase()+function(){var t=Array.prototype.slice.call(arguments),i=t.shift();return t.reverse().map((function(t,s){return String.fromCharCode(t-i-49-s)})).join("")}(52,214,207,217)+23..toString(36).toLowerCase()],window:["theme","fixAngle","lockMove","lockSize"],extended:["overlayCenter","hardcodeColors","useCache","loadAllTemplates"]})}}(()=>{const i=[{de:/(?<!git\.)(pixelplanet|fuckyouarkeros)\.fun((\/(#|$))|$)/,ge:ht}];for(let{de:s,ge:r}of i)if(s.test(t.location.href)){new r;break}})()})();